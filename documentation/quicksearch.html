<html>
<head>
</head>
<body style="background: transparent;">
    <script src="scripts/docstrap.lib.js"></script>
    <script src="scripts/lunr.min.js"></script>
    <script src="scripts/fulltext-search.js"></script>

    <script type="text/x-docstrap-searchdb">
    {"auth_index.js.html":{"id":"auth_index.js.html","title":"Source: auth/index.js","body":" Documentation Modules authauthPagebuttoncomponentconfigcontentBuilderdropdownFieldfieldformgridlayoutmainPagemapmenupopupsimpleFieldtabstoolstwoBe Classes button.Buttoncomponent.ComponentcontentBuilder~PagedropdownField.DropdownFieldfield.Fieldform.Formgrid.Gridgrid.GridNewlayout.Layoutmap.Mappopup.PopupsimpleField.SimpleFieldtabs.Tabstabs~Tabtools.AjaxSendertools.BrowserNotificationtools.Freezertools.TokenAuthtools.UnzippertwoBe~Request Source: auth/index.js /** * Модуль для авторизации * @module auth * @requires tools * @requires config */ 'use strict' //подключаем шаблон import tempalate from './auth.tpl'; //подключаем инструменты import * as tools from '../tools/index.js' //подключаем стили import './auth.css'; /** * @classdesc Класс для построения формы авторизации и создания соответсвующих обработчиков */ export default class stpAuth { /** * @constructor * @param {object} options - набор параметров * @param {string} options.place - идентификатор места * @param {string} options.urlAuth - адрес сервера * @param {string} options.version - версия системы * @param {string} options.name - имя системы * @param {string} options.urlGet - адрес для авторизации гугл * @param {string} options.urlGetTokens - адрес для получения токена * @param {string} options.msgGet - сообщение для получения адреса гугл * @param {string} options.msgGetTokens - сообщение для получения токена после гугл авторизации * @param {string} options.authGoogle - нужна ли гугл авторизация * @param {string} options.redirectUrl - куда перенаправлять в случае успешной авторизации */ constructor(options) { //куда поместить this._place = options.place; //адрес this.urlAuth = options.urlAuth; //название системы this.caption = options.caption; //версия системы this.version = options.version; //имя системы this.name = options.name; //адреса и сообщения this.urlGet = options.urlGet; this.urlGetTokens = options.urlGetTokens; this.msgGet = options.msgGet; this.msgGetTokens = options.msgGetTokens; //делать ли гугл авторизацию this.authGoogle = options.authGoogle || false; //постфиксы для дом-элементов this._formPostfix = '_formAuth'; this._freezePostfix = '_signinForm'; //куда перенаправлять в случае успеха this.redirectUrl = options.redirectUrl; //рисуем форму document.getElementById(this._place).innerHTML = tempalate({ caption: this.caption, version: this.version, name: this.name, authGoogle: this.authGoogle, _formPostfix: this._formPostfix, _freezePostfix: this._freezePostfix }); //обработчик нажатия на кнопку войти document.getElementById('authButton').onclick = function () { this._auth(); }.bind(this); //обработчик на энтер в форме пароля document.getElementById('passwordInput').onkeydown = function () { if (event.code === &quot;Enter&quot;) { this._auth(); } }.bind(this); //активируем гугл-авторизацию if (this.authGoogle) { this._setGoogleAuth(); } } /** * Собирает данные с формы и отправляет для авторизации * @private */ _auth() { let msg = this._getAuthData(); let query = new tools.AjaxSender({ url: this.urlAuth, msg: msg, before: function () { $('#' + this.name + this._freezePostfix).block({ css: { border: 'none', padding: '10px', backgroundColor: '#000', '-webkit-border-radius': '10px', '-moz-border-radius': '10px', opacity: .5, color: '#fff' }, message: '&lt;i class=&quot;fa fa-cog fa-spin fa-fw&quot;&gt;&lt;/i&gt; Ищем вас...' }); }.bind(this) }); query.sendQuery() .then( response =&gt; { $('#' + this.name + this._freezePostfix).unblock(); this._saveToken(response.token); this._saveObjInfo(response.info); document.location.href = this.redirectUrl; }, error =&gt; { $('#' + this.name + this._freezePostfix).unblock(); document.getElementById('message').hidden = false; document.getElementById('message').className = 'panel panel-danger'; if (error.code === 401) { document.getElementById('mes_text').innerHTML = &quot;Неверный логин/пароль&quot;; } else { document.getElementById('mes_text').innerHTML = &quot;Сервер недоступен, повторите попытку позже&quot;; } } ) } /** * Получаем данные с формы * @returns string - строка для запроса * @private */ _getAuthData() { let arrForm = $('#' + this.name + this._formPostfix).serializeArray(); let formMsg = $.param(arrForm, true); return (formMsg); } /** * Делает возможной авторизацию с помощью гугл * @private */ _setGoogleAuth() { let authCont = this; let qGetUrl = new tools.AjaxSender({ url: authCont.urlGet, msg: authCont.msgGet }) qGetUrl.sendQuery() .then( response =&gt; { document.getElementById('googleAuth').disabled = false; document.getElementById('googleAuth').onclick = function () { let windowGoogle = window.open(response.url, '_blank', 'toolbar=0,location=0,menubar=0,width=600,height=600'); window.onmessage = function (e) { windowGoogle.close(); var urlWithCode = e.data; var idx = urlWithCode.lastIndexOf(&quot;code=&quot;); var code = urlWithCode.substring(idx + 5).replace(&quot;#&quot;, &quot;&quot;); var qGetTokens = new tools.AjaxSender({ url: authCont.urlGetTokens, msg: authCont.msgGetTokens + '&amp;code=' + code, before: function () { $('#' + this.name + this._freezePostfix).block({ css: { border: 'none', padding: '15px', backgroundColor: '#000', '-webkit-border-radius': '10px', '-moz-border-radius': '10px', opacity: .5, color: '#fff' }, message: '&lt;i class=&quot;fa fa-cog fa-spin fa-fw&quot;&gt;&lt;/i&gt; Ищем вас...' }); }.bind(this) }) qGetTokens.sendQuery() .then( response =&gt; { $('#' + this.name + this._freezePostfix).unblock(); this._saveToken(response.token); this._saveObjInfo(response.info); document.location.href = this.redirectUrl; }, error =&gt; { $('#' + this.name + this._freezePostfix).unblock(); document.getElementById('message').hidden = false; document.getElementById('message').className = 'panel panel-danger'; if (error.code === 401) { document.getElementById('mes_text').innerHTML = &quot;Пользователь не найден&quot;; } else { document.getElementById('mes_text').innerHTML = &quot;Возникла ошибка&quot;; } } ) }.bind(this) }.bind(this) } ); } /** * Сохраняет токен в куки * @param token - что сохранять * @private */ _saveToken(token) { var t = new tools.TokenAuth(this.name); t.addToken(token); } /** * Сохраняем информацию для меню * @param info - информация с сервера * @private */ _saveObjInfo(info) { localStorage[this.name + '_ObjInfo'] = JSON.stringify(info); } } × Search results Close Documentation generated by JSDoc 3.5.3 on 2017-08-11T15:31:46+08:00 using the DocStrap template. "},"auth.js.html":{"id":"auth.js.html","title":"Source: auth.js","body":" Documentation Modules authauthPagebuttoncomponentconfigcontentBuilderdropdownFieldfieldformgridlayoutmainPagemapmenupopupsimpleFieldtabstoolstwoBe Classes button.Buttoncomponent.ComponentcontentBuilder~PagedropdownField.DropdownFieldfield.Fieldform.Formgrid.Gridgrid.GridNewlayout.Layoutmap.Mappopup.PopupsimpleField.SimpleFieldtabs.Tabstabs~Tabtools.AjaxSendertools.BrowserNotificationtools.Freezertools.TokenAuthtools.UnzippertwoBe~Request Source: auth.js /** * Модуль страницы авторизации * @module authPage * @requires config * @requires auth */ //импортируем конфиги и библиотеку авторизации import {config} from './config/config.js'; import stpAuth from './auth/index.js'; //всякие библиотеки import './libraries/bootstrap/css/bootstrap.css'; import './libraries/fontawesome/css/font-awesome.css'; require('imports-loader?jQuery=jquery!./libraries/bootstrap/js/bootstrap.js'); require('imports-loader?jQuery=jquery!./libraries/blockUI/jquery.blockUI.js'); //объект страница авторизации let auth = new stpAuth({ place: 'main', caption: config.caption, name: config.name, version: config.version, urlAuth: config.defaultUrl, urlGet: config.defaultUrl, msgGet: 'type=google&amp;method=geturl', urlGetTokens: config.defaultUrl, msgGetTokens: 'type=google&amp;method=gtokens', authGoogle: config.authGoogle, redirectUrl: config.mainPage }); × Search results Close Documentation generated by JSDoc 3.5.3 on 2017-08-11T15:31:46+08:00 using the DocStrap template. "},"button_index.js.html":{"id":"button_index.js.html","title":"Source: button/index.js","body":" Documentation Modules authauthPagebuttoncomponentconfigcontentBuilderdropdownFieldfieldformgridlayoutmainPagemapmenupopupsimpleFieldtabstoolstwoBe Classes button.Buttoncomponent.ComponentcontentBuilder~PagedropdownField.DropdownFieldfield.Fieldform.Formgrid.Gridgrid.GridNewlayout.Layoutmap.Mappopup.PopupsimpleField.SimpleFieldtabs.Tabstabs~Tabtools.AjaxSendertools.BrowserNotificationtools.Freezertools.TokenAuthtools.UnzippertwoBe~Request Source: button/index.js /** * Модуль для построения кнопки * @module button * @requires component */ import {Component} from '../component'; import template from './template.hbs'; /** * @extends module:component.Component */ export class Button extends Component{ constructor(options){ super(options); this.label = options.element.properties.label || ''; this.controlEl = null; this.caption = options.element.properties.caption || ''; this.icon = options.element.properties.icon || ''; this.style = options.element.properties.style || 'btn btn-default'; this.hidden = options.element.properties.hidden || false; this.enabled = options.element.properties.enabled || true; } /** * Заполняет контейнер html содержимым * @private */ _generateHTML(){ if (!this.box) { this.box = document.createElement('div'); } this.box.style.display = 'inline-block'; this.box.innerHTML = template({ &quot;id&quot; : this.id, &quot;className&quot; : this.style, &quot;caption&quot; : this.caption }); this.controlEl = this.box.querySelector('button'); } initLogic(){ // если до сих пор не определен контейнер box - значит мы работаем с кастомным шаблоном, а в нем по стандарту поле должно быть завернуто в div с [data-component = &quot;button&quot;] if (!this.box) { let button = this.parent.box.querySelector('#' + this.id); if (!button) return; this.controlEl = button; this.box = button.closest('[data-component = &quot;button&quot;]'); } this.addHandlers(); } applyProperties(){ if (this.hidden) { this.hide(); } else { this.show(); } if (this.enabled) { this.enable(); } else { this.disable(); } } ///// Public methods ///// enable() { // при кастомном макете элемент может быть не орпеделен if (!this.controlEl) return; this.controlEl.removeAttribute('disabled'); } disable() { // при кастомном макете элемент может быть не орпеделен if (!this.controlEl) return; this.controlEl.setAttribute('disabled', true); } /** * Генерирует DOM элемент с кнопкой и возвращает его * @returns {object} - DOM элемент с формой */ render(){ this._generateHTML(); return this.box; } } × Search results Close Documentation generated by JSDoc 3.5.3 on 2017-08-11T15:31:46+08:00 using the DocStrap template. "},"component_index.js.html":{"id":"component_index.js.html","title":"Source: component/index.js","body":" Documentation Modules authauthPagebuttoncomponentconfigcontentBuilderdropdownFieldfieldformgridlayoutmainPagemapmenupopupsimpleFieldtabstoolstwoBe Classes button.Buttoncomponent.ComponentcontentBuilder~PagedropdownField.DropdownFieldfield.Fieldform.Formgrid.Gridgrid.GridNewlayout.Layoutmap.Mappopup.PopupsimpleField.SimpleFieldtabs.Tabstabs~Tabtools.AjaxSendertools.BrowserNotificationtools.Freezertools.TokenAuthtools.UnzippertwoBe~Request Source: component/index.js /** * @fileOverview Модуль для построения компонента - абстрактного объекта, часто употребляется понятие формат {@link https://vk.com} * @module component * @requires twoBe */ /** * Делаем библиотеку клиентского кода общедоступной */ import twoBe from '../twoBe/index.js'; window.twoBe = twoBe; /** * @classdesc Класс для построения компонента - абстрактного класса для большинства отображаемых на экране объектов */ export class Component { /** * @constructor * @param {object} options - Набор параметров для построения компонента * @param {DOM} options.box - Куда поместить объект * @param {object} options.parent - Кто родитель этого объекта * @param {object} options.element - Сведения об элементе согласно формату * @param {object} options.code - Код * @param {array} options.content - Контент для элемента * */ constructor(options) { /** * Место для компонента * @member * @type {DOM} */ this.box = options.box || null; /** * Cсылка на родительский элемент * @member * @type {object} */ this.parent = options.parent || null; //в случае пустот options.element = options.element || {}; options.element.properties = options.element.properties || {}; options.element.id = options.element.id || &quot;&quot;; /** * Cобытия элемента, объект с именем события и именем обработчика события * @member * @type {object} */ this.events = options.element.events || null; /** * Объект с именем обработчика события и кодом этого обработчика * @member * @type {object} */ this.code = this.prepareCode(options.code) || {}; /** * Данные компонента * @member * @type {array} */ this.content = options.content || []; /** * Путь к объекту данных * @member * @type {string} */ this.path = options.element.path || ''; /** * Значение для идентификации всех компнентов (опционально) * @member * @type {string} */ this.id = this.path + '-' + options.element.type + (options.element.id !== &quot;&quot; ? '-' + options.element.id : &quot;&quot;); /** * Массив деток, нужен для каскадного обновления * @member * @type {array} */ this.children = []; //записываемся в дети родителю this.recInChildren(); } /** * Записывает объект в дети текущего объекта * @param child - объект */ addChildren(child) { this.children.push(child); } /** * Функция записывает объект в дети к родителю */ recInChildren() { if (this.parent !== null) { this.parent.addChildren(this); } } /** * Выделение записей и внешних ключей из content * @param contentArr - массив контента * @returns {object} - Объект из записей и внешних ключей к ним */ prepareData(contentArr) { let content = {}; contentArr.forEach((item) =&gt; { item.forId.forEach((id) =&gt; { if (id === this.id) { content.records = item.records || []; content.fk = item.fk || {}; } }) }); return content; } eventHandler(event) { let type = event.type; let handlerName = this.events[type]; if (!handlerName) return; let handler = this.code[handlerName]; if (!handler) return; // в качестве параметра передаем сам элемент handler.apply(this, [this]); } addHandlers() { for (let eventName in this.events) { this.box.addEventListener(eventName, this.eventHandler.bind(this)); } } /** * Уничтожает компонент */ destroy() { this.box.innerHTML = ''; delete stpui[this.id]; if (w2ui[this.id] !== undefined) { w2ui[this.id].destroy(); } } /** * Преобразует код из строки * @param {object} oldCode - объект из строковых функций * @returns {object} newCode - объект из функций */ prepareCode(oldCode) { let newCode = {}; for (let funcName in oldCode) { let func = new Function('return ' + oldCode[funcName]); newCode[funcName] = func(); } return newCode; } /** * Активирует событие на элементе * @param eventName * @param data */ trigger(eventName, data) { let customEvent = new CustomEvent(eventName, {detail: data}); this.box.dispatchEvent(customEvent); } /** * Помещает объект в ДОМ */ render() { } /** * Перезагружает компонент */ reload() { } /** * Скрыть элемент со страницы */ hide() { this.box.hidden = true; } /** * Отобразить скрытый элемент на странице */ show() { this.box.hidden = false; } /** * Сделать элемент доступным для редактирования */ enable() { } /** * Сделать элемент недоступным для редактирования */ disable() { } /** * Обновить отображение объекта, нужно для в2уи в процессе скрытия/отображения */ refresh() { } /** * Делает ассоциативный массив * @param array - массив * @param key - ключ * @returns {object} - ассоциативный массив */ makeAsos(array, key) { let res = {}; for (let i in array) { res[array[i][key]] = array[i]; } return res; } /** * Из формата, пришедшего с сервера, добирает нужные поля объекта * @param attributes */ getAttributes(attributes) { } /** * Записывает объект в глобальную переменную * @param id - идентификатор, по умолчанию берется идентификатор объекта */ saveInWindow(id = this.id) { if (window.stpui === undefined) { window.stpui = {}; } window.stpui[id] = this; } /** * Функция для совместимости с мобильным приложением, возвращает сам объект * @returns {Component} */ getProperties() { return this; } } × Search results Close Documentation generated by JSDoc 3.5.3 on 2017-08-11T15:31:46+08:00 using the DocStrap template. "},"config_config.js.html":{"id":"config_config.js.html","title":"Source: config/config.js","body":" Documentation Modules authauthPagebuttoncomponentconfigcontentBuilderdropdownFieldfieldformgridlayoutmainPagemapmenupopupsimpleFieldtabstoolstwoBe Classes button.Buttoncomponent.ComponentcontentBuilder~PagedropdownField.DropdownFieldfield.Fieldform.Formgrid.Gridgrid.GridNewlayout.Layoutmap.Mappopup.PopupsimpleField.SimpleFieldtabs.Tabstabs~Tabtools.AjaxSendertools.BrowserNotificationtools.Freezertools.TokenAuthtools.UnzippertwoBe~Request Source: config/config.js /** * Модуль конфигурации * @module config */ 'use strict' /** * Объект конфига * @type {{name: string, caption: string, defaultUrl: string, version: string, authGoogle: boolean, mainPage: string, testUrl: string}} */ export let config = { name: 'test', caption: 'ИС Того сего', defaultUrl: 'https://gag.groupstp.ru:8809', version: 'not your busy', authGoogle: true, mainPage: 'main.html', testUrl: &quot;http://localhost:12345&quot; } × Search results Close Documentation generated by JSDoc 3.5.3 on 2017-08-11T15:31:46+08:00 using the DocStrap template. "},"contentBuilder_index.js.html":{"id":"contentBuilder_index.js.html","title":"Source: contentBuilder/index.js","body":" Documentation Modules authauthPagebuttoncomponentconfigcontentBuilderdropdownFieldfieldformgridlayoutmainPagemapmenupopupsimpleFieldtabstoolstwoBe Classes button.Buttoncomponent.ComponentcontentBuilder~PagedropdownField.DropdownFieldfield.Fieldform.Formgrid.Gridgrid.GridNewlayout.Layoutmap.Mappopup.PopupsimpleField.SimpleFieldtabs.Tabstabs~Tabtools.AjaxSendertools.BrowserNotificationtools.Freezertools.TokenAuthtools.UnzippertwoBe~Request Source: contentBuilder/index.js /** * Модуль для построения объекта-контейнера страниц * @module contentBuilder * @requires tools * @requires component * @requires layout * @requires config */ import * as componentLib from '../component'; import * as tools from '../tools/index.js'; //подключаем конфиг import {config} from '../config/config.js'; let layout = require('../layout/index.js'); /** * @classdesc Данный класс представляет собой реализацию скелета одностраничного приложения * @extends module:component.Component */ export default class contentBuilder extends componentLib.Component { /** * @constructor * @param {object} options - Набор параметров для построения компонента * @param {DOM} options.box - Куда поместить объект * @param {object} options.parent - Кто родитель этого объекта * @param {object} options.element - Сведения об элементе согласно формату * @param {object} options.code - Код * @param {array} options.content - Контент для элемента * @param param.onHome - действие при нажатии кнопки домой остальные */ constructor(param) { super(param); this.pageContainer = ''; //какая страница открыта на данный момент this.current = -1; this.pages = [];//массив страниц this.onHome = param.onHome || null;//что делать при нажатии кнопки домой this.render(); } /** * Размещает на странице тулбар и контейнер для страниц */ render() { let pageNavigator = document.createElement('div'); pageNavigator.id = 'pageNavigator'; pageNavigator.style.marginBottom = '5px'; this.box.appendChild(pageNavigator); let pageContainer = document.createElement('div'); pageContainer.id = 'pageContainer'; this.box.appendChild(pageContainer); this.pageContainer = pageContainer; this.buildNavigatorToolbar(pageNavigator); } /** * Функция выполняет построение тулбара * @param {DOM} place - куда поместить */ buildNavigatorToolbar(place) { $(place).w2toolbar({ name: 'navigatorToolbar', items: [ {type: 'button', id: 'buttonNavigatorBack', tooltip: 'Back', icon: 'fa fa-arrow-left', disabled: true}, {type: 'button', id: 'buttonNavigatorStr', tooltip: 'Up', icon: 'fa fa-arrow-right', disabled: true}, {type: 'button', id: 'buttonNavigatorHome', tooltip: 'Home', icon: 'fa fa-home', disabled: true}, { type: 'button', id: 'buttonNavigatorReload', tooltip: 'Reload', icon: 'fa fa-refresh', disabled: false }, {type: 'break'}, {type: 'html', id: 'navigatorLabel', html: '&lt;b&gt;&lt;h3&gt;Главная страница&lt;/h3&gt;&lt;/b&gt;'}, {type: 'spacer'} ], onClick: function (event) { if (event.item.id === 'buttonNavigatorBack') { this.current--; this.pages[this.current + 1].hide(); this.pages[this.current].show(); w2ui.navigatorToolbar.set('navigatorLabel', {html: '&lt;b&gt;&lt;h3&gt;' + this.pages[this.current].caption + '&lt;/h3&gt;&lt;/b&gt;'}); if (this.current === 0) { w2ui.navigatorToolbar.set('buttonNavigatorBack', {disabled: true}); w2ui.navigatorToolbar.render(); } w2ui.navigatorToolbar.set('buttonNavigatorStr', {disabled: false}); w2ui.navigatorToolbar.set('buttonNavigatorHome', {disabled: false}); w2ui.navigatorToolbar.render(); this.refresh(); } if (event.item.id === 'buttonNavigatorStr') { this.current++; this.pages[this.current - 1].hide(); this.pages[this.current].show(); w2ui.navigatorToolbar.set('navigatorLabel', {html: '&lt;b&gt;&lt;h3&gt;' + this.pages[this.current].caption + '&lt;/h3&gt;&lt;/b&gt;'}); if (this.current === this.pages.length - 1) { w2ui.navigatorToolbar.set('buttonNavigatorStr', {disabled: true}); w2ui.navigatorToolbar.render(); } w2ui.navigatorToolbar.set('buttonNavigatorBack', {disabled: false}); w2ui.navigatorToolbar.set('buttonNavigatorHome', {disabled: false}); w2ui.navigatorToolbar.render(); this.refresh(); } if (event.item.id === 'buttonNavigatorHome') { if (this.onHome !== null) { this.onHome(this); w2ui.navigatorToolbar.set('buttonNavigatorHome', {disabled: true}); } } if (event.item.id === 'buttonNavigatorReload') { this.pages[this.current].reload(); } }.bind(this) }); } /** * Выполняет обновление текущей страницы */ refresh() { if (this.pages[this.current] !== undefined) this.pages[this.current].refresh(); } /** * Показывает страниу * @param id - идентифкатор страницы(возможно это наш path) * @param caption - подпись * @returns{Page} */ showPage(id, caption) { //меняем подпись вверху w2ui.navigatorToolbar.set('navigatorLabel', {html: '&lt;b&gt;&lt;h3&gt;' + caption + '&lt;/h3&gt;&lt;/b&gt;'}); w2ui.navigatorToolbar.refresh(); //подгоняем стили this.pageContainer.style.height = document.documentElement.clientHeight - 115 + 'px'; this.pageContainer.style.marginBottom = '15px'; let uniq = true; this.current++; if (this.current &gt; 0) { //скрываем предыдущую this.pages[this.current - 1].hide(); w2ui.navigatorToolbar.set('buttonNavigatorBack', {disabled: false}); w2ui.navigatorToolbar.set('buttonNavigatorHome', {disabled: false}); w2ui.navigatorToolbar.render(); } if (this.pages.length &gt;= 0) { //убираем повторы for (let i in this.pages) { if (this.pages[i].id === id) { if (i &lt;= this.current - 1) uniq = false; //удаляем страницу this.pages[i].destroy(); //удаляем ее из массива this.pages.splice(i, 1); break; } } } if (!uniq) --this.current; let page = new Page(id, caption, this.pageContainer); this.pages.splice(this.current, 0, page); return page; } } /** * @classdesc Класс страницы в рамках одностраничного приложения */ class Page { /** * @constructor * @param path - идентификатор страницы * @param caption - подпись к странице * @param box - куда поместить */ constructor(path, caption, box) { /** * Идентифкатор * @member * @type {string} */ this.id = path; /** * Подпись * @member * @type {string} */ this.caption = caption; /** * Куда поместить страницу * @member * @type {DOM} */ this.box = box; /** * Сгенерированный блок страницы * @member * @type {DOM} */ this.generatedBox = ''; /** * Дети страницы * @member * @type {array} */ this.children = []; this.render(); } /** * Записать в дети * @param {object} child */ addChildren(child) { this.children.push(child); } /** * Уничтожить страницу */ destroy() { this.generatedBox.parentNode.removeChild(this.generatedBox); } /** * Очистить страницу */ clear() { this.generatedBox.innerHTML = 'Перезагрузка'; for (let i in this.children) { this.children[i].destroy(); } } /** * Перезагрузить страницу */ reload() { let path = this.id; this.clear(); this.load(); } /** * Обновить страницу */ refresh() { for (let i in this.children) { this.children[i].refresh(); } } /** * Получить блок страницы */ render() { let boxForElement = document.createElement('div'); boxForElement.id = 'boxForLayout' + this.id; boxForElement.style.height = '100%'; this.box.appendChild(boxForElement); this.generatedBox = boxForElement; } /** * Показать страницу */ show() { document.getElementById('boxForLayout' + this.id).style.display = ''; } /** * Скрыть страницу */ hide() { document.getElementById('boxForLayout' + this.id).style.display = 'none'; } /** * Функция загружает страницу */ load() { let locker = new tools.Freezer({ place: this.generatedBox, message: 'Загрузка' }); let mainQuery = new tools.AjaxSender({ url: config.testUrl, msg: JSON.stringify({ action: 'get', path: this.id, data: { type: 'listForm' } }), before: function () { locker.lock(); }.bind(this) }); mainQuery.sendQuery() .then( response =&gt; { locker.unlock(); new layout.Layout({ box: this.generatedBox, element: response.elements[0], content: response.content, code: response.code, parent: this } ); }, error =&gt; { locker.unlock(); this.generatedBox.innerHTML = '&lt;h1&gt;Получение данных окончилось неудачей!&lt;/h1&gt;' w2alert(error); } ) } } × Search results Close Documentation generated by JSDoc 3.5.3 on 2017-08-11T15:31:46+08:00 using the DocStrap template. "},"dropdownField_index.js.html":{"id":"dropdownField_index.js.html","title":"Source: dropdownField/index.js","body":" Documentation Modules authauthPagebuttoncomponentconfigcontentBuilderdropdownFieldfieldformgridlayoutmainPagemapmenupopupsimpleFieldtabstoolstwoBe Classes button.Buttoncomponent.ComponentcontentBuilder~PagedropdownField.DropdownFieldfield.Fieldform.Formgrid.Gridgrid.GridNewlayout.Layoutmap.Mappopup.PopupsimpleField.SimpleFieldtabs.Tabstabs~Tabtools.AjaxSendertools.BrowserNotificationtools.Freezertools.TokenAuthtools.UnzippertwoBe~Request Source: dropdownField/index.js /** * Модуль для выпадающих список * @module dropdownField * @requires tools */ import {Field} from &quot;../field&quot;; import {AjaxSender} from '../tools/index.js'; //подключаем библиотеку и экспортируем переменные из нее const magiclib = require('imports-loader?jQuery=jquery!../libraries/magicsuggest/magicsuggest.js'); //подключаем стили import '../libraries/magicsuggest/magicsuggest.css'; /** * @extends module:component.Component */ export class DropdownField extends Field { constructor(options) { super(options); this.type = options.element.properties.type || 'reference'; // количество элементов, которые могут быть выбраны this.maxSelection = options.element.properties.maxSelection || 1; this.value = []; // объект magicSuggest, так как проще большинство действий совершать через него, а не через controlEl this.magicObj = null; } ///// Private methods ///// initLogic() { super.initLogic(); this._applyMagicSuggest(); this.applyProperties(); this._addListeners(); } _applyMagicSuggest() { this.magicObj = $(this.controlEl).magicSuggest({ //&quot;style&quot; : &quot;width : 50% !important; display : inline-block&quot; &quot;allowFreeEntries&quot;: false, &quot;editable&quot;: true, &quot;maxSelection&quot;: this.maxSelection, }); } _saveChanges(value) { this.value = value; } _addListeners() { if (!this.magicObj) return; $(this.magicObj).on('selectionchange', (e, ms, records) =&gt; { this._saveChanges(records); this.trigger('changeValue'); }); $(this.magicObj).on('focus', () =&gt; { this.trigger('focus'); }); $(this.magicObj).on('keyup', (e, magic, v) =&gt; { let newValue = this.magicObj.getRawValue(); //различные системные кнопки, клики которых не надо обрабатывать let forbiddenKeyCodes = [13, 16, 17, 18, 19, 20, 27, 33, 34, 35, 36, 37, 38, 39, 40, 44, 45, 46, 91, 93, 144, 145]; if (forbiddenKeyCodes.indexOf(v.keyCode) !== -1) { return; } else if (newValue) { this.getListDataFromServer(this.magicObj.getRawValue()); } else { this.clearListData(); } }); } ///// Public methods ///// enable() { // вызываем родительский метод чтобы активировать кнопки super.enable(); // + своя логика if (this.magicObj) { this.magicObj.enable(); } } disable() { // вызываем родительский метод чтобы активировать кнопки super.disable(); // + своя логика if (this.magicObj) { this.magicObj.disable(); } } getValue() { return this.value; } setValue(newValue) { if (newValue.length) { this.value = []; newValue.forEach((item) =&gt; { this.value.push(newValue); }); this.magicObj.setSelection(newValue); } } /** * Получить значения выпадающего списка * @returns {array} */ getListData() { return this.magicObj.getData(); } /** * Установить значения выпадающего списка * @param {array} data */ setListData(data) { this.magicObj.setData(data); } clearListData(data) { this.setListData([]); } /** * Метод отправляет запрос на сервер за порцией данных, подходящей под введенный текст */ getListDataFromServer(text) { let request = new AjaxSender({ url: 'http://localhost:1234/api', msg: JSON.stringify({ &quot;method&quot;: &quot;getSuggestion&quot;, &quot;obj&quot;: this.object, &quot;name&quot;: this.name, &quot;id&quot;: this.id, &quot;text&quot;: text }) }); let requestPromise = request.sendQuery(); requestPromise.then(result =&gt; { let suggestion = prepareDataForList.call(this, result); this.setListData(suggestion); }) .catch(err =&gt; { console.log(err); }); /** * Подготавливаем данные в формат {&quot;id&quot;: '',&quot;name&quot; : ''} */ function prepareDataForList(data) { let result = []; // делаем в попытке, потому что мало ли что нам придет в data try { let values = data.content[0].fk[this.id]; if (values) { let ids = Object.keys(values); ids.forEach((id) =&gt; { result.push({ &quot;id&quot; : id, &quot;name&quot; : values[id] }); }); } } catch (err) { console.log(err); } return result; } } } × Search results Close Documentation generated by JSDoc 3.5.3 on 2017-08-11T15:31:46+08:00 using the DocStrap template. "},"field_index.js.html":{"id":"field_index.js.html","title":"Source: field/index.js","body":" Documentation Modules authauthPagebuttoncomponentconfigcontentBuilderdropdownFieldfieldformgridlayoutmainPagemapmenupopupsimpleFieldtabstoolstwoBe Classes button.Buttoncomponent.ComponentcontentBuilder~PagedropdownField.DropdownFieldfield.Fieldform.Formgrid.Gridgrid.GridNewlayout.Layoutmap.Mappopup.PopupsimpleField.SimpleFieldtabs.Tabstabs~Tabtools.AjaxSendertools.BrowserNotificationtools.Freezertools.TokenAuthtools.UnzippertwoBe~Request Source: field/index.js /** * Модуль для построения field * @module field * @requires button * @requires component */ import {Component} from '../component'; import {Button} from '../button'; import template from './template.hbs' /** * @extends module:component.Component */ export class Field extends Component { constructor(options) { super(options); this.name = options.element.properties.name || this.id; // DOM-объект контролирующего элемента (input или textarea) this.controlEl = null; // кнопки относящиеся именно к этому полю this.buttons = []; this.label = options.element.properties.label || ''; this.type = options.element.properties.type; // при true используем textarea this.multiline = options.element.properties.multiline || false; this.hidden = options.element.properties.hidden || false; this.enabled = options.element.properties.enabled || true; this.required = options.element.properties.required || false; this._initField(options.element.elements); } ///// Private methods ///// /** * Инициализация поля, поиск кнопок * @private */ _initField(elements = []) { extractElements.call(this, elements); function extractElements(elements) { elements.forEach((el) =&gt; { searchForFormElements.call(this, el); }); } function searchForFormElements(el) { let type = el.type; switch (type) { case 'button' : this.buttons.push(new Button({ &quot;element&quot;: el, &quot;code&quot;: this.prepareCode(this.code), &quot;parent&quot;: this })); break; } } } /** * Заполняет контейнер html содержимым * @private */ _generateHTML() { if (!this.box) { this.box = document.createElement('div'); } let requiredMark = (this.required) ? '&lt;sup style=&quot;color:red; margin-left: 4px&quot;&gt;*&lt;/sup&gt;' : ''; // TODO переделать для checkbox'ов и radio кнопок this.box.innerHTML = template({ &quot;label&quot;: this.label, &quot;requiredMark&quot;: requiredMark, &quot;id&quot;: this.id, &quot;name&quot;: this.name, &quot;multiline&quot;: this.multiline, &quot;checkbox&quot;: (this.type === 'checkbox') ? true : false }); if (this.multiline) { this.controlEl = this.box.querySelector('textarea'); } else { this.controlEl = this.box.querySelector('input'); } this._renderButtons(); } /** * Рисуем кнопки * @private */ _renderButtons() { let btnsWrapper = this.box.querySelector('.field-btns-wrapper'); if (!btnsWrapper) return; this.buttons.forEach((btn) =&gt; { btnsWrapper.appendChild(btn.render()); btn.initLogic(); }); } /** * Метод определяет обязательное ли это поле * @returns {boolean} */ isRequired() { if (this.required) { return true; } else { return false; } } /** * Окрашиваем поле в зеленный цвет(успешная валидация) */ showSuccess() { this.removeNotifications(); this.box.classList.add('has-success'); } /** * Окрашиваем поле в красный цвет(неуспешная валидация) */ showError() { this.removeNotifications(); this.box.classList.add('has-error'); } /** * Убираем любое окрашивание */ removeNotifications() { this.box.classList.remove('has-success'); this.box.classList.remove('has-error'); } initLogic() { // если до сих пор не определен контейнер box - значит мы работаем с кастомным шаблоном, а в нем по стандарту поле должно быть завернуто в div с [data-component = &quot;field&quot;] if (!this.box) { let input = this.parent.box.querySelector('#' + this.id); this.controlEl = input; this.box = input.closest('[data-component = &quot;field&quot;]'); } this.buttons.forEach((btn) =&gt; { btn.initLogic(); }); this.addHandlers(); } applyProperties() { if (this.hidden) { this.hide(); } else { this.show(); } if (this.enabled) { this.enable(); } else { this.disable(); } } ///// Public methods ///// enable() { this.buttons.forEach((btn) =&gt; { btn.enable(); }); } disable() { this.buttons.forEach((btn) =&gt; { btn.disable(); }); } setValue(newValue) { } getValue() { } /** * Генерирует DOM элемент с полем и возвращает его * @returns {object} - DOM элемент с формой */ render() { this._generateHTML(); return this.box; } } × Search results Close Documentation generated by JSDoc 3.5.3 on 2017-08-11T15:31:46+08:00 using the DocStrap template. "},"form_index.js.html":{"id":"form_index.js.html","title":"Source: form/index.js","body":" Documentation Modules authauthPagebuttoncomponentconfigcontentBuilderdropdownFieldfieldformgridlayoutmainPagemapmenupopupsimpleFieldtabstoolstwoBe Classes button.Buttoncomponent.ComponentcontentBuilder~PagedropdownField.DropdownFieldfield.Fieldform.Formgrid.Gridgrid.GridNewlayout.Layoutmap.Mappopup.PopupsimpleField.SimpleFieldtabs.Tabstabs~Tabtools.AjaxSendertools.BrowserNotificationtools.Freezertools.TokenAuthtools.UnzippertwoBe~Request Source: form/index.js /** * Модуль для построения форм * @module form * @requires simpleField * @requires button * @requires dropdownField * @requires component */ import {Component} from '../component'; import {SimpleField} from '../simpleField'; import {DropdownField} from '../dropdownField'; import {Button} from '../button'; import template from './template.hbs'; /** * @extends module:component.Component */ export class Form extends Component { constructor(options) { super(options); // флаг того что форма уже сформирована this.rendered = false; this.template = options.element.properties.template || false; // поля формы this.fields = []; // кнопки формы, но не кнопки относящиеся конкретно к полям this.buttons = []; // данные полей и внешние ключи this.data = this.prepareData(options.content); this.object = &quot;&quot;; this.name = &quot;&quot;; this._initForm(options.element.elements); this.saveInWindow(); this.getAttributes(options.element); } getAttributes(attributes) { this.object = attributes.properties.object; this.name = attributes.properties.name; } ////////// Private methods ////////// /** * Инициализация формы, выделение колонок и кнопок из elements * @private */ _initForm(elements = []) { extractElements.call(this, elements); function extractElements(elements) { elements.forEach((el) =&gt; { searchForFormElements.call(this, el); }); } function searchForFormElements(el) { let type = el.type; switch (type) { case 'field' : this.fields.push(new SimpleField({ &quot;element&quot;: el, &quot;code&quot;: this.prepareCode(this.code), &quot;parent&quot;: this })); break; case 'dropList' : this.fields.push(new DropdownField({ &quot;element&quot;: el, &quot;code&quot;: this.prepareCode(this.code), &quot;parent&quot;: this })); break; case 'button' : this.buttons.push(new Button({ &quot;element&quot;: el, &quot;code&quot;: this.prepareCode(this.code), &quot;parent&quot;: this })); break; } } } _loadData() { let records = this.data.records; let fk = this.data.fk; // заполнить значения полей if (records &amp;&amp; records.length) { // должна придти только 1 строка let record = records[0]; for (let fieldName in record) { let field = this.getField(fieldName); if (field) { // если значение есть, то нужно его использовать, возможно эта форма рендерится повторно if (this.rendered) { field.setValue(field.value); } else { // загружаем то, что пришло с сервера // если это ссылочный тип, то нужно взять значение для отображения из this.data.fk if (this._itsForeignKeyField(fieldName)) { // для ссылочного типа может быть массив значений // TODO let arrOfValues = createArrOfValues(this.data.fk[fieldName], record[fieldName]); field.setValue(arrOfValues); } else { field.setValue(record[fieldName]); } } } } } // заполнить списки выбора if (fk) { for (let fieldName in fk) { let field = this.getField(fieldName); if (field) { let arrOfValues = createArrOfValues(fk[fieldName]); // задаем значения и для списка выбора field.setListData(arrOfValues); } } } /** * Функция возвращает массив объектов для загрузки в список выбора или в виде значения поля * @param values {object} - значения внешних ключей, id и value * @param ids {array} - id внешних ключей для которых нужно получить значения из fk * @returns {Array} */ function createArrOfValues(values, ids) { let resultArr = []; // задаем значения списка выбора if (arguments.length === 1) { for (let key in values) { resultArr.push({ &quot;id&quot;: key, &quot;name&quot;: values[key] }); } } else if (arguments.length === 2) { // задаем значение поля ids.forEach((id) =&gt; { let fkValue = values[id]; if (fkValue !== undefined) { resultArr.push({ &quot;id&quot;: id, &quot;name&quot;: fkValue }); } }); } return resultArr; } } /** * Проверяем поле на ссылочный тип * @private */ _itsForeignKeyField(fieldName) { return this.data.fk[fieldName]; } /** * Заполняет контейнер html содержимым (используется стандартный макет) * @private */ _generateHtml() { if (!this.box) { this.box = document.createElement('div'); } if (this.template) { // кастомный шаблон this.box.innerHTML = document.querySelector(&quot;#&quot; + this.template).innerHTML; } else { // стандартный шаблон this.box.innerHTML = template(); renderFields.call(this); renderButtons.call(this); } function renderFields() { let fieldsWrapper = this.box.querySelector('.fields-wrapper'); this.fields.forEach((field) =&gt; { fieldsWrapper.appendChild(field.render()); }); } function renderButtons() { let btnsWrapper = this.box.querySelector('.form-btns-wrapper'); this.buttons.forEach((btn) =&gt; { btnsWrapper.appendChild(btn.render()); }); } } _setupLogic() { this.fields.forEach((field) =&gt; { field.initLogic(); }); this.buttons.forEach((btn) =&gt; { btn.initLogic(); }); } /** * Валидация всех полей формы * @returns {array} || false */ validate() { let result = []; let errors = false; this.fields.forEach((field) =&gt; { let value = field.getValue(); // если получили массив, значит имеем дело с dropList и нас интересует его свойство id if (typeof value === 'object') { if (value.length) { value = value[0].id; } else { value = ''; } } result.push({ &quot;name&quot;: field.name, &quot;value&quot;: value }); if (field.isRequired()) { if (value === '') { field.showError(); errors = true; } else { field.showSuccess(); } } }); return (errors) ? null : result; } /** * Функция воозвращает данные в формате queryString */ getData() { let formData = this.validate(); if (!formData) { return null; } else { let modifiedArr = formData.map((item) =&gt; { return item.name + '=' + item.value; }); return modifiedArr.join('&amp;'); } } /** * Выделение записей и внешних ключей из content * @param contentArr * @returns {{}} * @private */ // _prepareData(contentArr) { // // let content = {}; // // contentArr.forEach((item) =&gt; { // if (item.forId === this.id) { // content.records = item.records || []; // content.fk = item.fk || {}; // } // // }); // // return content; // // } ////////// Public methods ////////// /** * Получить field по имени * @param name */ getField(name) { let result = null; this.fields.forEach((field) =&gt; { if (field.name === name) { result = field; } }); return result; } /** * Генерирует DOM элемент с формой и возвращает его * @returns {object} - DOM элемент с формой */ render() { // если форма уже формировалась, то заного генерировать html и задавать логику не нужно if (!this.rendered) { // генерируем html this._generateHtml(); // устанавливаем логику полей и кнопок this._setupLogic(); } // загружаем данные которые пришли с сервера, либо обновляем из значений которые уже есть в fields this._loadData(); this.addHandlers(); // вызываем событие &quot;rendered&quot; this.trigger('rendered'); // ставим флаг, чтобы при повторном render'e брать данные уже с формы this.rendered = true; return this.box; } } × Search results Close Documentation generated by JSDoc 3.5.3 on 2017-08-11T15:31:46+08:00 using the DocStrap template. "},"grid_grid.js.html":{"id":"grid_grid.js.html","title":"Source: grid/grid.js","body":" Documentation Modules authauthPagebuttoncomponentconfigcontentBuilderdropdownFieldfieldformgridlayoutmainPagemapmenupopupsimpleFieldtabstoolstwoBe Classes button.Buttoncomponent.ComponentcontentBuilder~PagedropdownField.DropdownFieldfield.Fieldform.Formgrid.Gridgrid.GridNewlayout.Layoutmap.Mappopup.PopupsimpleField.SimpleFieldtabs.Tabstabs~Tabtools.AjaxSendertools.BrowserNotificationtools.Freezertools.TokenAuthtools.UnzippertwoBe~Request Source: grid/grid.js /** * Модуль для построения таблиц * @module grid * @requires tools * @requires component */ import * as tools from '../tools/index.js'; import * as component from '../component' /** * @classdesc Класс представляет собой компонент таблицы * @extends module:component.Component */ export class Grid extends component.Component { constructor(params) { super(params); /** * Пагинация * @member * @type {boolean} */ this.pagination = false; /** * Иерархия * @member * @type {boolean} */ this.hierachy = false; /** * Лимит подгружения * @member * @type {boolean} */ this.limit = false; /** * Заголовок таблицы * @member * @type {string} */ this.header = &quot;&quot;; /** * Колонки таблицы в сыром виде * @member * @type {array} */ this.columnsRaw = []; /** * Тулбар таблицы * @member * @type {object} */ this.toolbar = {}; /** * Cтроки таблицы до поиска * @member * @type {array} */ this.recordsBS = []; /** * Строки таблицы из формата * @member * @type {object} */ this.recordsRaw = {};//строки таблицы из формата /** * Внешние ключи * @member * @type {array} */ this.fk = []; /** * Кнопки таблицы * @member * @type {object} */ this.btns = {}; /** * Массив обработчиков событий таблицы * @member * @type {object} */ this.handlers = {}; /** * Колонки по которым группируются записи * @member * @type {array} */ this.groupedBy = []; /** * Колонка в которую выводится результат группировки * @member * @type {string} */ this.showGroupCol = ''; this.saveInWindow(); this.getAttributes(params.element); this.render(); } getAttributes(attributes) { this.pagination = attributes.properties.pagination || false;//пагинация this.hierachy = attributes.properties.hierachy || false;//иерархия this.limit = attributes.properties.limit; this.header = attributes.properties.header || &quot;&quot;; for (let i in attributes.elements) { if (attributes.elements[i].type === 'column') { this.columnsRaw.push(attributes.elements[i].properties); } if (attributes.elements[i].type === 'toolbar') { //описание кнопок таблицы из формата this.toolbar = attributes.elements[i]; } } this.columnsRaw = this.makeAsos(this.columnsRaw, 'field'); let prepContent = this.prepareData(this.content); this.recordsRaw = this.makeAsos(prepContent.records, 'ID'); this.fk = prepContent.fk; this.setButtons(); this.setHandlers(); } /** * Размещает таблицу на странице * @param place - дом-объект * @private */ render(place) { if (w2ui[this.id] !== undefined) { w2ui[this.id].destroy(); } let objForW2 = this.makew2uiobject(); if (place === undefined) { $(this.box).w2grid(objForW2); } else { $(place).w2grid(objForW2); } w2ui[this.id].refresh(); } refresh() { w2ui[this.id].refresh(); for (var i in this.children) { this.children[i].refresh(); } } /** * Функция выделяет запись в таблице * @param id - идентификатор * @param scroll - нужно ли сделать наведение фокуса */ selectRecord(id, scroll = true) { for (var i in w2ui[this.id].records) w2ui[this.id].unselect(w2ui[this.id].records[i].recid) if (!this.hierachy &amp;&amp; this.groupedBy.length === 0) { w2ui[this.id].select(id); } if (this.groupedBy.length &gt; 0) { this.selectInTree(id); } if (scroll) { w2ui[this.id].scrollIntoView(); } } /** * Функция выполняет добавление записи в таблицу * @param data - данные с сервера при добавлении */ addRecord(data) { let ID = data.content[0].records[0]['ID']; let recordRaw = this.makeAsos(data.content[0].records, 'ID'); let fk = data.content[0].fk; //добавление для справочника без иерархии if (!this.hierachy &amp;&amp; this.groupedBy.length === 0) { //записываем в поля объекта $.extend(this.recordsRaw, recordRaw); $.extend(true, this.fk, fk); //преобразуем запись let record = this.makeRecords(recordRaw, fk)[0]; w2ui[this.id].add(record); //делаем выделение записи this.selectRecord(ID); } //добавление в сгуппированные данные if (this.groupedBy.length &gt; 0) { //записываем в поля объекта $.extend(this.recordsRaw, recordRaw); $.extend(true, this.fk, fk); //групируем по-новой let groupedRecs = this.groupBy(this.recordsRaw, this.columnsRaw, this.groupedBy, this.showGroupCol); w2ui[this.id].clear(); w2ui[this.id].records = groupedRecs; w2ui[this.id].refresh(); //делаем выделение записи this.selectInTree(ID); } //добавление в подгружаемую иерархию if (this.hierachy &amp;&amp; this.pagination &amp;&amp; this.groupedBy.length === 0) { let recordRawWithoutKey = recordRaw[Object.keys(recordRaw)[0]]; let record = this.makeRecords(recordRaw, fk)[0]; //можем ли отобразить новую запись if (this.selectInTree(recordRawWithoutKey.parentID, false, false)) { if (w2ui[this.id].get(recordRawWithoutKey.parentID).w2ui !== undefined &amp;&amp; w2ui[this.id].get(recordRawWithoutKey.parentID).w2ui.children !== undefined &amp;&amp; w2ui[this.id].get(recordRawWithoutKey.parentID).w2ui.children[0].recid !== 'treeFake') { //записываем в поля объекта $.extend(this.recordsRaw, recordRaw); $.extend(true, this.fk, fk); //формируем запись для добавления record.w2ui = { children: [], parent_recid: recordRawWithoutKey.parentID } //разворачиваем дерево this.selectInTree(recordRawWithoutKey.parentID, true, false); let children = w2ui[this.id].get(recordRawWithoutKey.parentID).w2ui.children; children.push(record); w2ui[this.id].set(recordRawWithoutKey.parentID, {w2ui: {children: children}}); //для обновления категории w2ui[this.id].toggle(recordRawWithoutKey.parentID); w2ui[this.id].toggle(recordRawWithoutKey.parentID); //подсвечиваем добавленную запись this.selectInTree(ID); } else { //что-нибудь написать } } else { //что-нибудь написать } } } /** * Функция удаляет данные * @param id - идентифкатор записи */ deleteRecords(id) { if (typeof (id) === 'object') { for (let i in id) { this.deleteRecords(id[i]); } } else { this.selectInTree(id, true, false); let record = w2ui[this.id].get(id); if (record !== null) { if (record.w2ui === undefined) { w2ui[this.id].unselect(id); w2ui[this.id].remove(id); } else { if (record.w2ui.parent_recid !== undefined) { var parent_recid = record.w2ui.parent_recid; var parent_record = w2ui[this.id].get(parent_recid); for (var i in parent_record.w2ui.children) { if (parent_record.w2ui.children[i].recid === id) { w2ui[this.id].unselect(id); w2ui[this.id].remove(id); parent_record.w2ui.children.splice(i, 1); w2ui[this.id].refresh(); } } } else { w2ui[this.id].unselect(id); w2ui[this.id].remove(id); } } } } } /** * Функция выполняет изменение записи в таблице * @param data - данные с сервера */ updateRecord(data) { let ID = data.content[0].records[0]['ID']; this.deleteRecords(ID); this.addRecord(data); } /** * Преобразует формат в массив кнопок таблицы */ setButtons() { //преобразуем приходящий код //this.code = this.prepareCode(this.code); for (let i in this.toolbar.elements) { this.btns[this.toolbar.elements[i].id] = this.toolbar.elements[i].properties; this.btns[this.toolbar.elements[i].id].id = this.toolbar.elements[i].id; //обработчики нажатий на кнопку this.btns[this.toolbar.elements[i].id].onClick = function (element) { try { this.code[this.toolbar.elements[i].events.onClick].call(this, element); } catch (err) { console.log('SERVER CODE ERROR:' + err); w2alert('Серевер вернул некорректное действие!'); } }.bind(this) } } /** * Фризит таблицу * @param msg - выводимое сообщение */ lock(msg = '') { w2ui[this.id].lock(msg, true); } /** * Размораживает таблицу */ unlock() { w2ui[this.id].unlock(); } /** * Делaем тулбар * @returns {{items: Array, onClick: (function(this:Grid))}} */ makeToolbar() { let tlb = { items: [], onClick: function (event) { if (event.subItem === undefined) { if (this.btns[event.item.id] !== undefined) { try { this.btns[event.item.id].onClick.call(this, this); } catch (err) { console.log('SERVER CODE ERROR:' + err); w2alert('Серевер вернул некорректное действие!'); } } } else { if (this.btns[event.subItem.id] !== undefined) { try { this.btns[event.subItem.id].onClick.call(this, this); } catch (err) { console.log('SERVER CODE ERROR:' + err); w2alert('Серевер вернул некорректное действие!'); } } } }.bind(this) }; for (let name in this.btns) { if (name === 'refreshGrid') { continue; } if (!this.btns[name].more) tlb.items.push({ type: 'button', id: this.btns[name].id, icon: this.btns[name].icon, text: this.btns[name].caption, disabled: (this.btns[name].needOnceSelected || this.btns[name].needSelected ? true : false) }) } let menuItems = []; for (let name in this.btns) { if (this.btns[name].more) menuItems.push({ type: 'button', id: this.btns[name].id, icon: this.btns[name].icon, text: this.btns[name].caption, disabled: (this.btns[name].needOnceSelected || this.btns[name].needSelected ? true : false) }) } if (menuItems.length &gt; 0) { tlb.items.push({ type: 'menu', id: 'moreMenu', text: 'Ещё', items: menuItems }); } console.log(tlb); return tlb; } /** * Получает идентификатор выделенной записи * @returns {} */ getSelectedID() { return (w2ui[this.id].getSelection()[0] || null); } /** * Получает идентификаторы выделенных записей * @returns {} */ getSelectedIDs() { return (w2ui[this.id].getSelection()[0] === null ? null : w2ui[this.id].getSelection()) } /** * Делаем контекстное меню * @returns {{items: Array, onClick: (function(this:grid))}} * @private */ makeMenu() { let pkm = { items: [], onClick: function (event) { console.log(event); if (this.btns[event.menuItem.id] !== undefined) try { this.btns[event.menuItem.id].onClick.call(this, this); } catch (err) { console.log('SERVER CODE ERROR:' + err); w2alert('Серевер вернул некорректное действие!'); } }.bind(this) }; for (let name in this.btns) { pkm.items.push({ type: 'button', id: this.btns[name].id, icon: this.btns[name].icon, text: this.btns[name].caption }) } return pkm; } /** * Делаем объект для в2уи * @returns {{name: *, show: {toolbar: boolean, footer: boolean}, recid: string, columns: Array, records: Array, toolbar: {items: Array, onClick: (function(this:grid))}, onMenuClick: (function()), menu: Array}} * @private */ makew2uiobject() { let obj = { name: this.id, autoLoad: (this.pagination ? 'auto' : false), header: this.header, url: (this.pagination &amp;&amp; !this.hierachy ? &quot; &quot; : &quot;&quot;), limit: (this.pagination &amp;&amp; !this.hierachy ? this.limit : &quot;&quot;), show: { toolbar: true, footer: true }, columns: this.makeColumns(), records: this.makeRecords(), toolbar: this.makeToolbar(), onMenuClick: this.makeMenu().onClick, menu: this.makeMenu().items, onSelect: function (event) { event.onComplete = function () { let selected = w2ui[this.id].getSelection(); if (selected.length === 1) { for (let btn in this.btns) { if (this.btns[btn].needOnceSelected || this.btns[btn].needSelected) { let btnId = (this.btns[btn].more ? 'moreMenu:' : '') + btn; w2ui[this.id + '_toolbar'].enable(btnId); } } } else { for (let btn in this.btns) { if (this.btns[btn].needOnceSelected) { let btnId = (this.btns[btn].more ? 'moreMenu:' : '') + btn; w2ui[this.id + '_toolbar'].disable(btnId); } } } console.log(this); if (this.handlers.onSelect !== undefined) { try { this.handlers.onSelect(); } catch (err) { console.log('SERVER CODE ERROR:' + err); w2alert('Серевер вернул некорректное действие!'); } } }.bind(this) }.bind(this), onUnselect: function (event) { event.onComplete = function () { let selected = w2ui[this.id].getSelection(); if (selected.length === 1) { for (let btn in this.btns) { if (this.btns[btn].needOnceSelected) { let btnId = (this.btns[btn].more ? 'moreMenu:' : '') + btn; w2ui[this.id + '_toolbar'].enable(btnId); } } } else { for (let btn in this.btns) { if (this.btns[btn].needOnceSelected) { let btnId = (this.btns[btn].more ? 'moreMenu:' : '') + btn; w2ui[this.id + '_toolbar'].disable(btnId); } if (this.btns[btn].needSelected &amp;&amp; selected.length &lt;= 0) { let btnId = (this.btns[btn].more ? 'moreMenu:' : '') + btn; w2ui[this.id + '_toolbar'].disable(btnId); } } } }.bind(this) }.bind(this), onReload: function (event) { if (this.btns['refreshGrid'] !== undefined) try { this.btns['refreshGrid'].onClick.call(this, this); } catch (err) { console.log('SERVER CODE ERROR:' + err); w2alert('Серевер вернул некорректное действие!'); } w2ui[this.id + '_toolbar'].render(); }.bind(this) /*searches: [ {field: 'ID', caption: 'ID (int)', type: 'int'} ]*/ } /*for (let event in this.handlers) { obj[event] = this.handlers[event]; }*/ return obj; } /** * Перезагружет записи * @param data - данные с сервера */ reloadRecords(data) { this.recordsRaw = data.content[0].records; this.fk = data.content[0].fk; let recs = this.makeRecords(data.content[0].records, data.content[0].fk); w2ui[this.id].clear(); w2ui[this.id].records = recs; this.refresh(); }; /** * Подготоваливаем записи для в2грид * @param recordsRaw - записи * @param fk - внешние ключи * @returns {Array} - массив записей */ makeRecords(recordsRaw, fk) { if (recordsRaw === undefined) { recordsRaw = this.recordsRaw; } if (fk === undefined) { fk = this.fk; } let records = []; for (let recid in recordsRaw) { let rec = {}; rec.recid = recordsRaw[recid].ID; for (let col in recordsRaw[recid]) { if (this.columnsRaw[col] !== undefined &amp;&amp; this.columnsRaw[col].type === 'reference') { rec[col] = &quot;&quot;; for (let j in recordsRaw[recid][col]) { rec[col] += fk[col][recordsRaw[recid][col][j]] + '; ' } } else { rec[col] = recordsRaw[recid][col]; } } if (this.hierachy &amp;&amp; this.pagination &amp;&amp; recordsRaw[recid].isGroup !== undefined &amp;&amp; recordsRaw[recid].isGroup) { rec.w2ui = { children: [{recid: 'treeFake'}] }; } records.push(rec); } if (this.hierachy &amp;&amp; !this.pagination) { let recordsW = this.makeAsos(records, 'recid'); function showTree(parent, tree) { for (let i in recordsW) { if (recordsW[i][tree] === parent) { showTree(i, tree); if (parent !== null) { if (recordsW[parent]['w2ui'] === undefined) { recordsW[parent]['w2ui'] = new Array(); recordsW[parent]['w2ui']['children'] = new Array(); } recordsW[parent]['w2ui']['children'].push(recordsW[i]); } } } } showTree(null, 'parentID'); records = []; for (let recid in recordsW) { if (recordsW[recid]['parentID'] === null) { records.push(recordsW[recid]); } } } return records; } /** * Делаем колонки * @returns {Array} - массив колонок */ makeColumns() { window.showFiles = function (recid, col, index, column_index) { console.log(recid, col); console.log(w2ui[this.id].getCellHTML(index, column_index)); console.log('gird_' + this.id + '_data_' + index + '_' + column_index); let links = ''; for (let i in w2ui[this.id].get(recid)[col]) { links += '&lt;p&gt;&lt;a target=&quot;_blank&quot; href=&quot;' + w2ui[this.id].get(recid)[col][i] + '&quot;&gt;Файл ' + i + '&lt;/a&gt;&lt;/p&gt;' } $('#' + 'grid_' + this.id + '_data_' + index + '_' + column_index).w2overlay({ openAbove: false, align: 'none', html: '&lt;div style=&quot;padding: 10px; line-height: 150%&quot;&gt;' + '&lt;p&gt;Ссылки на файлы&lt;/p&gt;&lt;br&gt;' + links + '&lt;/div&gt;' }); }.bind(this); let renders = { &quot;files&quot;: function (record, index, column_index) { if (record[this.columns[column_index].field] === undefined || record[this.columns[column_index].field] === null || record[this.columns[column_index].field].length === 0) { return ('Нет файлов'); } else { return ('&lt;button onclick=showFiles(&quot;' + record.recid + '&quot;,&quot;' + this.columns[column_index].field + '&quot;,' + index + ',' + column_index + ')&gt;&lt;i class=&quot;fa fa-link&quot; aria-hidden=&quot;true&quot;&gt;&lt;/i&gt; Файлы&lt;/button&gt;'); } }, 'timestamp': function (record, index, column_index) { let fData = ''; let ufData = record[this.columns[column_index].field]; fData = w2utils.formatDateTime(ufData, 'dd-mm-yyyy|h:m'); return fData; }, 'float': 'float:2', 'date': function (record, index, column_index) { let fData = ''; let ufData = record[this.columns[column_index].field]; fData = w2utils.formatDate(ufData, 'dd-mm-yyyy'); return fData; }, 'boolean': function (record, index, column_index) { let fData = ''; let ufData = record[this.columns[column_index].field]; fData = (ufData ? 'да' : 'нет'); return fData; } } let columns = []; for (let i in this.columnsRaw) { if (this.columnsRaw[i].field === 'ID') continue; columns.push({ field: this.columnsRaw[i].field, size: '10%', caption: this.columnsRaw[i].caption, sortable: this.columnsRaw[i].sortable, hidden: this.columnsRaw[i].hidden, render: renders[this.columnsRaw[i].type] || null }) } console.log(columns); return columns; } /** * Формирование массива событий таблицы */ setHandlers() { //преобразуем приходящий код for (let eventName in this.events) { this.handlers[eventName] = function (event) { //в качестве параметра передаем текущий объект-таблицу try { this.code[this.events[eventName]].call(this, this); } catch (err) { console.log('SERVER CODE ERROR:' + err); w2alert('Серевер вернул некорректное действие!'); } }.bind(this) } } /** * Группирует записи * @param records - записи * @param columns - колонки * @param params - уровни * @param col - куда поместить * @param d - уровень * @returns {Array} - массив сгруппированных записей */ groupBy(records, columns, params, col, d = 0) { let style = ['background-color: #F9FBBB', 'background-color: #DDFBBB']; let res = {}; let keys = {}; for (let recid in records) { var disp = &quot;&quot;; var val = &quot;&quot;; if (columns[params[d]].type !== 'reference') { val = records[recid][params[d]]; disp = val; } else { val = records[recid][params[d]][0]; disp = this.fk[params[d]][records[recid][params[d]][0]]; } if (res[val] === undefined) { res[val] = []; } keys[val] = disp; var rec = {}; for (var c in records[recid]) { if (params[d] !== c) { rec[c] = records[recid][c]; } } res[val].push(rec); } var resw2 = []; for (var i in res) { var rec = { &quot;recid&quot;: 'group&amp;' + i + Math.random(), &quot;w2ui&quot;: { &quot;children&quot;: res[i], &quot;style&quot;: style[d] } }; rec[col] = columns[params[d]].caption + ' : ' + keys[i]; resw2.push(rec); } d++; if (d &gt;= params.length) { for (var i in resw2) { resw2[i].w2ui.children = this.makeRecords(resw2[i].w2ui.children, this.fk); } return (resw2); } else { for (var i in resw2) { resw2[i].w2ui.children = this.groupBy(resw2[i].w2ui.children, columns, params, col, d); } } return (resw2); } /** * Выделяет строку в иеарахическом справочнике, который подгружается сразу * @param id - что выделить * @param expand - нужно ли разворачивать дерево * @param light - нужно ли подсвечивать * @return {boolean} - резульат выделения */ selectInTree(id, expand = true, light = true) { let path = this.findPathInTree(id, w2ui[this.id].records, [], 0); if (path === null) { return false; } if (expand) { for (let i in path) { w2ui[this.id].expand(path[i]); } } if (light) { w2ui[this.id].select(id); } return true; } /** * Формирует путь до искомой записи в дереве (рекурсия) * @param id - что выделить * @param records - строки в формате в2уи * @param path - путь * @param deep - глубина поиска * @returns {array} - путь жо искомой записи */ findPathInTree(id, records, path, deep) { for (let i in records) { if (records[i].recid === id) { return (path); } } for (let i in records) { if (records[i].w2ui !== undefined &amp;&amp; records[i].w2ui.children !== undefined) { let newPath = path.slice(0); newPath.push(records[i].recid); let res = this.findPathInTree(id, records[i].w2ui.children, newPath, deep + 1); if (res != null) return res; } } return null;//path doesn't exist } } /** * Класс для тестирования возможностей таблиц - скорее всего не работает(( * @extends module:grid.Grid */ export class GridNew extends Grid { setHandlers() { super.setHandlers(); /*обработчик поиска в таблице*/ this.handlers.onSearch = function (event) { event.preventDefault(); if (event.searchValue === undefined) { return; } //нужен адрес и сообщение let searchQuery = new tools.AjaxSender({ url: 'search.json', msg: '', before: function () { w2ui[this.id].lock('Поиск', true); let searchNotification = new tools.BrowserNotification( 'Поиск', {body: 'Поиск по запросу ' + event.searchValue} ) }.bind(this) }) searchQuery.sendQuery() .then( response =&gt; { w2ui[this.id].unlock(); if (this.recordsBS[0] === undefined) { this.recordsBS = w2ui[this.id].records; } w2ui[this.id].records = this.makeRecords(response.content[0].records, response.content[0].fk); w2ui[this.id].refresh(); document.getElementById('grid_' + this.id + '_search_all').value = event.searchValue; console.log(this); if (w2ui[this.id + '_toolbar'].get('undoSearch') === null) { w2ui[this.id + '_toolbar'].add([ { type: 'button', id: 'undoSearch', text: 'Выйти из поиска', icon: 'fa fa-times', onClick: function () { if (this.pagination &amp;&amp; !this.hierachy) { w2ui[this.id].reload(); } else { w2ui[this.id].clear(); w2ui[this.id].records = this.recordsBS; } w2ui[this.id + '_toolbar'].remove('undoSearch'); w2ui[this.id].refresh(); w2ui[this.id].searchReset(); }.bind(this) } ]) } }, error =&gt; { } ) }.bind(this); if (this.pagination &amp;&amp; !this.hierachy) { //щит для пагинации this.handlers.onRequest = function (event) { console.log(event); event.url = 'search.json'; } this.handlers.parser = function (responseText) { responseText = responseText.toString(); responseText = JSON.parse(responseText); responseText = new tools.Unzipper(responseText).unzippedData; if (responseText.status === 'success') { responseText = responseText.message; let recs = this.makeRecords(responseText.content[0].records, responseText.content[0].fk); return recs; } }.bind(this); } //обработка разворачивания элемента дерева this.handlers.onTreeExpand = function (name, recid) { if (!this.pagination) { w2ui[this.id].toggle(recid); return; } //исключаем повторную подгрузку if (w2ui[this.id].get(recid).w2ui !== undefined &amp;&amp; w2ui[this.id].get(recid).w2ui.children !== undefined &amp;&amp; w2ui[this.id].get(recid).w2ui.children[0].recid !== 'treeFake') { w2ui[this.id].toggle(recid); return; } w2ui[this.id].lock('Загружаем', true); let expandQuery = new tools.AjaxSender({ url: 'search.json', msg: '' }) expandQuery.sendQuery() .then( response =&gt; { w2ui[this.id].unlock(); let expRecs = this.makeRecords(response.content[0].records, response.content[0].fk); //add info to object w2ui[this.id].set(recid, {w2ui: {children: expRecs}}); $.extend(this.recordsRaw, this.makeAsos(response.content[0].records, 'ID')); $.extend(this.fk, response.content[0].fk); console.log(this); w2ui[this.id].toggle(recid); }, error =&gt; { } ) }.bind(this); } setButtons() { super.setButtons(); this.btns.edit.onClick = function (event) { let response = { &quot;content&quot;: [ { &quot;records&quot;: [ { &quot;ID&quot;: &quot;5&quot;, &quot;name&quot;: &quot;Petya&quot;, &quot;mark&quot;: 3, &quot;subject&quot;: [ &quot;6&quot; ], &quot;parentID&quot;: &quot;1-1&quot; } ], &quot;fk&quot;: { &quot;subject&quot;: { &quot;6&quot;: &quot;ОБЖ&quot; } } } ] }; this.editRecord(response); } this.btns.group = { id: 'group', caption: 'Группировать', more: true, icon: 'fa fa-object-group', onClick: function (event) { let groupies = ['mark']; this.groupedBy = groupies; let showGroupCol = 'name'; this.showGroupCol = showGroupCol; let groupedRecs = this.groupBy(this.recordsRaw, this.columnsRaw, groupies, showGroupCol); w2ui[this.id].clear(); for (let i in groupies) { w2ui[this.id].removeColumn(groupies[i]); } w2ui[this.id].records = groupedRecs; w2ui[this.id].refresh(); }.bind(this) } this.btns.sel = { id: 'sel', caption: 'Выделить 1-3', more: true, icon: 'fa fa-tty', onClick: function () { this.selectInTree(&quot;1-3&quot;); }.bind(this) } } } × Search results Close Documentation generated by JSDoc 3.5.3 on 2017-08-11T15:31:46+08:00 using the DocStrap template. "},"layout_index.js.html":{"id":"layout_index.js.html","title":"Source: layout/index.js","body":" Documentation Modules authauthPagebuttoncomponentconfigcontentBuilderdropdownFieldfieldformgridlayoutmainPagemapmenupopupsimpleFieldtabstoolstwoBe Classes button.Buttoncomponent.ComponentcontentBuilder~PagedropdownField.DropdownFieldfield.Fieldform.Formgrid.Gridgrid.GridNewlayout.Layoutmap.Mappopup.PopupsimpleField.SimpleFieldtabs.Tabstabs~Tabtools.AjaxSendertools.BrowserNotificationtools.Freezertools.TokenAuthtools.UnzippertwoBe~Request Source: layout/index.js /** * @fileOverview Модуль для построения лэйаута страницы, часто употребляется понятие формат {@link https://vk.com} * @module layout * @requires component * @requires tools */ 'use strict' import * as component from '../component' /** * Класс для построения разметки страницы * @classdesc Класс для построения лэйаута страницы * @extends module:component.Component * */ export class Layout extends component.Component { constructor(param) { super(param); /** * Объект, содержащий панели * @member * @type {object} */ this.panels = {}; this.saveInWindow(); this.getAttributes(param.element); this.render(); } getAttributes(attributes) { for (let i in attributes.elements) { this.panels[attributes.elements[i].properties.position] = attributes.elements[i]; } } refresh() { for (var i in this.children) { this.children[i].refresh(); } } /** * * @param {DOM} place - куда поместить */ render(place) { if (place === undefined) { place = this.box; } if (w2ui[this.id] !== undefined) { w2ui[this.id].destroy(); } let panelObj = this.makew2uilayout(); $(place).w2layout(panelObj); this.buildPanels(); } /** * Делает объект для в2уай * @returns {object} - формат для фреймворка в2уи {@link https://w2ui.com} */ makew2uilayout() { let obj = { name: this.id } let panels = []; for (let type in this.panels) { panels.push({ type: this.panels[type].properties.position, size: this.panels[type].properties.width, resizable: true }) if (this.panels[type].elements.length !== 1 &amp;&amp; this.panels[type].elements.length !== 0) { let error = new Error('Wrong format data'); throw (error); } } obj.panels = panels; console.log(obj); return obj; } /** * Выполняет построение панелей и объектов в них */ buildPanels() { for (let panel in this.panels) { if (this.panels[panel] === undefined) continue; //определяем тип содержимого //содержимое таблица if (this.panels[panel].elements[0].type === 'grid') { //запоминание контекста let self = this; //подключаем нужную библиотеку let needLib = require('bundle-loader!../grid/grid.js')(function (mod) { //строим таблицу new mod.Grid({ box: w2ui[self.id].el(panel), element: self.panels[panel].elements[0], code: self.code, content: self.content, parent: self }); }); } if (this.panels[panel].elements[0].type === 'form') { //запоминание контекста let self = this; //подключаем нужную библиотеку let needLib = require('bundle-loader!../form/index.js')(function (mod) { let form = new mod.Form({ element: self.panels[panel].elements[0], code: self.code, content: self.content, parent: self }); w2ui[self.id].el(panel).appendChild(form.render()); }); } if (this.panels[panel].elements[0].type === 'tabs') { //запоминание контекста let self = this; console.log(self); //подключаем нужную библиотеку let needLib = require('bundle-loader!../tabs/index.js')(function (mod) { let tabs = new mod.Tabs({ box: w2ui[self.id].el(panel), element: self.panels[panel].elements[0], code: self.code, content: self.content, parent: self }); }); } if (this.panels[panel].elements[0].type === 'map') { //запоминание контекста let self = this; console.log(self); //подключаем нужную библиотеку let needLib = require('bundle-loader!../map/index.js')(function (mod) { let m = new mod.Map({ box: w2ui[self.id].el(panel), element: self.panels[panel].elements[0], code: self.code, content: self.content, parent: self }); console.log(m); }); } } } } × Search results Close Documentation generated by JSDoc 3.5.3 on 2017-08-11T15:31:46+08:00 using the DocStrap template. "},"main.js.html":{"id":"main.js.html","title":"Source: main.js","body":" Documentation Modules authauthPagebuttoncomponentconfigcontentBuilderdropdownFieldfieldformgridlayoutmainPagemapmenupopupsimpleFieldtabstoolstwoBe Classes button.Buttoncomponent.ComponentcontentBuilder~PagedropdownField.DropdownFieldfield.Fieldform.Formgrid.Gridgrid.GridNewlayout.Layoutmap.Mappopup.PopupsimpleField.SimpleFieldtabs.Tabstabs~Tabtools.AjaxSendertools.BrowserNotificationtools.Freezertools.TokenAuthtools.UnzippertwoBe~Request Source: main.js /** * Модуль для построения главной страницы приложения * @module mainPage * @requires menu * @requires w2ui {@link https://w2ui.com} * @requires jQuery * @requires config * @requires tools * @requires contentBuilder */ 'use strict' //подключаем стили - можно создать несколько точек входа для каждого файла стилей import './libraries/bootstrap/css/bootstrap.css'; import './libraries/fontawesome/css/font-awesome.css'; //еще немного скриптов require('imports-loader?jQuery=jquery!./libraries/bootstrap/js/bootstrap.js'); //подключаем меню, причем сразу же import menuTopFixed from './menu/index.js'; //подключаем менеджер страниц import contentBuilder from './contentBuilder/index.js'; //подключаем конфиг import {config} from './config/config.js'; //подключаем тулзы import * as tools from './tools/index.js'; //подключаем библиотеку w2ui и экспортируем переменные из нее const w2lib = require('imports-loader?jQuery=jquery!exports-loader?w2ui&amp;w2alert&amp;w2popup&amp;w2utils&amp;w2confirm!./libraries/w2ui/w2ui-1.5.js'); //подключаем стили import './libraries/w2ui/w2ui-1.5.css'; //импортированные переменные делаем доступными всюду, в том числе jQuery; window.w2popup = w2lib.w2popup; window.w2alert = w2lib.w2alert; window.w2ui = w2lib.w2ui; window.w2utils = w2lib.w2utils; window.w2confirm = w2lib.w2confirm; window.jQuery = jQuery; //проба сокетов // var socket = new WebSocket(&quot;ws://localhost:8081&quot;); // socket.onmessage = function (event) { // let incomingMessage = event.data; // w2alert(incomingMessage); // }; //проверка токена let token = new tools.TokenAuth(config.name).checkToken(); if (token === undefined) { document.location.href = 'index.html'; } let ruLocale = require('./libraries/w2ui/ru-ru.json') w2utils.locale(ruLocale); //строим меню или не строим if (localStorage[config.name + '_ObjInfo'] === undefined) { document.location.href = 'index.html'; } let info = JSON.parse(localStorage[config.name + '_ObjInfo']); var menu = new menuTopFixed({ name: config.caption, place: 'topMenu', objInfo: info }); let containerDiv = document.getElementById('container'); //строим менеджер страниц let builder = new contentBuilder({box: containerDiv, onHome: buildMain}); buildMain(builder); //подписка на клик, роутер системы menu.on('menuItemSelected', event =&gt; { let detail = event.detail; if (detail.obj === 'ref' || detail.obj === 'doc' || detail.obj === 'st') { let path = detail.obj + '-' + detail.name; let page = builder.showPage(path, detail.caption); //загружаем содержимое страницы с сервера page.load(); //выделить пункт меню menu.selectItem(path); } /*кнопка выход*/ if (detail.obj === 'exit') { new tools.TokenAuth(config.name).exit('index.html'); } }) function buildMain(builder) { let place = builder.showPage('main', 'Главная страница').generatedBox; place.innerHTML = '&lt;div style = &quot;text-align: center&quot;&gt;&lt;img src=&quot;mainPage.gif&quot; alt=&quot;&quot; class=&quot;fa-spin&quot;&gt;&lt;p&gt;&lt;h1&gt;Вы на главной странице!&lt;/h1&gt;&lt;/p&gt;&lt;/div&gt;'; } × Search results Close Documentation generated by JSDoc 3.5.3 on 2017-08-11T15:31:46+08:00 using the DocStrap template. "},"map_index.js.html":{"id":"map_index.js.html","title":"Source: map/index.js","body":" Documentation Modules authauthPagebuttoncomponentconfigcontentBuilderdropdownFieldfieldformgridlayoutmainPagemapmenupopupsimpleFieldtabstoolstwoBe Classes button.Buttoncomponent.ComponentcontentBuilder~PagedropdownField.DropdownFieldfield.Fieldform.Formgrid.Gridgrid.GridNewlayout.Layoutmap.Mappopup.PopupsimpleField.SimpleFieldtabs.Tabstabs~Tabtools.AjaxSendertools.BrowserNotificationtools.Freezertools.TokenAuthtools.UnzippertwoBe~Request Source: map/index.js /** * Модуль для построения карт * @module map * @requires {@link leaflet} * @requires {@link gzm} * @requires component * @requires tools * */ //подключаем стили import '../libraries/fontawesome/css/font-awesome.css'; import '../libraries/gzm/gzm.css'; import '../libraries/gzm/leaflet.css'; //подключаем leaflet const leafletLib = require('imports-loader?jQuery=jquery!exports-loader?L!../libraries/gzm/leaflet-src.js'); window.L = leafletLib; //подключаем gzm const gzmLib = require('imports-loader?jQuery=jquery!../libraries/gzm/gzm.js'); import * as component from '../component'; import * as tools from '../tools/index.js'; /** * Заготовка для отображения карт - будет еще серьезно дополняться и модернизироваться * @extends module:component.Component */ export class Map extends component.Component { constructor(param) { super(param); this.gzmCore = ''; this.map = ''; this.editor = ''; this.staticObjects = {}; this.saveInWindow(); this.render(); this.deployObjects(); this.addListeners() } /** * Добавляет слушателей карты */ addListeners() { if (this.events.mapSelected !== undefined) { this.gzmCore.addListener('mapSelect', function (event) { /* TODO getUUIDbyObjectID(objectID) */ let uuid = ''; for (let i in this.staticObjects.geoZones) { if (this.staticObjects.geoZones[i].objectID === event.objectInfo.objectID) { uuid = this.staticObjects.geoZones[i].uuid; break; } } this.code[this.events.mapSelected].call(this, uuid); }.bind(this)) } } /** * Разворчивает объекты на карте */ deployObjects() { this.makeObjectsForMap(); this.gzmCore.deployObjects(this.staticObjects); this.gzmCore.fitMap(); } /** * Соединяем все с ядром */ connectToCore() { this.gzmCore.plugMap(this.map); this.gzmCore.plugEditor(this.editor); } /** * Создаем ядро редактора */ createGzmCore() { this.gzmCore = new GeoZoneManager(); } /** * Создаем редактор */ createEditor() { this.editor = new Editor(this.gzmCore); } /** * Создаем объект для размещения на карте */ makeObjectsForMap() { let result = {}; result.geoZones = []; let prepRecs = this.prepareData(this.content); let records = prepRecs.records; let fk = prepRecs.fk; for (let i in records) { let coords = []; let coordsStr = records[i].coords; coordsStr = coordsStr.slice(2); coordsStr = coordsStr.substr(0, coordsStr.length - 3); coordsStr = coordsStr.split('),('); for (let j in coordsStr) { coords.push([parseFloat(coordsStr[j].split(',')[0]), parseFloat(coordsStr[j].split(',')[1])]); } result.geoZones.push({ uuid: records[i].ID, props: {test: {value: 'testValue'}}, nodes: coords }) } this.staticObjects = result; } /** * Выделяет объект на карте * @param {string} uuid - идентификатор */ setSelection(uuid) { /* TODO getObjectIDbyUUID(uuid) */ for (let i in this.staticObjects.geoZones) { if (this.staticObjects.geoZones[i].uuid === uuid) { this.gzmCore.map.focus(this.staticObjects.geoZones[i].objectID); break; } } } /** * Размещает карту на странице в боксе */ render() { let placeMap = document.createElement('div'); placeMap.style.height = '100%'; this.box.appendChild(placeMap); //создаем место для карты this.map = new LeafletStaticMap(placeMap); this.createGzmCore(); this.createEditor(); this.connectToCore(); } } × Search results Close Documentation generated by JSDoc 3.5.3 on 2017-08-11T15:31:46+08:00 using the DocStrap template. "},"menu_index.js.html":{"id":"menu_index.js.html","title":"Source: menu/index.js","body":" Documentation Modules authauthPagebuttoncomponentconfigcontentBuilderdropdownFieldfieldformgridlayoutmainPagemapmenupopupsimpleFieldtabstoolstwoBe Classes button.Buttoncomponent.ComponentcontentBuilder~PagedropdownField.DropdownFieldfield.Fieldform.Formgrid.Gridgrid.GridNewlayout.Layoutmap.Mappopup.PopupsimpleField.SimpleFieldtabs.Tabstabs~Tabtools.AjaxSendertools.BrowserNotificationtools.Freezertools.TokenAuthtools.UnzippertwoBe~Request Source: menu/index.js 'use strict'; /** * Модуль для построения меню * @module menu */ //подключаем шаблон import tempalate from './menu.tpl'; //подключаем стили import './menu.css'; /** * @classdesc Класс, строящий верхнее навигационное меню */ export default class menuTopFixed { /** * @constructor * @param {object} options - массив опций * @param {stirng} options.place - идентифкатор места * @param {string} options.name - имя системы * @param {object} options.objInfo - информация о доступных маршрутах */ constructor(options) { //идентификатор узла this._place = options.place; //бренд this._name = options.name; //пользователь this._user = options.objInfo.description + (options.objInfo.login !== undefined ? ' (' + options.objInfo.login + ')' : &quot;&quot;); //возможные перемещения this.objInfo = options.objInfo; this._permissions = options.objInfo.permissions; //строим шаблон и размещаем его document.getElementById(this._place).innerHTML = tempalate({ name: this._name, user: this._user, routes: this._permissions }); //навешиваем обработчики событий document.getElementById(this._place).addEventListener('click', this._onMenuItemClick.bind(this)); } /** * Обработчик событий, доступный извне * @param eventName - имя события * @param handler - функция-обработчик */ on(eventName, handler) { document.getElementById(this._place).addEventListener(eventName, handler); } /** * Вызывает событие на элементе * @param eventName - имя события * @param data - что передать * @private */ _trigger(eventName, data) { let myEvent = new CustomEvent(eventName, {detail: data}); document.getElementById(this._place).dispatchEvent(myEvent); } /** * Выделяет пункт в меню * @param elem - выделяемый элемент * @private */ _setSelection(elem) { //развыделяем остальное let actives = $('#' + this._place + ' .active'); for (let i = 0; i &lt; actives.length; i++) { actives[i].className = ''; } //выделяем нужное elem.className = 'active'; } /** * Обрабочик нажатия на меню * @param event * @private */ _onMenuItemClick(event) { //определяем ближайший элемент с доступной обработкой клика let elem = $(event.target).closest('[data-cl=true]'); if (elem.length === 0) return; elem = elem[0]; let dataset = elem.dataset; //при необходимости выделяем if (dataset.sel === 'true') { this._setSelection(elem) } //генерируем событие this._trigger('menuItemSelected', dataset); } selectItem(path) { this._setSelection(document.getElementById('topMenu_' + path)); } } × Search results Close Documentation generated by JSDoc 3.5.3 on 2017-08-11T15:31:46+08:00 using the DocStrap template. "},"popup_index.js.html":{"id":"popup_index.js.html","title":"Source: popup/index.js","body":" Documentation Modules authauthPagebuttoncomponentconfigcontentBuilderdropdownFieldfieldformgridlayoutmainPagemapmenupopupsimpleFieldtabstoolstwoBe Classes button.Buttoncomponent.ComponentcontentBuilder~PagedropdownField.DropdownFieldfield.Fieldform.Formgrid.Gridgrid.GridNewlayout.Layoutmap.Mappopup.PopupsimpleField.SimpleFieldtabs.Tabstabs~Tabtools.AjaxSendertools.BrowserNotificationtools.Freezertools.TokenAuthtools.UnzippertwoBe~Request Source: popup/index.js /** * Модуль для построения всплывающих окон * @module popup * @requires tools * @requires component */ /** * @classdesc Класс реализующий построение всплывающего окна */ export class Popup { /** * @constructor */ constructor() { /** * Уровень вложенности * @member * @type {number} */ this.dimension = -1; /** * Хранит в себе окна * @member * @type {array} */ this.modals = []; if (window.stpui === undefined) { window.stpui = {}; } //может существовать только один объект попап window.stpui.popup = this; } /** * Функция выполняет показ нового модального окна * @param data - информация приходящая с сервера в определенном формате */ showNewModal(data) { let popupProperties = this.getParams(data); this.getPlace(popupProperties).then( place =&gt; { let layoutLib = require('../layout/index.js'); let layout = new layoutLib.Layout({ box: place, element: popupProperties.body, content: data.content, code: data.code } ); this.modals[this.dimension].object = layout; } ); } /** * @see module:component.Component#prepareCode */ prepareCode(oldCode) { let newCode = {}; for (let funcName in oldCode) { let func = new Function('return ' + oldCode[funcName]); newCode[funcName] = func(); } return newCode; } /** * Закрывает очередную модаль */ close() { let self = this; if (self.dimension === 0) { w2popup.close(); delete stpui.popup; } else { //заголовок document.getElementById('popupHeader').innerHTML = self.modals[self.dimension].header; //удаляем document.getElementById('popup' + self.dimension).parentNode.removeChild(document.getElementById('popup' + self.dimension)); document.getElementById('popupBtn' + self.dimension).parentNode.removeChild(document.getElementById('popupBtn' + self.dimension)); if (w2popup.get().maximized) { w2popup.min(); } self.dimension--; //изменяем размер w2popup.resize(self.modals[self.dimension].width, self.modals[self.dimension].height, function () { if (self.modals[self.dimension].maximized) { w2popup.max(); } self.modals[self.dimension].object.refresh(); //покаываем document.getElementById('popup' + self.dimension).style.display = ''; document.getElementById('popupBtn' + self.dimension).style.display = ''; self.modals.pop(); }); } } /** * Замораживает попап * @param {string} msg - сообщение * @param {boolean} spinner - показывать ли спинннер */ lock(msg = '', spinner = true) { w2popup.lock(msg, spinner); } /** * Размораживает попап */ unlock() { w2popup.unlock(); } /** * Скрывает попап */ hide() { document.getElementById('w2ui-lock').style.display = 'none'; document.getElementById('w2ui-popup').style.display = 'none'; } /** * Показывает */ unhide() { document.getElementById('w2ui-lock').style.display = ''; document.getElementById('w2ui-popup').style.display = ''; } /** * Получает место для построения содержимого модали, взято из старого проекта * @param properties - свойства модали * @returns {Promise} */ getPlace(properties) { let self = this; return new Promise(function (resolve, reject) { //определяем статус всплывающего окна if (self.dimension &lt; 0) { //это первое модальное окно //формируем панель с кнопками var buttonsHtml = &quot;&quot;; for (var i in properties.footer) { buttonsHtml += '&lt;button class=&quot;w2ui-btn&quot; id=' + properties.footer[i].id + '0' + ' style=&quot;margin-left: 5px&quot;&gt;' + properties.footer[i].properties.caption + '&lt;/button&gt;'; } buttonsHtml += '&lt;button class=&quot;w2ui-btn&quot; id=' + 'close' + '0' + ' style=&quot;margin-left: 5px&quot;&gt;' + 'Закрыть' + '&lt;/button&gt;'; buttonsHtml = '&lt;div id=&quot;popupBtn&quot;&gt;&lt;div id=&quot;popupBtn0&quot;&gt;' + buttonsHtml + '&lt;/div&gt;&lt;/div&gt;'; //формируем контейнер для панели var bodyHtml = '&lt;div id=&quot;popupDiv&quot; style=&quot;position: absolute; left: 5px; top: 5px; right: 5px; bottom: 5px;&quot;&gt;&lt;div id=&quot;popup0&quot; style=&quot;position: absolute; left: 5px; top: 5px; right: 5px; bottom: 5px;&quot;&gt;&lt;/div&gt;&lt;/div&gt;'; //конфигурируем окно в2уи w2popup.open({ title: '&lt;div id=&quot;popupHeader&quot;&gt;' + properties.header + '&lt;/div&gt;', height: properties.height, width: properties.width, body: bodyHtml, showMax: true, buttons: buttonsHtml, modal: true, onOpen: function (event) { event.onComplete = function () { self.dimension++; self.modals.push({ header: properties.header, width: w2popup.get().width, height: w2popup.get().height }) //навешиваем обработчики на кнопки console.log(properties); for (let i in properties.footer) { document.getElementById(properties.footer[i].id + '0').onclick = function () { let button = { getProperties: function () { return { param: properties.footer[i].properties.param || null, path: properties.body.path }; } } try { properties.code[properties.footer[i].events.click](button); } catch (err) { console.log('SERVER CODE ERROR:' + err); w2alert('Серевер вернул некорректное действие!'); } }; } //добавляем кнопку отмену document.getElementById('close0').onclick = function () { self.close(); } let closeBtn = jQuery('div.w2ui-popup-close')[0]; $(closeBtn).unbind('click'); closeBtn.onclick = null; closeBtn.onclick = function () { self.close(); } resolve(document.getElementById('popup0')); } }, onClose: function (event) { }, onToggle: function (event) { event.onComplete = function () { self.lock('', true); function func() { self.unlock(); } setTimeout(func, 500); } } } ) } else { //вложенное окно self.modals[self.dimension].maximized = w2popup.get().maximized; if (w2popup.get().maximized) { w2popup.min(); } //скрываем имеющееся тело и кнопки document.getElementById('popup' + (self.dimension)).style.display = 'none'; document.getElementById('popupBtn' + (self.dimension)).style.display = 'none'; self.dimension++; //формируем тело var bodyObj = document.createElement('div'); bodyObj.id = 'popup' + self.dimension; bodyObj.style.height = '100%'; document.getElementById('popupDiv').appendChild(bodyObj); var buttonsHtml = &quot;&quot;; for (let i in properties.footer) { buttonsHtml += '&lt;button class=&quot;w2ui-btn&quot; id=' + properties.footer[i].id + self.dimension + ' style=&quot;margin-left: 5px&quot;&gt;' + properties.footer[i].properties.caption + '&lt;/button&gt;'; } buttonsHtml += '&lt;button class=&quot;w2ui-btn&quot; id=' + 'close' + self.dimension + ' style=&quot;margin-left: 5px&quot;&gt;' + 'Назад' + '&lt;/button&gt;'; var buttonsObj = document.createElement('div'); buttonsObj.id = 'popupBtn' + self.dimension; buttonsObj.innerHTML = buttonsHtml; document.getElementById('popupBtn').appendChild(buttonsObj); //навешиваем обработчики на кнопки for (let i in properties.footer) { document.getElementById(properties.footer[i].id + self.dimension).onclick = function () { let button = { getProperties: function () { return { param: properties.footer[i].properties.param || null, path: properties.body.path }; } } try { properties.code[properties.footer[i].events.click](button); } catch (err) { console.log('SERVER CODE ERROR:' + err); w2alert('Серевер вернул некорректное действие!'); } }.bind(self); } //меняем размеры var w = 0; var h = 0; w = properties.width; h = properties.height; w2popup.resize(w, h, function () { self.modals.push({ header: properties.header, width: w2popup.get().width, height: w2popup.get().height }) document.getElementById('popupHeader').innerHTML = properties.header; //кнопка закрыть откатывает на один шаг назад document.getElementById('close' + self.dimension).onclick = function () { self.close(); } resolve(document.getElementById('popup' + self.dimension)); }); } }) } /** * Функция из приходящей информации получает информацию об очередной модали - заголовок, тело, кнопки, размеры, а также код * @param {object} data - данные с сервера * @returns {object} */ getParams(data) { let popupData = data.elements[0]; let result = { code: this.prepareCode(data.code) } for (let i in popupData.elements) { if (popupData.elements[i].type === 'header') { if (popupData.elements[i].properties !== undefined) { result.header = popupData.elements[i].properties.caption || ''; } else { result.header = '' } } if (popupData.elements[i].type === 'footer') { result.footer = popupData.elements[i].elements; } if (popupData.elements[i].type === 'body') { result.body = popupData.elements[i].elements[0]; } } result.width = popupData.properties.width; result.height = popupData.properties.height; return result; } } × Search results Close Documentation generated by JSDoc 3.5.3 on 2017-08-11T15:31:46+08:00 using the DocStrap template. "},"simpleField_index.js.html":{"id":"simpleField_index.js.html","title":"Source: simpleField/index.js","body":" Documentation Modules authauthPagebuttoncomponentconfigcontentBuilderdropdownFieldfieldformgridlayoutmainPagemapmenupopupsimpleFieldtabstoolstwoBe Classes button.Buttoncomponent.ComponentcontentBuilder~PagedropdownField.DropdownFieldfield.Fieldform.Formgrid.Gridgrid.GridNewlayout.Layoutmap.Mappopup.PopupsimpleField.SimpleFieldtabs.Tabstabs~Tabtools.AjaxSendertools.BrowserNotificationtools.Freezertools.TokenAuthtools.UnzippertwoBe~Request Source: simpleField/index.js /** * Модуль для построения simpleField * @module simpleField * @requires field */ import {Field} from '../field'; /** * @extends module:field.Field */ export class SimpleField extends Field { constructor(options) { super(options); this.type = options.element.properties.type || 'text'; if (options.element.properties.type === 'checkbox') { this.value = false; } else { this.value = ''; } } ///// Private methods ///// initLogic() { super.initLogic(); this._applyW2ui(); this.applyProperties(); this._addListeners(); } _applyW2ui() { if (!this.controlEl) return; let config = {}; if (this.type === 'time') { config.format = 'h24'; } $(this.controlEl).w2field(this.type, config); // убираем w2ui классы для стилизации this.controlEl.classList.remove('w2field'); this.controlEl.classList.remove('w2ui-input'); } /** * Сохраняет значение из инпута в свойство value * @param event * @private */ _saveChanges(event) { if (event.target.type === &quot;checkbox&quot;) { this.value = event.target.checked; // Если float то надо заменять запятую на точку } else if (this.type === 'float') { if (typeof event.target.value == &quot;string&quot;) { this.value = event.target.value.replace(/,/,&quot;.&quot;); } } else { this.value = event.target.value; } this.trigger('changeValue'); } /** * Добавляем наблюдение за событиями controlEl * @private */ _addListeners() { // в w2ui при работе с датой и временем не срабатывает событие change, поэтому ориентируемся на потерю фокуса this.controlEl.addEventListener('blur', this._saveChanges.bind(this)); } ///// Public methods ///// enable() { // вызываем родительский метод чтобы активировать кнопки super.enable(); // + своя логика // при кастомном макете элемент может быть не орпеделен if (!this.controlEl) return; this.controlEl.removeAttribute('disabled'); } disable() { // вызываем родительский метод чтобы деактивировать кнопки super.disable(); // + своя логика // при кастомном макете элемент может быть не орпеделен if (!this.controlEl) return; this.controlEl.setAttribute('disabled', 'true'); } getValue() { return this.value; } setValue(newValue) { this.value = newValue; this.controlEl.value = newValue; // если меняем checkbox if (this.value === true) { this.controlEl.checked = true; } else if (this.value === false) { this.controlEl.checked = false; } // Это непотребство нужно для того чтобы w2ui отреагировал на изменение и применил форматирование к данным $(this.controlEl).data('w2field').change(new Event('change')); } } × Search results Close Documentation generated by JSDoc 3.5.3 on 2017-08-11T15:31:46+08:00 using the DocStrap template. "},"tabs_index.js.html":{"id":"tabs_index.js.html","title":"Source: tabs/index.js","body":" Documentation Modules authauthPagebuttoncomponentconfigcontentBuilderdropdownFieldfieldformgridlayoutmainPagemapmenupopupsimpleFieldtabstoolstwoBe Classes button.Buttoncomponent.ComponentcontentBuilder~PagedropdownField.DropdownFieldfield.Fieldform.Formgrid.Gridgrid.GridNewlayout.Layoutmap.Mappopup.PopupsimpleField.SimpleFieldtabs.Tabstabs~Tabtools.AjaxSendertools.BrowserNotificationtools.Freezertools.TokenAuthtools.UnzippertwoBe~Request Source: tabs/index.js /** * Модуль для построения таблиц * @module tabs * @requires component * @requires tools */ import * as componentLib from '../component'; import * as tools from '../tools/index.js'; /** * @classdesc Класс для построения вкладок * @extends module:component.Component */ export class Tabs extends componentLib.Component { constructor(params) { super(params); /** * Массив для данных о вкладках * @member * @type {array} */ this.tabsContent = []; this.getAttributes(params.element); this.buildTabs(); } getAttributes(attributes) { this.tabsContent = attributes.elements; for (let i in this.tabsContent) { if (this.tabsContent[i].events !== undefined) { for (let event in this.tabsContent[i].events) { this.tabsContent[i].events[event] = this.code[this.tabsContent[i].events[event]]; } } } } /** * Функция строит вкладки */ buildTabs() { //контейнер для таблеток let navTabs = document.createElement('ul'); navTabs.className = &quot;nav nav-pills&quot;; this.box.appendChild(navTabs); //генерируем вкладки this.buildTabsContent(); //формируем ссылки на сгенерированые вкладки for (let i in this.children) { let li = document.createElement('li'); navTabs.appendChild(li); let aHref = document.createElement('a'); aHref.innerHTML = this.tabsContent[i].properties.header; aHref.setAttribute('data-toggle', 'pill'); aHref.setAttribute('href', '#' + this.children[i].id); aHref.data = i; li.appendChild(aHref); //навешиваем обработчики, в контекст передаем объект вкладки //beforeShow $('a[href=&quot;#' + this.children[i].id + '&quot;]').on('show.bs.tab', $.proxy(function (e) { for (let i in this.children) { this.children[i].refresh(); } if (!this._showByFunc) { if (this.events !== null &amp;&amp; this.events.beforeShow !== undefined) { this._beforeEvent = e; this.events.beforeShow.call(this, this); } } }, this.children[i])) //afterShow $('a[href=&quot;#' + this.children[i].id + '&quot;]').on('shown.bs.tab', $.proxy(function (e) { if (this.events !== null &amp;&amp; this.events.afterShow !== undefined) { this.events.afterShow.call(this, this); } }, this.children[i])) } //по умолчанию показываем первую вкладку this.children[0].show(); } /** * Строим объекты-вкладки */ buildTabsContent() { //генерируем контейнер let tabContent = document.createElement('div'); tabContent.className = 'tab-content'; tabContent.style.height = /*(this.box.clientHeight - 45) + 'px'*/'calc(100% - 45px)'; this.box.appendChild(tabContent); //вызываем конструкторы for (let i in this.tabsContent) { let tab = new Tab({ code: this.code, content: this.content, element: this.tabsContent[i], box: tabContent, parent: this }) } } /** * Обновление */ refresh() { for (let i in this.children) { this.children[i].refresh(); } } } /** * @classdesc Класс сторит одну вкладку * @extends module:component.Component */ class Tab extends componentLib.Component { constructor(params) { super(params); //контейнер вкладки this.tabContainer = null; //показывает ести ли во вкладке контент this.isFilled = false; //информация о вкладке this.tabContent = null; this._beforeEvent = ''; this._showByFunc = false; //хранит объект заморозки this._freezer = ''; this.getAttributes(params.element); this.render(); this.saveInWindow(this.id); console.log(this); } getAttributes(attributes) { if (attributes.elements[0] !== undefined) this.tabContent = attributes.elements[0] } /** * Обновление */ refresh() { for (let i in this.children) { this.children[i].refresh(); } } /** * Показать вкладку программно */ show() { this._showByFunc = true; $('a[href=&quot;#' + this.id + '&quot;]').tab('show'); } /** * Заморозить вкладку * @param msg - сообщение */ lock(msg = '') { let freezer = new tools.Freezer({ place: this.tabContainer, message: msg }); freezer.lock(); this.isFilled = true; this._freezer = freezer; } /** * Разморозить */ unlock() { this.isFilled = false; this._freezer.unlock(); } /** * Прекратить показ текущей вкладки */ stop() { this._beforeEvent.preventDefault(); } /** * Сеттер для установки заполненности вкладки * @param value - значение */ setFilled(value) { this.isFilled = value; } /** * Заполнить вкладку * @param data */ fill(data) { let layoutLib = require('../layout/index.js'); let layout = new layoutLib.Layout({ box: this.tabContainer, element: (data === undefined ? this.tabContent : data.elements[0]), content: (data === undefined ? this.content : data.content), code: (data === undefined ? this.code : data.code), parent: this } ); this.isFilled = true; } /** * Создать дом объект вкладки */ render() { let tabDiv = document.createElement('div'); tabDiv.className = 'tab-pane'; tabDiv.style.height = 'calc(100% - 45px)'; tabDiv.style.width = '100%'; tabDiv.id = this.id; this.tabContainer = tabDiv; this.box.appendChild(tabDiv); if (this.tabContent !== null) { this.fill(); } } } × Search results Close Documentation generated by JSDoc 3.5.3 on 2017-08-11T15:31:46+08:00 using the DocStrap template. "},"tools_index.js.html":{"id":"tools_index.js.html","title":"Source: tools/index.js","body":" Documentation Modules authauthPagebuttoncomponentconfigcontentBuilderdropdownFieldfieldformgridlayoutmainPagemapmenupopupsimpleFieldtabstoolstwoBe Classes button.Buttoncomponent.ComponentcontentBuilder~PagedropdownField.DropdownFieldfield.Fieldform.Formgrid.Gridgrid.GridNewlayout.Layoutmap.Mappopup.PopupsimpleField.SimpleFieldtabs.Tabstabs~Tabtools.AjaxSendertools.BrowserNotificationtools.Freezertools.TokenAuthtools.UnzippertwoBe~Request Source: tools/index.js /** * Модуль содержащий некоторый общий функционал * @module tools * @requires {@link pako.js} * @requires {@link http://malsup.com/jquery/block/} */ import pako from '../libraries/pakojs/pako.js'; require('imports-loader?jQuery=jquery!../libraries/blockUI/jquery.blockUI.js'); /** * @classdesc Класс для разжатия данных с сервера */ export class Unzipper { /** * @constructor * @param zippedData - сжатые данные */ constructor(zippedData) { /** * Сжатые данные * @member * @type {gzip} */ this.zippedData = zippedData; /** * Разжатые данные * @member * @type {object} */ this.unzippedData = {}; this.unzip(); } /** * Выполняет разжатие данных */ unzip() { if (this.zippedData.message.type === &quot;Buffer&quot;) { let b64 = this.zippedData.message.data; // Decode base64 (convert ascii to binary) let strData = atob(b64); // Convert binary string to character-number array let charData = strData.split('').map(function (x) { return x.charCodeAt(0); }); // Turn number array into byte-array let binData = new Uint8Array(charData); // Pako magic let data = JSON.parse(pako.inflate(binData, {to: 'string'})); this.unzippedData.status = this.zippedData.status; this.unzippedData.message = data; } else { this.unzippedData = this.zippedData; } } } /** * @classdesc Класс для разжатия данных с сервера */ export class AjaxSender { /** * @constructor * @param {object} options - параметры * @param {string} options.url - адрес * @param {string} options.msg - тело ссобщения * @param {string} options.headerAccept - заголовок * @param {function} options.before - действие во время ожидания */ constructor(options) { /** * Адрес * @member * @type {string} */ this.url = options.url; /** * Тело ссобщения * @member * @type {string} */ this.msg = options.msg; /** * Заголовок * @member * @type {string} */ this.headerAccept = options.headerAccept; /** * Действие во время ожидания * @member * @type {function} */ this.before = options.before; } /** * Отслать запрос * @returns {Promise} */ sendQuery() { let self = this;//передача контекста через замыкание return new Promise(function (resolve, reject) { let xhr = new XMLHttpRequest(); if (self.headerAccept !== undefined) { xhr.setRequestHeader('headerAccept', self.headerAccept); } xhr.open('POST', self.url, true); xhr.onload = function () { if (this.status === 200) { let serverAns = this.response; //для заглушек serverAns = serverAns.toString(); serverAns = JSON.parse(serverAns); serverAns = new Unzipper(serverAns).unzippedData; if (serverAns.status === 'success') { resolve(serverAns.message); } else { let error = new Error(serverAns.message); error.code = 9999; reject(error); } } else { let error = new Error(this.statusText); error.code = this.status; reject(error); } } if (self.before !== undefined) { self.before(); } xhr.onerror = function () { reject(new Error('Network Error')); } xhr.send(self.msg); }) } } /** * Класс для работы с токеном авторизации в куках */ export class TokenAuth { /** * @constructor * @param name - имя токена */ constructor(name) { /** * Имя токена * @member * @type {string} */ this.name = name; } /** * Проверить токен * @returns {string} */ checkToken() { return (this._getCookie(this.name)); } /** * Добавляет токен * @param token - токен */ addToken(token) { this._setCookie(this.name, token, {expires: 0});//устанавливаем &quot;сессионное куки&quot; } /** * Устанавливает кук * @param {string} name - имя * @param {string} value - значение * @param options - параметры * @private */ _setCookie(name, value, options) { options = options || {}; var expires = options.expires; if (typeof expires === &quot;number&quot; &amp;&amp; expires) { var d = new Date(); d.setTime(d.getTime() + expires * 1000); expires = options.expires = d; } if (expires &amp;&amp; expires.toUTCString) { options.expires = expires.toUTCString(); } value = encodeURIComponent(value); var updatedCookie = name + &quot;=&quot; + value; for (var propName in options) { updatedCookie += &quot;; &quot; + propName; var propValue = options[propName]; if (propValue !== true) { updatedCookie += &quot;=&quot; + propValue; } } document.cookie = updatedCookie; } /** * * Получить кук * @param {string} name - имя * @returns {string} * @private */ _getCookie(name) { var matches = document.cookie.match(new RegExp( &quot;(?:^|; )&quot; + name.replace(/([\\.$?*|{}\\(\\)\\[\\]\\\\\\/\\+^])/g, '\\\\$1') + &quot;=([^;]*)&quot; )); return matches ? decodeURIComponent(matches[1]) : undefined; } /** * Удалить кук * @private */ _deleteCookie() { this._setCookie(this.name, &quot;&quot;, {expires: -1}); } /** * Выполняет выход из системы * @param page - куда уходить */ exit(page) { this._deleteCookie(); document.location.href = page; } } /** * Класс для работы с браузерными уведомлениями {@link https://developer.mozilla.org/ru/docs/Web/API/notification} */ export class BrowserNotification { /** * @constructor * @param {string} title - заголовок * @param {object} options - опции * @param {string} options.body - текст оповещения */ constructor(title, options) { // Проверим, поддерживает ли браузер HTML5 Notifications if (!(&quot;Notification&quot; in window)) { alert('Ваш браузер не поддерживает HTML Notifications, его необходимо обновить.'); } // Проверим, есть ли права на отправку уведомлений else if (Notification.permission === &quot;granted&quot;) { // Если права есть, отправим уведомление let notification = new Notification(title, options); function clickFunc() { alert('Пользователь кликнул на уведомление'); } notification.onclick = clickFunc; } // Если прав нет, пытаемся их получить else if (Notification.permission !== 'denied') { Notification.requestPermission(function (permission) { // Если права успешно получены, отправляем уведомление if (permission === &quot;granted&quot;) { let notification = new Notification(title, options); } else { alert('Вы запретили показывать уведомления'); // Юзер отклонил наш запрос на показ уведомлений } }); } else { // Пользователь ранее отклонил наш запрос на показ уведомлений // В этом месте мы можем, но не будем его беспокоить. Уважайте решения своих пользователей. } } } /** * Замораживатель, использует {@link http://malsup.com/jquery/block/} */ export class Freezer { /** * * @param {object} params - параметры * @param {DOM} params.place - что морозить * @param {text} params.message - сообщение */ constructor(params) { this.place = params.place || &quot;&quot;; this.message = params.message || &quot;&quot;; } /** * Замораживает */ lock() { $(this.place).block({ css: { border: 'none', padding: '15px', backgroundColor: '#000', '-webkit-border-radius': '10px', '-moz-border-radius': '10px', opacity: .5, color: '#fff' }, message: '&lt;i class=&quot;fa fa-cog fa-spin fa-fw&quot;&gt;&lt;/i&gt; ' + this.message }); } /** * Размораживает */ unlock() { $(this.place).unblock(); } } × Search results Close Documentation generated by JSDoc 3.5.3 on 2017-08-11T15:31:46+08:00 using the DocStrap template. "},"twoBe_index.js.html":{"id":"twoBe_index.js.html","title":"Source: twoBe/index.js","body":" Documentation Modules authauthPagebuttoncomponentconfigcontentBuilderdropdownFieldfieldformgridlayoutmainPagemapmenupopupsimpleFieldtabstoolstwoBe Classes button.Buttoncomponent.ComponentcontentBuilder~PagedropdownField.DropdownFieldfield.Fieldform.Formgrid.Gridgrid.GridNewlayout.Layoutmap.Mappopup.PopupsimpleField.SimpleFieldtabs.Tabstabs~Tabtools.AjaxSendertools.BrowserNotificationtools.Freezertools.TokenAuthtools.UnzippertwoBe~Request Source: twoBe/index.js /** * Created by AHonyakov on 17.07.2017. */ /** * Модуль для исполнения функций в пользовательском коде, также должен быть реализван в мобильном клиенте * @module twoBe * @requires tools * @requires config */ //подключаем конфиг import {config} from '../config/config.js'; import * as tools from '../tools/index.js'; /** * @classdesc Класс пользовательских функций */ export default class twoBe { /** * @param {object} data - данные для кэширования * @param {string} key - ключ */ static cacheData(data, key) { localStorage[key] = JSON.stringify(data); } /** * Получает конифигурационные данные - пока в виде заглушки * @returns {{url: string}} Объект с конфигами */ static getDefaultParams() { return ({url: config.testUrl}); } /** * Получает объект по идентификатору * @param {string} id - идентификатор * @returns {object} - найденный объект */ static getById(id) { return window.stpui[id]; } /** * Строит инетрфейс по полученным данным с сервера * @param {object} data - данные * @param {string} key - ключ */ static buildView(data, key) { if (data.needToCache) { this.cacheData(data, key); } if (data.elements.length !== 1) { w2alert('Сервер вернул некорректные данные!'); return; } if (data.elements[0].type === 'popup') { let popupLib = require('../popup/index.js'); if (window.stpui !== undefined &amp;&amp; window.stpui.popup === undefined) { new popupLib.Popup(); } window.stpui.popup.showNewModal(data); } } /** * Получить данные по ключу из кэша * @param {string} key - ключ * @returns {} объект с данными */ static getCache(key) { if (localStorage[key] !== undefined) { return (JSON.parse(localStorage[key])); } else { return null; } } /** * Показать уведомление * @param {string} type - тип * @param {string} msg - сообщение */ static showMessage(type, msg) { w2alert(msg); } /** * Отсылает запрос на сервер - не используется (вроде) * @param url * @param action * @param object * @param name * @param beforeSend * @param success * @param error */ static sendRequest(url, action, object, name, beforeSend, success, error) { let request = new tools.AjaxSender({ url: url, msg: action + object + name, before: function () { beforeSend(); } }) request.sendQuery() .then( response =&gt; { success(response); }, errorResponse =&gt; { error(errorResponse); } ) } /** * Создает запрос * @returns {Request} */ static createRequest() { return new Request(); } /** * Показать подтверждение * @param {string} msg - сообщение * @param {function} callback - что делать если да */ static showConfirm(msg, callback) { w2confirm(msg) .yes(function () { callback(); }) } } /** * @classdesc Класс запроса */ class Request { /** * @constructor */ constructor() { /** * Адрес запроса * @member * @type {string} */ this.url = ''; /** * Тело запроса * @member * @type {object} */ this.param = {}; /** * Что делать во время ожидания * @member * @type {} */ this.before = ''; /** * Что делать при успехе * @member * @type {} */ this.success = ''; /** * Что делать при неудаче * @member * @type {} */ this.error = ''; /** * Ключ для поисков в кэшэ * @member * @type {string} */ this.cacheKey = null; } /** * Сеттер для адреса * @param {string} url - адрес * @returns {Request} */ addUrl(url) { this.url = url; return this; } /** * Сеттер для поля данные запроса * @param {string} key - ключ * @param {object} value - значение * @returns {Request} */ addData(key, value) { if (this.param.data === undefined) { this.param.data = {}; } this.param.data[key] = value; return this; } /** * Добавить параметр в запрос * @param {string} key - ключ * @param {string} value - значение * @returns {Request} */ addParam(key, value) { this.param[key] = value; return this; } /** * Добавить действие до * @param func * @returns {Request} */ addBefore(func) { this.before = func; return this; } /** * Добавить действие-успех * @param func * @returns {Request} */ addSuccess(func) { this.success = func; return this; } /** * Добавить действие-неудачу * @param func * @returns {Request} */ addError(func) { this.error = func; return this; } /** * Добаляет ключ для кэша * @param key * @returns {Request} */ addCacheKey(key) { this.cacheKey = key; return this; } /** * Отправить запрос */ send() { if (this.cacheKey !== null &amp;&amp; localStorage[this.cacheKey] !== undefined) { this.success(twoBe.getCache(this.cacheKey)); return; } let request = new tools.AjaxSender({ url: this.url, msg: JSON.stringify(this.param), before: function () { this.before(); }.bind(this) }) request.sendQuery() .then( response =&gt; { this.success(response); }, errorResponse =&gt; { this.error(errorResponse); } ) } } × Search results Close Documentation generated by JSDoc 3.5.3 on 2017-08-11T15:31:46+08:00 using the DocStrap template. "},"modules.list.html":{"id":"modules.list.html","title":"Modules","body":" Documentation Modules authauthPagebuttoncomponentconfigcontentBuilderdropdownFieldfieldformgridlayoutmainPagemapmenupopupsimpleFieldtabstoolstwoBe Classes button.Buttoncomponent.ComponentcontentBuilder~PagedropdownField.DropdownFieldfield.Fieldform.Formgrid.Gridgrid.GridNewlayout.Layoutmap.Mappopup.PopupsimpleField.SimpleFieldtabs.Tabstabs~Tabtools.AjaxSendertools.BrowserNotificationtools.Freezertools.TokenAuthtools.UnzippertwoBe~Request Modules Classes module:auth Button Component module:contentBuilder Page DropdownField Field Form Grid GridNew Layout Map module:menu Popup SimpleField Tabs Tab AjaxSender BrowserNotification Freezer TokenAuth Unzipper module:twoBe Request × Search results Close Documentation generated by JSDoc 3.5.3 on 2017-08-11T15:31:46+08:00 using the DocStrap template. "},"classes.list.html":{"id":"classes.list.html","title":"Classes","body":" Documentation Modules authauthPagebuttoncomponentconfigcontentBuilderdropdownFieldfieldformgridlayoutmainPagemapmenupopupsimpleFieldtabstoolstwoBe Classes button.Buttoncomponent.ComponentcontentBuilder~PagedropdownField.DropdownFieldfield.Fieldform.Formgrid.Gridgrid.GridNewlayout.Layoutmap.Mappopup.PopupsimpleField.SimpleFieldtabs.Tabstabs~Tabtools.AjaxSendertools.BrowserNotificationtools.Freezertools.TokenAuthtools.UnzippertwoBe~Request Classes Classes module:auth Button Component module:contentBuilder Page DropdownField Field Form Grid GridNew Layout Map module:menu Popup SimpleField Tabs Tab AjaxSender BrowserNotification Freezer TokenAuth Unzipper module:twoBe Request × Search results Close Documentation generated by JSDoc 3.5.3 on 2017-08-11T15:31:46+08:00 using the DocStrap template. "},"index.html":{"id":"index.html","title":"Index","body":" Documentation Modules authauthPagebuttoncomponentconfigcontentBuilderdropdownFieldfieldformgridlayoutmainPagemapmenupopupsimpleFieldtabstoolstwoBe Classes button.Buttoncomponent.ComponentcontentBuilder~PagedropdownField.DropdownFieldfield.Fieldform.Formgrid.Gridgrid.GridNewlayout.Layoutmap.Mappopup.PopupsimpleField.SimpleFieldtabs.Tabstabs~Tabtools.AjaxSendertools.BrowserNotificationtools.Freezertools.TokenAuthtools.UnzippertwoBe~Request × Search results Close Documentation generated by JSDoc 3.5.3 on 2017-08-11T15:31:46+08:00 using the DocStrap template. "},"module-auth.html":{"id":"module-auth.html","title":"Module: auth","body":" Documentation Modules authauthPagebuttoncomponentconfigcontentBuilderdropdownFieldfieldformgridlayoutmainPagemapmenupopupsimpleFieldtabstoolstwoBe Classes button.Buttoncomponent.ComponentcontentBuilder~PagedropdownField.DropdownFieldfield.Fieldform.Formgrid.Gridgrid.GridNewlayout.Layoutmap.Mappopup.PopupsimpleField.SimpleFieldtabs.Tabstabs~Tabtools.AjaxSendertools.BrowserNotificationtools.Freezertools.TokenAuthtools.UnzippertwoBe~Request Module: auth Класс для построения формы авторизации и создания соответсвующих обработчиков Модуль для авторизации new (require(&quot;auth&quot;))(options) Parameters: Name Type Description options object набор параметров Properties Name Type Description place string идентификатор места urlAuth string адрес сервера version string версия системы name string имя системы urlGet string адрес для авторизации гугл urlGetTokens string адрес для получения токена msgGet string сообщение для получения адреса гугл msgGetTokens string сообщение для получения токена после гугл авторизации authGoogle string нужна ли гугл авторизация redirectUrl string куда перенаправлять в случае успешной авторизации Source: auth/index.js Requires module:tools module:config × Search results Close Documentation generated by JSDoc 3.5.3 on 2017-08-11T15:31:46+08:00 using the DocStrap template. "},"module-authPage.html":{"id":"module-authPage.html","title":"Module: authPage","body":" Documentation Modules authauthPagebuttoncomponentconfigcontentBuilderdropdownFieldfieldformgridlayoutmainPagemapmenupopupsimpleFieldtabstoolstwoBe Classes button.Buttoncomponent.ComponentcontentBuilder~PagedropdownField.DropdownFieldfield.Fieldform.Formgrid.Gridgrid.GridNewlayout.Layoutmap.Mappopup.PopupsimpleField.SimpleFieldtabs.Tabstabs~Tabtools.AjaxSendertools.BrowserNotificationtools.Freezertools.TokenAuthtools.UnzippertwoBe~Request Module: authPage Модуль страницы авторизации Source: auth.js Requires module:config module:auth × Search results Close Documentation generated by JSDoc 3.5.3 on 2017-08-11T15:31:46+08:00 using the DocStrap template. "},"module-button.html":{"id":"module-button.html","title":"Module: button","body":" Documentation Modules authauthPagebuttoncomponentconfigcontentBuilderdropdownFieldfieldformgridlayoutmainPagemapmenupopupsimpleFieldtabstoolstwoBe Classes button.Buttoncomponent.ComponentcontentBuilder~PagedropdownField.DropdownFieldfield.Fieldform.Formgrid.Gridgrid.GridNewlayout.Layoutmap.Mappopup.PopupsimpleField.SimpleFieldtabs.Tabstabs~Tabtools.AjaxSendertools.BrowserNotificationtools.Freezertools.TokenAuthtools.UnzippertwoBe~Request Module: button Модуль для построения кнопки Source: button/index.js Requires module:component Classes Button × Search results Close Documentation generated by JSDoc 3.5.3 on 2017-08-11T15:31:46+08:00 using the DocStrap template. "},"module-button.Button.html":{"id":"module-button.Button.html","title":"Class: Button","body":" Documentation Modules authauthPagebuttoncomponentconfigcontentBuilderdropdownFieldfieldformgridlayoutmainPagemapmenupopupsimpleFieldtabstoolstwoBe Classes button.Buttoncomponent.ComponentcontentBuilder~PagedropdownField.DropdownFieldfield.Fieldform.Formgrid.Gridgrid.GridNewlayout.Layoutmap.Mappopup.PopupsimpleField.SimpleFieldtabs.Tabstabs~Tabtools.AjaxSendertools.BrowserNotificationtools.Freezertools.TokenAuthtools.UnzippertwoBe~Request Class: Button button. Button new Button() Source: button/index.js Extends module:component.Component Members box :DOM Место для компонента Type: DOM Inherited From: module:component.Component#box Overrides: module:component.Component#box Source: component/index.js children :array Массив деток, нужен для каскадного обновления Type: array Inherited From: module:component.Component#children Source: component/index.js code :object Объект с именем обработчика события и кодом этого обработчика Type: object Inherited From: module:component.Component#code Source: component/index.js content :array Данные компонента Type: array Inherited From: module:component.Component#content Source: component/index.js events :object Cобытия элемента, объект с именем события и именем обработчика события Type: object Inherited From: module:component.Component#events Source: component/index.js id :string Значение для идентификации всех компнентов (опционально) Type: string Inherited From: module:component.Component#id Source: component/index.js parent :object Cсылка на родительский элемент Type: object Inherited From: module:component.Component#parent Source: component/index.js path :string Путь к объекту данных Type: string Inherited From: module:component.Component#path Source: component/index.js Methods addChildren(child) Записывает объект в дети текущего объекта Parameters: Name Type Description child объект Inherited From: module:component.Component#addChildren Source: component/index.js destroy() Уничтожает компонент Inherited From: module:component.Component#destroy Source: component/index.js disable() Сделать элемент недоступным для редактирования Inherited From: module:component.Component#disable Overrides: module:component.Component#disable Source: component/index.js enable() Сделать элемент доступным для редактирования Inherited From: module:component.Component#enable Overrides: module:component.Component#enable Source: component/index.js getAttributes(attributes) Из формата, пришедшего с сервера, добирает нужные поля объекта Parameters: Name Type Description attributes Inherited From: module:component.Component#getAttributes Source: component/index.js getProperties() Функция для совместимости с мобильным приложением, возвращает сам объект Inherited From: module:component.Component#getProperties Source: component/index.js Returns: Type Component hide() Скрыть элемент со страницы Inherited From: module:component.Component#hide Source: component/index.js makeAsos(array, key) Делает ассоциативный массив Parameters: Name Type Description array массив key ключ Inherited From: module:component.Component#makeAsos Source: component/index.js Returns: - ассоциативный массив Type object prepareCode(oldCode) Преобразует код из строки Parameters: Name Type Description oldCode object объект из строковых функций Inherited From: module:component.Component#prepareCode Source: component/index.js Returns: newCode - объект из функций Type object prepareData(contentArr) Выделение записей и внешних ключей из content Parameters: Name Type Description contentArr массив контента Inherited From: module:component.Component#prepareData Source: component/index.js Returns: - Объект из записей и внешних ключей к ним Type object recInChildren() Функция записывает объект в дети к родителю Inherited From: module:component.Component#recInChildren Source: component/index.js refresh() Обновить отображение объекта, нужно для в2уи в процессе скрытия/отображения Inherited From: module:component.Component#refresh Source: component/index.js reload() Перезагружает компонент Inherited From: module:component.Component#reload Source: component/index.js render() Генерирует DOM элемент с кнопкой и возвращает его Overrides: module:component.Component#render Source: button/index.js Returns: - DOM элемент с формой Type object saveInWindow(id) Записывает объект в глобальную переменную Parameters: Name Type Description id идентификатор, по умолчанию берется идентификатор объекта Inherited From: module:component.Component#saveInWindow Source: component/index.js show() Отобразить скрытый элемент на странице Inherited From: module:component.Component#show Source: component/index.js trigger(eventName, data) Активирует событие на элементе Parameters: Name Type Description eventName data Inherited From: module:component.Component#trigger Source: component/index.js × Search results Close Documentation generated by JSDoc 3.5.3 on 2017-08-11T15:31:46+08:00 using the DocStrap template. "},"module-component.html":{"id":"module-component.html","title":"Module: component","body":" Documentation Modules authauthPagebuttoncomponentconfigcontentBuilderdropdownFieldfieldformgridlayoutmainPagemapmenupopupsimpleFieldtabstoolstwoBe Classes button.Buttoncomponent.ComponentcontentBuilder~PagedropdownField.DropdownFieldfield.Fieldform.Formgrid.Gridgrid.GridNewlayout.Layoutmap.Mappopup.PopupsimpleField.SimpleFieldtabs.Tabstabs~Tabtools.AjaxSendertools.BrowserNotificationtools.Freezertools.TokenAuthtools.UnzippertwoBe~Request Module: component Модуль для построения компонента - абстрактного объекта, часто употребляется понятие формат https://vk.com Source: component/index.js Requires module:twoBe Classes Component × Search results Close Documentation generated by JSDoc 3.5.3 on 2017-08-11T15:31:46+08:00 using the DocStrap template. "},"module-component.Component.html":{"id":"module-component.Component.html","title":"Class: Component","body":" Documentation Modules authauthPagebuttoncomponentconfigcontentBuilderdropdownFieldfieldformgridlayoutmainPagemapmenupopupsimpleFieldtabstoolstwoBe Classes button.Buttoncomponent.ComponentcontentBuilder~PagedropdownField.DropdownFieldfield.Fieldform.Formgrid.Gridgrid.GridNewlayout.Layoutmap.Mappopup.PopupsimpleField.SimpleFieldtabs.Tabstabs~Tabtools.AjaxSendertools.BrowserNotificationtools.Freezertools.TokenAuthtools.UnzippertwoBe~Request Class: Component component. Component Класс для построения компонента - абстрактного класса для большинства отображаемых на экране объектов new Component(options) Parameters: Name Type Description options object Набор параметров для построения компонента Properties Name Type Description box DOM Куда поместить объект parent object Кто родитель этого объекта element object Сведения об элементе согласно формату code object Код content array Контент для элемента Source: component/index.js Members box :DOM Место для компонента Type: DOM Source: component/index.js children :array Массив деток, нужен для каскадного обновления Type: array Source: component/index.js code :object Объект с именем обработчика события и кодом этого обработчика Type: object Source: component/index.js content :array Данные компонента Type: array Source: component/index.js events :object Cобытия элемента, объект с именем события и именем обработчика события Type: object Source: component/index.js id :string Значение для идентификации всех компнентов (опционально) Type: string Source: component/index.js parent :object Cсылка на родительский элемент Type: object Source: component/index.js path :string Путь к объекту данных Type: string Source: component/index.js Methods addChildren(child) Записывает объект в дети текущего объекта Parameters: Name Type Description child объект Source: component/index.js destroy() Уничтожает компонент Source: component/index.js disable() Сделать элемент недоступным для редактирования Source: component/index.js enable() Сделать элемент доступным для редактирования Source: component/index.js getAttributes(attributes) Из формата, пришедшего с сервера, добирает нужные поля объекта Parameters: Name Type Description attributes Source: component/index.js getProperties() Функция для совместимости с мобильным приложением, возвращает сам объект Source: component/index.js Returns: Type Component hide() Скрыть элемент со страницы Source: component/index.js makeAsos(array, key) Делает ассоциативный массив Parameters: Name Type Description array массив key ключ Source: component/index.js Returns: - ассоциативный массив Type object prepareCode(oldCode) Преобразует код из строки Parameters: Name Type Description oldCode object объект из строковых функций Source: component/index.js Returns: newCode - объект из функций Type object prepareData(contentArr) Выделение записей и внешних ключей из content Parameters: Name Type Description contentArr массив контента Source: component/index.js Returns: - Объект из записей и внешних ключей к ним Type object recInChildren() Функция записывает объект в дети к родителю Source: component/index.js refresh() Обновить отображение объекта, нужно для в2уи в процессе скрытия/отображения Source: component/index.js reload() Перезагружает компонент Source: component/index.js render() Помещает объект в ДОМ Source: component/index.js saveInWindow(id) Записывает объект в глобальную переменную Parameters: Name Type Description id идентификатор, по умолчанию берется идентификатор объекта Source: component/index.js show() Отобразить скрытый элемент на странице Source: component/index.js trigger(eventName, data) Активирует событие на элементе Parameters: Name Type Description eventName data Source: component/index.js × Search results Close Documentation generated by JSDoc 3.5.3 on 2017-08-11T15:31:46+08:00 using the DocStrap template. "},"module-config.html":{"id":"module-config.html","title":"Module: config","body":" Documentation Modules authauthPagebuttoncomponentconfigcontentBuilderdropdownFieldfieldformgridlayoutmainPagemapmenupopupsimpleFieldtabstoolstwoBe Classes button.Buttoncomponent.ComponentcontentBuilder~PagedropdownField.DropdownFieldfield.Fieldform.Formgrid.Gridgrid.GridNewlayout.Layoutmap.Mappopup.PopupsimpleField.SimpleFieldtabs.Tabstabs~Tabtools.AjaxSendertools.BrowserNotificationtools.Freezertools.TokenAuthtools.UnzippertwoBe~Request Module: config Модуль конфигурации Source: config/config.js Members &lt;static&gt; config :Object Объект конфига Type: Object Source: config/config.js × Search results Close Documentation generated by JSDoc 3.5.3 on 2017-08-11T15:31:46+08:00 using the DocStrap template. "},"module-contentBuilder.html":{"id":"module-contentBuilder.html","title":"Module: contentBuilder","body":" Documentation Modules authauthPagebuttoncomponentconfigcontentBuilderdropdownFieldfieldformgridlayoutmainPagemapmenupopupsimpleFieldtabstoolstwoBe Classes button.Buttoncomponent.ComponentcontentBuilder~PagedropdownField.DropdownFieldfield.Fieldform.Formgrid.Gridgrid.GridNewlayout.Layoutmap.Mappopup.PopupsimpleField.SimpleFieldtabs.Tabstabs~Tabtools.AjaxSendertools.BrowserNotificationtools.Freezertools.TokenAuthtools.UnzippertwoBe~Request Module: contentBuilder Данный класс представляет собой реализацию скелета одностраничного приложения Модуль для построения объекта-контейнера страниц new (require(&quot;contentBuilder&quot;))(options) Parameters: Name Type Description options object Набор параметров для построения компонента Properties Name Type Description box DOM Куда поместить объект parent object Кто родитель этого объекта element object Сведения об элементе согласно формату code object Код content array Контент для элемента param.onHome действие при нажатии кнопки домой остальные Source: contentBuilder/index.js Requires module:tools module:component module:layout module:config Classes Page Members box :DOM Место для компонента Type: DOM Inherited From: module:component.Component#box Source: component/index.js children :array Массив деток, нужен для каскадного обновления Type: array Inherited From: module:component.Component#children Source: component/index.js code :object Объект с именем обработчика события и кодом этого обработчика Type: object Inherited From: module:component.Component#code Source: component/index.js content :array Данные компонента Type: array Inherited From: module:component.Component#content Source: component/index.js events :object Cобытия элемента, объект с именем события и именем обработчика события Type: object Inherited From: module:component.Component#events Source: component/index.js id :string Значение для идентификации всех компнентов (опционально) Type: string Inherited From: module:component.Component#id Source: component/index.js parent :object Cсылка на родительский элемент Type: object Inherited From: module:component.Component#parent Source: component/index.js path :string Путь к объекту данных Type: string Inherited From: module:component.Component#path Source: component/index.js Methods addChildren(child) Записывает объект в дети текущего объекта Parameters: Name Type Description child объект Inherited From: module:component.Component#addChildren Source: component/index.js buildNavigatorToolbar(place) Функция выполняет построение тулбара Parameters: Name Type Description place DOM куда поместить Source: contentBuilder/index.js destroy() Уничтожает компонент Inherited From: module:component.Component#destroy Source: component/index.js disable() Сделать элемент недоступным для редактирования Inherited From: module:component.Component#disable Source: component/index.js enable() Сделать элемент доступным для редактирования Inherited From: module:component.Component#enable Source: component/index.js getAttributes(attributes) Из формата, пришедшего с сервера, добирает нужные поля объекта Parameters: Name Type Description attributes Inherited From: module:component.Component#getAttributes Source: component/index.js getProperties() Функция для совместимости с мобильным приложением, возвращает сам объект Inherited From: module:component.Component#getProperties Source: component/index.js Returns: Type Component hide() Скрыть элемент со страницы Inherited From: module:component.Component#hide Source: component/index.js makeAsos(array, key) Делает ассоциативный массив Parameters: Name Type Description array массив key ключ Inherited From: module:component.Component#makeAsos Source: component/index.js Returns: - ассоциативный массив Type object prepareCode(oldCode) Преобразует код из строки Parameters: Name Type Description oldCode object объект из строковых функций Inherited From: module:component.Component#prepareCode Source: component/index.js Returns: newCode - объект из функций Type object prepareData(contentArr) Выделение записей и внешних ключей из content Parameters: Name Type Description contentArr массив контента Inherited From: module:component.Component#prepareData Source: component/index.js Returns: - Объект из записей и внешних ключей к ним Type object recInChildren() Функция записывает объект в дети к родителю Inherited From: module:component.Component#recInChildren Source: component/index.js refresh() Выполняет обновление текущей страницы Overrides: module:component.Component#refresh Source: contentBuilder/index.js reload() Перезагружает компонент Inherited From: module:component.Component#reload Source: component/index.js render() Размещает на странице тулбар и контейнер для страниц Overrides: module:component.Component#render Source: contentBuilder/index.js saveInWindow(id) Записывает объект в глобальную переменную Parameters: Name Type Description id идентификатор, по умолчанию берется идентификатор объекта Inherited From: module:component.Component#saveInWindow Source: component/index.js show() Отобразить скрытый элемент на странице Inherited From: module:component.Component#show Source: component/index.js showPage(id, caption) Показывает страниу Parameters: Name Type Description id идентифкатор страницы(возможно это наш path) caption подпись Source: contentBuilder/index.js trigger(eventName, data) Активирует событие на элементе Parameters: Name Type Description eventName data Inherited From: module:component.Component#trigger Source: component/index.js × Search results Close Documentation generated by JSDoc 3.5.3 on 2017-08-11T15:31:46+08:00 using the DocStrap template. "},"module-contentBuilder-Page.html":{"id":"module-contentBuilder-Page.html","title":"Class: Page","body":" Documentation Modules authauthPagebuttoncomponentconfigcontentBuilderdropdownFieldfieldformgridlayoutmainPagemapmenupopupsimpleFieldtabstoolstwoBe Classes button.Buttoncomponent.ComponentcontentBuilder~PagedropdownField.DropdownFieldfield.Fieldform.Formgrid.Gridgrid.GridNewlayout.Layoutmap.Mappopup.PopupsimpleField.SimpleFieldtabs.Tabstabs~Tabtools.AjaxSendertools.BrowserNotificationtools.Freezertools.TokenAuthtools.UnzippertwoBe~Request Class: Page module:contentBuilder~ Page Класс страницы в рамках одностраничного приложения new Page(path, caption, box) Parameters: Name Type Description path идентификатор страницы caption подпись к странице box куда поместить Source: contentBuilder/index.js Members box :DOM Куда поместить страницу Type: DOM Source: contentBuilder/index.js caption :string Подпись Type: string Source: contentBuilder/index.js children :array Дети страницы Type: array Source: contentBuilder/index.js generatedBox :DOM Сгенерированный блок страницы Type: DOM Source: contentBuilder/index.js id :string Идентифкатор Type: string Source: contentBuilder/index.js Methods addChildren(child) Записать в дети Parameters: Name Type Description child object Source: contentBuilder/index.js clear() Очистить страницу Source: contentBuilder/index.js destroy() Уничтожить страницу Source: contentBuilder/index.js hide() Скрыть страницу Source: contentBuilder/index.js load() Функция загружает страницу Source: contentBuilder/index.js refresh() Обновить страницу Source: contentBuilder/index.js reload() Перезагрузить страницу Source: contentBuilder/index.js render() Получить блок страницы Source: contentBuilder/index.js show() Показать страницу Source: contentBuilder/index.js × Search results Close Documentation generated by JSDoc 3.5.3 on 2017-08-11T15:31:46+08:00 using the DocStrap template. "},"module-dropdownField.html":{"id":"module-dropdownField.html","title":"Module: dropdownField","body":" Documentation Modules authauthPagebuttoncomponentconfigcontentBuilderdropdownFieldfieldformgridlayoutmainPagemapmenupopupsimpleFieldtabstoolstwoBe Classes button.Buttoncomponent.ComponentcontentBuilder~PagedropdownField.DropdownFieldfield.Fieldform.Formgrid.Gridgrid.GridNewlayout.Layoutmap.Mappopup.PopupsimpleField.SimpleFieldtabs.Tabstabs~Tabtools.AjaxSendertools.BrowserNotificationtools.Freezertools.TokenAuthtools.UnzippertwoBe~Request Module: dropdownField Модуль для выпадающих список Source: dropdownField/index.js Requires module:tools Classes DropdownField × Search results Close Documentation generated by JSDoc 3.5.3 on 2017-08-11T15:31:46+08:00 using the DocStrap template. "},"module-dropdownField.DropdownField.html":{"id":"module-dropdownField.DropdownField.html","title":"Class: DropdownField","body":" Documentation Modules authauthPagebuttoncomponentconfigcontentBuilderdropdownFieldfieldformgridlayoutmainPagemapmenupopupsimpleFieldtabstoolstwoBe Classes button.Buttoncomponent.ComponentcontentBuilder~PagedropdownField.DropdownFieldfield.Fieldform.Formgrid.Gridgrid.GridNewlayout.Layoutmap.Mappopup.PopupsimpleField.SimpleFieldtabs.Tabstabs~Tabtools.AjaxSendertools.BrowserNotificationtools.Freezertools.TokenAuthtools.UnzippertwoBe~Request Class: DropdownField dropdownField. DropdownField new DropdownField() Source: dropdownField/index.js Extends module:component.Component Members box :DOM Место для компонента Type: DOM Inherited From: module:component.Component#box Source: component/index.js children :array Массив деток, нужен для каскадного обновления Type: array Inherited From: module:component.Component#children Source: component/index.js code :object Объект с именем обработчика события и кодом этого обработчика Type: object Inherited From: module:component.Component#code Source: component/index.js content :array Данные компонента Type: array Inherited From: module:component.Component#content Source: component/index.js events :object Cобытия элемента, объект с именем события и именем обработчика события Type: object Inherited From: module:component.Component#events Source: component/index.js id :string Значение для идентификации всех компнентов (опционально) Type: string Inherited From: module:component.Component#id Source: component/index.js parent :object Cсылка на родительский элемент Type: object Inherited From: module:component.Component#parent Source: component/index.js path :string Путь к объекту данных Type: string Inherited From: module:component.Component#path Source: component/index.js Methods addChildren(child) Записывает объект в дети текущего объекта Parameters: Name Type Description child объект Inherited From: module:component.Component#addChildren Source: component/index.js destroy() Уничтожает компонент Inherited From: module:component.Component#destroy Source: component/index.js disable() Сделать элемент недоступным для редактирования Inherited From: module:component.Component#disable Overrides: module:component.Component#disable Source: component/index.js enable() Сделать элемент доступным для редактирования Inherited From: module:component.Component#enable Overrides: module:component.Component#enable Source: component/index.js getAttributes(attributes) Из формата, пришедшего с сервера, добирает нужные поля объекта Parameters: Name Type Description attributes Inherited From: module:component.Component#getAttributes Source: component/index.js getListData() Получить значения выпадающего списка Source: dropdownField/index.js Returns: Type array getListDataFromServer() Метод отправляет запрос на сервер за порцией данных, подходящей под введенный текст Source: dropdownField/index.js getProperties() Функция для совместимости с мобильным приложением, возвращает сам объект Inherited From: module:component.Component#getProperties Source: component/index.js Returns: Type Component hide() Скрыть элемент со страницы Inherited From: module:component.Component#hide Source: component/index.js makeAsos(array, key) Делает ассоциативный массив Parameters: Name Type Description array массив key ключ Inherited From: module:component.Component#makeAsos Source: component/index.js Returns: - ассоциативный массив Type object prepareCode(oldCode) Преобразует код из строки Parameters: Name Type Description oldCode object объект из строковых функций Inherited From: module:component.Component#prepareCode Source: component/index.js Returns: newCode - объект из функций Type object prepareData(contentArr) Выделение записей и внешних ключей из content Parameters: Name Type Description contentArr массив контента Inherited From: module:component.Component#prepareData Source: component/index.js Returns: - Объект из записей и внешних ключей к ним Type object recInChildren() Функция записывает объект в дети к родителю Inherited From: module:component.Component#recInChildren Source: component/index.js refresh() Обновить отображение объекта, нужно для в2уи в процессе скрытия/отображения Inherited From: module:component.Component#refresh Source: component/index.js reload() Перезагружает компонент Inherited From: module:component.Component#reload Source: component/index.js render() Помещает объект в ДОМ Inherited From: module:component.Component#render Source: component/index.js saveInWindow(id) Записывает объект в глобальную переменную Parameters: Name Type Description id идентификатор, по умолчанию берется идентификатор объекта Inherited From: module:component.Component#saveInWindow Source: component/index.js setListData(data) Установить значения выпадающего списка Parameters: Name Type Description data array Source: dropdownField/index.js show() Отобразить скрытый элемент на странице Inherited From: module:component.Component#show Source: component/index.js trigger(eventName, data) Активирует событие на элементе Parameters: Name Type Description eventName data Inherited From: module:component.Component#trigger Source: component/index.js × Search results Close Documentation generated by JSDoc 3.5.3 on 2017-08-11T15:31:46+08:00 using the DocStrap template. "},"module-field.html":{"id":"module-field.html","title":"Module: field","body":" Documentation Modules authauthPagebuttoncomponentconfigcontentBuilderdropdownFieldfieldformgridlayoutmainPagemapmenupopupsimpleFieldtabstoolstwoBe Classes button.Buttoncomponent.ComponentcontentBuilder~PagedropdownField.DropdownFieldfield.Fieldform.Formgrid.Gridgrid.GridNewlayout.Layoutmap.Mappopup.PopupsimpleField.SimpleFieldtabs.Tabstabs~Tabtools.AjaxSendertools.BrowserNotificationtools.Freezertools.TokenAuthtools.UnzippertwoBe~Request Module: field Модуль для построения field Source: field/index.js Requires module:button module:component Classes Field × Search results Close Documentation generated by JSDoc 3.5.3 on 2017-08-11T15:31:46+08:00 using the DocStrap template. "},"module-field.Field.html":{"id":"module-field.Field.html","title":"Class: Field","body":" Documentation Modules authauthPagebuttoncomponentconfigcontentBuilderdropdownFieldfieldformgridlayoutmainPagemapmenupopupsimpleFieldtabstoolstwoBe Classes button.Buttoncomponent.ComponentcontentBuilder~PagedropdownField.DropdownFieldfield.Fieldform.Formgrid.Gridgrid.GridNewlayout.Layoutmap.Mappopup.PopupsimpleField.SimpleFieldtabs.Tabstabs~Tabtools.AjaxSendertools.BrowserNotificationtools.Freezertools.TokenAuthtools.UnzippertwoBe~Request Class: Field field. Field new Field() Source: field/index.js Extends module:component.Component Members box :DOM Место для компонента Type: DOM Inherited From: module:component.Component#box Overrides: module:component.Component#box Source: component/index.js children :array Массив деток, нужен для каскадного обновления Type: array Inherited From: module:component.Component#children Source: component/index.js code :object Объект с именем обработчика события и кодом этого обработчика Type: object Inherited From: module:component.Component#code Source: component/index.js content :array Данные компонента Type: array Inherited From: module:component.Component#content Source: component/index.js events :object Cобытия элемента, объект с именем события и именем обработчика события Type: object Inherited From: module:component.Component#events Source: component/index.js id :string Значение для идентификации всех компнентов (опционально) Type: string Inherited From: module:component.Component#id Source: component/index.js parent :object Cсылка на родительский элемент Type: object Inherited From: module:component.Component#parent Source: component/index.js path :string Путь к объекту данных Type: string Inherited From: module:component.Component#path Source: component/index.js Methods addChildren(child) Записывает объект в дети текущего объекта Parameters: Name Type Description child объект Inherited From: module:component.Component#addChildren Source: component/index.js destroy() Уничтожает компонент Inherited From: module:component.Component#destroy Source: component/index.js disable() Сделать элемент недоступным для редактирования Inherited From: module:component.Component#disable Overrides: module:component.Component#disable Source: component/index.js enable() Сделать элемент доступным для редактирования Inherited From: module:component.Component#enable Overrides: module:component.Component#enable Source: component/index.js getAttributes(attributes) Из формата, пришедшего с сервера, добирает нужные поля объекта Parameters: Name Type Description attributes Inherited From: module:component.Component#getAttributes Source: component/index.js getProperties() Функция для совместимости с мобильным приложением, возвращает сам объект Inherited From: module:component.Component#getProperties Source: component/index.js Returns: Type Component hide() Скрыть элемент со страницы Inherited From: module:component.Component#hide Source: component/index.js isRequired() Метод определяет обязательное ли это поле Source: field/index.js Returns: Type boolean makeAsos(array, key) Делает ассоциативный массив Parameters: Name Type Description array массив key ключ Inherited From: module:component.Component#makeAsos Source: component/index.js Returns: - ассоциативный массив Type object prepareCode(oldCode) Преобразует код из строки Parameters: Name Type Description oldCode object объект из строковых функций Inherited From: module:component.Component#prepareCode Source: component/index.js Returns: newCode - объект из функций Type object prepareData(contentArr) Выделение записей и внешних ключей из content Parameters: Name Type Description contentArr массив контента Inherited From: module:component.Component#prepareData Source: component/index.js Returns: - Объект из записей и внешних ключей к ним Type object recInChildren() Функция записывает объект в дети к родителю Inherited From: module:component.Component#recInChildren Source: component/index.js refresh() Обновить отображение объекта, нужно для в2уи в процессе скрытия/отображения Inherited From: module:component.Component#refresh Source: component/index.js reload() Перезагружает компонент Inherited From: module:component.Component#reload Source: component/index.js removeNotifications() Убираем любое окрашивание Source: field/index.js render() Генерирует DOM элемент с полем и возвращает его Overrides: module:component.Component#render Source: field/index.js Returns: - DOM элемент с формой Type object saveInWindow(id) Записывает объект в глобальную переменную Parameters: Name Type Description id идентификатор, по умолчанию берется идентификатор объекта Inherited From: module:component.Component#saveInWindow Source: component/index.js show() Отобразить скрытый элемент на странице Inherited From: module:component.Component#show Source: component/index.js showError() Окрашиваем поле в красный цвет(неуспешная валидация) Source: field/index.js showSuccess() Окрашиваем поле в зеленный цвет(успешная валидация) Source: field/index.js trigger(eventName, data) Активирует событие на элементе Parameters: Name Type Description eventName data Inherited From: module:component.Component#trigger Source: component/index.js × Search results Close Documentation generated by JSDoc 3.5.3 on 2017-08-11T15:31:46+08:00 using the DocStrap template. "},"module-form.html":{"id":"module-form.html","title":"Module: form","body":" Documentation Modules authauthPagebuttoncomponentconfigcontentBuilderdropdownFieldfieldformgridlayoutmainPagemapmenupopupsimpleFieldtabstoolstwoBe Classes button.Buttoncomponent.ComponentcontentBuilder~PagedropdownField.DropdownFieldfield.Fieldform.Formgrid.Gridgrid.GridNewlayout.Layoutmap.Mappopup.PopupsimpleField.SimpleFieldtabs.Tabstabs~Tabtools.AjaxSendertools.BrowserNotificationtools.Freezertools.TokenAuthtools.UnzippertwoBe~Request Module: form Модуль для построения форм Source: form/index.js Requires module:simpleField module:button module:dropdownField module:component Classes Form × Search results Close Documentation generated by JSDoc 3.5.3 on 2017-08-11T15:31:46+08:00 using the DocStrap template. "},"module-form.Form.html":{"id":"module-form.Form.html","title":"Class: Form","body":" Documentation Modules authauthPagebuttoncomponentconfigcontentBuilderdropdownFieldfieldformgridlayoutmainPagemapmenupopupsimpleFieldtabstoolstwoBe Classes button.Buttoncomponent.ComponentcontentBuilder~PagedropdownField.DropdownFieldfield.Fieldform.Formgrid.Gridgrid.GridNewlayout.Layoutmap.Mappopup.PopupsimpleField.SimpleFieldtabs.Tabstabs~Tabtools.AjaxSendertools.BrowserNotificationtools.Freezertools.TokenAuthtools.UnzippertwoBe~Request Class: Form form. Form new Form() Source: form/index.js Extends module:component.Component Members box :DOM Место для компонента Type: DOM Inherited From: module:component.Component#box Overrides: module:component.Component#box Source: component/index.js children :array Массив деток, нужен для каскадного обновления Type: array Inherited From: module:component.Component#children Source: component/index.js code :object Объект с именем обработчика события и кодом этого обработчика Type: object Inherited From: module:component.Component#code Source: component/index.js content :array Данные компонента Type: array Inherited From: module:component.Component#content Source: component/index.js events :object Cобытия элемента, объект с именем события и именем обработчика события Type: object Inherited From: module:component.Component#events Source: component/index.js id :string Значение для идентификации всех компнентов (опционально) Type: string Inherited From: module:component.Component#id Source: component/index.js parent :object Cсылка на родительский элемент Type: object Inherited From: module:component.Component#parent Source: component/index.js path :string Путь к объекту данных Type: string Inherited From: module:component.Component#path Source: component/index.js Methods addChildren(child) Записывает объект в дети текущего объекта Parameters: Name Type Description child объект Inherited From: module:component.Component#addChildren Source: component/index.js destroy() Уничтожает компонент Inherited From: module:component.Component#destroy Source: component/index.js disable() Сделать элемент недоступным для редактирования Inherited From: module:component.Component#disable Source: component/index.js enable() Сделать элемент доступным для редактирования Inherited From: module:component.Component#enable Source: component/index.js getAttributes(attributes) Из формата, пришедшего с сервера, добирает нужные поля объекта Parameters: Name Type Description attributes Inherited From: module:component.Component#getAttributes Overrides: module:component.Component#getAttributes Source: component/index.js getData() Функция воозвращает данные в формате queryString Source: form/index.js getField(name) Получить field по имени Parameters: Name Type Description name Source: form/index.js getProperties() Функция для совместимости с мобильным приложением, возвращает сам объект Inherited From: module:component.Component#getProperties Source: component/index.js Returns: Type Component hide() Скрыть элемент со страницы Inherited From: module:component.Component#hide Source: component/index.js makeAsos(array, key) Делает ассоциативный массив Parameters: Name Type Description array массив key ключ Inherited From: module:component.Component#makeAsos Source: component/index.js Returns: - ассоциативный массив Type object prepareCode(oldCode) Преобразует код из строки Parameters: Name Type Description oldCode object объект из строковых функций Inherited From: module:component.Component#prepareCode Source: component/index.js Returns: newCode - объект из функций Type object prepareData(contentArr) Выделение записей и внешних ключей из content Parameters: Name Type Description contentArr массив контента Inherited From: module:component.Component#prepareData Source: component/index.js Returns: - Объект из записей и внешних ключей к ним Type object recInChildren() Функция записывает объект в дети к родителю Inherited From: module:component.Component#recInChildren Source: component/index.js refresh() Обновить отображение объекта, нужно для в2уи в процессе скрытия/отображения Inherited From: module:component.Component#refresh Source: component/index.js reload() Перезагружает компонент Inherited From: module:component.Component#reload Source: component/index.js render() Генерирует DOM элемент с формой и возвращает его Overrides: module:component.Component#render Source: form/index.js Returns: - DOM элемент с формой Type object saveInWindow(id) Записывает объект в глобальную переменную Parameters: Name Type Description id идентификатор, по умолчанию берется идентификатор объекта Inherited From: module:component.Component#saveInWindow Source: component/index.js show() Отобразить скрытый элемент на странице Inherited From: module:component.Component#show Source: component/index.js trigger(eventName, data) Активирует событие на элементе Parameters: Name Type Description eventName data Inherited From: module:component.Component#trigger Source: component/index.js validate() Валидация всех полей формы Source: form/index.js Returns: || false Type array × Search results Close Documentation generated by JSDoc 3.5.3 on 2017-08-11T15:31:46+08:00 using the DocStrap template. "},"module-grid.html":{"id":"module-grid.html","title":"Module: grid","body":" Documentation Modules authauthPagebuttoncomponentconfigcontentBuilderdropdownFieldfieldformgridlayoutmainPagemapmenupopupsimpleFieldtabstoolstwoBe Classes button.Buttoncomponent.ComponentcontentBuilder~PagedropdownField.DropdownFieldfield.Fieldform.Formgrid.Gridgrid.GridNewlayout.Layoutmap.Mappopup.PopupsimpleField.SimpleFieldtabs.Tabstabs~Tabtools.AjaxSendertools.BrowserNotificationtools.Freezertools.TokenAuthtools.UnzippertwoBe~Request Module: grid Модуль для построения таблиц Source: grid/grid.js Requires module:tools module:component Classes Grid GridNew × Search results Close Documentation generated by JSDoc 3.5.3 on 2017-08-11T15:31:47+08:00 using the DocStrap template. "},"module-grid.Grid.html":{"id":"module-grid.Grid.html","title":"Class: Grid","body":" Documentation Modules authauthPagebuttoncomponentconfigcontentBuilderdropdownFieldfieldformgridlayoutmainPagemapmenupopupsimpleFieldtabstoolstwoBe Classes button.Buttoncomponent.ComponentcontentBuilder~PagedropdownField.DropdownFieldfield.Fieldform.Formgrid.Gridgrid.GridNewlayout.Layoutmap.Mappopup.PopupsimpleField.SimpleFieldtabs.Tabstabs~Tabtools.AjaxSendertools.BrowserNotificationtools.Freezertools.TokenAuthtools.UnzippertwoBe~Request Class: Grid grid. Grid Класс представляет собой компонент таблицы new Grid() Source: grid/grid.js Extends module:component.Component Members box :DOM Место для компонента Type: DOM Inherited From: module:component.Component#box Source: component/index.js btns :object Кнопки таблицы Type: object Source: grid/grid.js children :array Массив деток, нужен для каскадного обновления Type: array Inherited From: module:component.Component#children Source: component/index.js code :object Объект с именем обработчика события и кодом этого обработчика Type: object Inherited From: module:component.Component#code Source: component/index.js columnsRaw :array Колонки таблицы в сыром виде Type: array Source: grid/grid.js content :array Данные компонента Type: array Inherited From: module:component.Component#content Source: component/index.js events :object Cобытия элемента, объект с именем события и именем обработчика события Type: object Inherited From: module:component.Component#events Source: component/index.js fk :array Внешние ключи Type: array Source: grid/grid.js groupedBy :array Колонки по которым группируются записи Type: array Source: grid/grid.js handlers :object Массив обработчиков событий таблицы Type: object Source: grid/grid.js header :string Заголовок таблицы Type: string Source: grid/grid.js hierachy :boolean Иерархия Type: boolean Source: grid/grid.js id :string Значение для идентификации всех компнентов (опционально) Type: string Inherited From: module:component.Component#id Source: component/index.js limit :boolean Лимит подгружения Type: boolean Source: grid/grid.js pagination :boolean Пагинация Type: boolean Source: grid/grid.js parent :object Cсылка на родительский элемент Type: object Inherited From: module:component.Component#parent Source: component/index.js path :string Путь к объекту данных Type: string Inherited From: module:component.Component#path Source: component/index.js recordsBS :array Cтроки таблицы до поиска Type: array Source: grid/grid.js recordsRaw :object Строки таблицы из формата Type: object Source: grid/grid.js showGroupCol :string Колонка в которую выводится результат группировки Type: string Source: grid/grid.js toolbar :object Тулбар таблицы Type: object Source: grid/grid.js Methods addChildren(child) Записывает объект в дети текущего объекта Parameters: Name Type Description child объект Inherited From: module:component.Component#addChildren Source: component/index.js addRecord(data) Функция выполняет добавление записи в таблицу Parameters: Name Type Description data данные с сервера при добавлении Source: grid/grid.js deleteRecords(id) Функция удаляет данные Parameters: Name Type Description id идентифкатор записи Source: grid/grid.js destroy() Уничтожает компонент Inherited From: module:component.Component#destroy Source: component/index.js disable() Сделать элемент недоступным для редактирования Inherited From: module:component.Component#disable Source: component/index.js enable() Сделать элемент доступным для редактирования Inherited From: module:component.Component#enable Source: component/index.js findPathInTree(id, records, path, deep) Формирует путь до искомой записи в дереве (рекурсия) Parameters: Name Type Description id что выделить records строки в формате в2уи path путь deep глубина поиска Source: grid/grid.js Returns: - путь жо искомой записи Type array getAttributes(attributes) Из формата, пришедшего с сервера, добирает нужные поля объекта Parameters: Name Type Description attributes Inherited From: module:component.Component#getAttributes Overrides: module:component.Component#getAttributes Source: component/index.js getProperties() Функция для совместимости с мобильным приложением, возвращает сам объект Inherited From: module:component.Component#getProperties Source: component/index.js Returns: Type Component getSelectedID() Получает идентификатор выделенной записи Source: grid/grid.js Returns: getSelectedIDs() Получает идентификаторы выделенных записей Source: grid/grid.js Returns: groupBy(records, columns, params, col, d) Группирует записи Parameters: Name Type Default Description records записи columns колонки params уровни col куда поместить d 0 уровень Source: grid/grid.js Returns: - массив сгруппированных записей Type Array hide() Скрыть элемент со страницы Inherited From: module:component.Component#hide Source: component/index.js lock(msg) Фризит таблицу Parameters: Name Type Description msg выводимое сообщение Source: grid/grid.js makeAsos(array, key) Делает ассоциативный массив Parameters: Name Type Description array массив key ключ Inherited From: module:component.Component#makeAsos Source: component/index.js Returns: - ассоциативный массив Type object makeColumns() Делаем колонки Source: grid/grid.js Returns: - массив колонок Type Array makeRecords(recordsRaw, fk) Подготоваливаем записи для в2грид Parameters: Name Type Description recordsRaw записи fk внешние ключи Source: grid/grid.js Returns: - массив записей Type Array makeToolbar() Делaем тулбар Source: grid/grid.js Returns: Type Object prepareCode(oldCode) Преобразует код из строки Parameters: Name Type Description oldCode object объект из строковых функций Inherited From: module:component.Component#prepareCode Source: component/index.js Returns: newCode - объект из функций Type object prepareData(contentArr) Выделение записей и внешних ключей из content Parameters: Name Type Description contentArr массив контента Inherited From: module:component.Component#prepareData Source: component/index.js Returns: - Объект из записей и внешних ключей к ним Type object recInChildren() Функция записывает объект в дети к родителю Inherited From: module:component.Component#recInChildren Source: component/index.js refresh() Обновить отображение объекта, нужно для в2уи в процессе скрытия/отображения Inherited From: module:component.Component#refresh Overrides: module:component.Component#refresh Source: component/index.js reload() Перезагружает компонент Inherited From: module:component.Component#reload Source: component/index.js reloadRecords(data) Перезагружет записи Parameters: Name Type Description data данные с сервера Source: grid/grid.js saveInWindow(id) Записывает объект в глобальную переменную Parameters: Name Type Description id идентификатор, по умолчанию берется идентификатор объекта Inherited From: module:component.Component#saveInWindow Source: component/index.js selectInTree(id, expand, light) Выделяет строку в иеарахическом справочнике, который подгружается сразу Parameters: Name Type Default Description id что выделить expand true нужно ли разворачивать дерево light true нужно ли подсвечивать Source: grid/grid.js Returns: - резульат выделения Type boolean selectRecord(id, scroll) Функция выделяет запись в таблице Parameters: Name Type Default Description id идентификатор scroll true нужно ли сделать наведение фокуса Source: grid/grid.js setButtons() Преобразует формат в массив кнопок таблицы Source: grid/grid.js setHandlers() Формирование массива событий таблицы Source: grid/grid.js show() Отобразить скрытый элемент на странице Inherited From: module:component.Component#show Source: component/index.js trigger(eventName, data) Активирует событие на элементе Parameters: Name Type Description eventName data Inherited From: module:component.Component#trigger Source: component/index.js unlock() Размораживает таблицу Source: grid/grid.js updateRecord(data) Функция выполняет изменение записи в таблице Parameters: Name Type Description data данные с сервера Source: grid/grid.js × Search results Close Documentation generated by JSDoc 3.5.3 on 2017-08-11T15:31:47+08:00 using the DocStrap template. "},"module-grid.GridNew.html":{"id":"module-grid.GridNew.html","title":"Class: GridNew","body":" Documentation Modules authauthPagebuttoncomponentconfigcontentBuilderdropdownFieldfieldformgridlayoutmainPagemapmenupopupsimpleFieldtabstoolstwoBe Classes button.Buttoncomponent.ComponentcontentBuilder~PagedropdownField.DropdownFieldfield.Fieldform.Formgrid.Gridgrid.GridNewlayout.Layoutmap.Mappopup.PopupsimpleField.SimpleFieldtabs.Tabstabs~Tabtools.AjaxSendertools.BrowserNotificationtools.Freezertools.TokenAuthtools.UnzippertwoBe~Request Class: GridNew grid. GridNew Класс для тестирования возможностей таблиц - скорее всего не работает(( new GridNew() Source: grid/grid.js Extends module:grid.Grid Members box :DOM Место для компонента Type: DOM Inherited From: module:component.Component#box Source: component/index.js btns :object Кнопки таблицы Type: object Inherited From: module:grid.Grid#btns Source: grid/grid.js children :array Массив деток, нужен для каскадного обновления Type: array Inherited From: module:component.Component#children Source: component/index.js code :object Объект с именем обработчика события и кодом этого обработчика Type: object Inherited From: module:component.Component#code Source: component/index.js columnsRaw :array Колонки таблицы в сыром виде Type: array Inherited From: module:grid.Grid#columnsRaw Source: grid/grid.js content :array Данные компонента Type: array Inherited From: module:component.Component#content Source: component/index.js events :object Cобытия элемента, объект с именем события и именем обработчика события Type: object Inherited From: module:component.Component#events Source: component/index.js fk :array Внешние ключи Type: array Inherited From: module:grid.Grid#fk Source: grid/grid.js groupedBy :array Колонки по которым группируются записи Type: array Inherited From: module:grid.Grid#groupedBy Overrides: module:grid.Grid#groupedBy Source: grid/grid.js handlers :object Массив обработчиков событий таблицы Type: object Inherited From: module:grid.Grid#handlers Source: grid/grid.js header :string Заголовок таблицы Type: string Inherited From: module:grid.Grid#header Source: grid/grid.js hierachy :boolean Иерархия Type: boolean Inherited From: module:grid.Grid#hierachy Source: grid/grid.js id :string Значение для идентификации всех компнентов (опционально) Type: string Inherited From: module:component.Component#id Source: component/index.js limit :boolean Лимит подгружения Type: boolean Inherited From: module:grid.Grid#limit Source: grid/grid.js pagination :boolean Пагинация Type: boolean Inherited From: module:grid.Grid#pagination Source: grid/grid.js parent :object Cсылка на родительский элемент Type: object Inherited From: module:component.Component#parent Source: component/index.js path :string Путь к объекту данных Type: string Inherited From: module:component.Component#path Source: component/index.js recordsBS :array Cтроки таблицы до поиска Type: array Inherited From: module:grid.Grid#recordsBS Overrides: module:grid.Grid#recordsBS Source: grid/grid.js recordsRaw :object Строки таблицы из формата Type: object Inherited From: module:grid.Grid#recordsRaw Source: grid/grid.js showGroupCol :string Колонка в которую выводится результат группировки Type: string Inherited From: module:grid.Grid#showGroupCol Overrides: module:grid.Grid#showGroupCol Source: grid/grid.js toolbar :object Тулбар таблицы Type: object Inherited From: module:grid.Grid#toolbar Source: grid/grid.js Methods addChildren(child) Записывает объект в дети текущего объекта Parameters: Name Type Description child объект Inherited From: module:component.Component#addChildren Source: component/index.js addRecord(data) Функция выполняет добавление записи в таблицу Parameters: Name Type Description data данные с сервера при добавлении Inherited From: module:grid.Grid#addRecord Source: grid/grid.js deleteRecords(id) Функция удаляет данные Parameters: Name Type Description id идентифкатор записи Inherited From: module:grid.Grid#deleteRecords Source: grid/grid.js destroy() Уничтожает компонент Inherited From: module:component.Component#destroy Source: component/index.js disable() Сделать элемент недоступным для редактирования Inherited From: module:component.Component#disable Source: component/index.js enable() Сделать элемент доступным для редактирования Inherited From: module:component.Component#enable Source: component/index.js findPathInTree(id, records, path, deep) Формирует путь до искомой записи в дереве (рекурсия) Parameters: Name Type Description id что выделить records строки в формате в2уи path путь deep глубина поиска Inherited From: module:grid.Grid#findPathInTree Source: grid/grid.js Returns: - путь жо искомой записи Type array getAttributes(attributes) Из формата, пришедшего с сервера, добирает нужные поля объекта Parameters: Name Type Description attributes Inherited From: module:component.Component#getAttributes Source: component/index.js getProperties() Функция для совместимости с мобильным приложением, возвращает сам объект Inherited From: module:component.Component#getProperties Source: component/index.js Returns: Type Component getSelectedID() Получает идентификатор выделенной записи Inherited From: module:grid.Grid#getSelectedID Source: grid/grid.js Returns: getSelectedIDs() Получает идентификаторы выделенных записей Inherited From: module:grid.Grid#getSelectedIDs Source: grid/grid.js Returns: groupBy(records, columns, params, col, d) Группирует записи Parameters: Name Type Default Description records записи columns колонки params уровни col куда поместить d 0 уровень Inherited From: module:grid.Grid#groupBy Source: grid/grid.js Returns: - массив сгруппированных записей Type Array hide() Скрыть элемент со страницы Inherited From: module:component.Component#hide Source: component/index.js lock(msg) Фризит таблицу Parameters: Name Type Description msg выводимое сообщение Inherited From: module:grid.Grid#lock Source: grid/grid.js makeAsos(array, key) Делает ассоциативный массив Parameters: Name Type Description array массив key ключ Inherited From: module:component.Component#makeAsos Source: component/index.js Returns: - ассоциативный массив Type object makeColumns() Делаем колонки Inherited From: module:grid.Grid#makeColumns Source: grid/grid.js Returns: - массив колонок Type Array makeRecords(recordsRaw, fk) Подготоваливаем записи для в2грид Parameters: Name Type Description recordsRaw записи fk внешние ключи Inherited From: module:grid.Grid#makeRecords Source: grid/grid.js Returns: - массив записей Type Array makeToolbar() Делaем тулбар Inherited From: module:grid.Grid#makeToolbar Source: grid/grid.js Returns: Type Object prepareCode(oldCode) Преобразует код из строки Parameters: Name Type Description oldCode object объект из строковых функций Inherited From: module:component.Component#prepareCode Source: component/index.js Returns: newCode - объект из функций Type object prepareData(contentArr) Выделение записей и внешних ключей из content Parameters: Name Type Description contentArr массив контента Inherited From: module:component.Component#prepareData Source: component/index.js Returns: - Объект из записей и внешних ключей к ним Type object recInChildren() Функция записывает объект в дети к родителю Inherited From: module:component.Component#recInChildren Source: component/index.js refresh() Обновить отображение объекта, нужно для в2уи в процессе скрытия/отображения Inherited From: module:component.Component#refresh Source: component/index.js reload() Перезагружает компонент Inherited From: module:component.Component#reload Source: component/index.js reloadRecords(data) Перезагружет записи Parameters: Name Type Description data данные с сервера Inherited From: module:grid.Grid#reloadRecords Source: grid/grid.js saveInWindow(id) Записывает объект в глобальную переменную Parameters: Name Type Description id идентификатор, по умолчанию берется идентификатор объекта Inherited From: module:component.Component#saveInWindow Source: component/index.js selectInTree(id, expand, light) Выделяет строку в иеарахическом справочнике, который подгружается сразу Parameters: Name Type Default Description id что выделить expand true нужно ли разворачивать дерево light true нужно ли подсвечивать Inherited From: module:grid.Grid#selectInTree Source: grid/grid.js Returns: - резульат выделения Type boolean selectRecord(id, scroll) Функция выделяет запись в таблице Parameters: Name Type Default Description id идентификатор scroll true нужно ли сделать наведение фокуса Inherited From: module:grid.Grid#selectRecord Source: grid/grid.js setButtons() Преобразует формат в массив кнопок таблицы Inherited From: module:grid.Grid#setButtons Overrides: module:grid.Grid#setButtons Source: grid/grid.js setHandlers() Формирование массива событий таблицы Inherited From: module:grid.Grid#setHandlers Overrides: module:grid.Grid#setHandlers Source: grid/grid.js show() Отобразить скрытый элемент на странице Inherited From: module:component.Component#show Source: component/index.js trigger(eventName, data) Активирует событие на элементе Parameters: Name Type Description eventName data Inherited From: module:component.Component#trigger Source: component/index.js unlock() Размораживает таблицу Inherited From: module:grid.Grid#unlock Source: grid/grid.js updateRecord(data) Функция выполняет изменение записи в таблице Parameters: Name Type Description data данные с сервера Inherited From: module:grid.Grid#updateRecord Source: grid/grid.js × Search results Close Documentation generated by JSDoc 3.5.3 on 2017-08-11T15:31:47+08:00 using the DocStrap template. "},"module-layout.html":{"id":"module-layout.html","title":"Module: layout","body":" Documentation Modules authauthPagebuttoncomponentconfigcontentBuilderdropdownFieldfieldformgridlayoutmainPagemapmenupopupsimpleFieldtabstoolstwoBe Classes button.Buttoncomponent.ComponentcontentBuilder~PagedropdownField.DropdownFieldfield.Fieldform.Formgrid.Gridgrid.GridNewlayout.Layoutmap.Mappopup.PopupsimpleField.SimpleFieldtabs.Tabstabs~Tabtools.AjaxSendertools.BrowserNotificationtools.Freezertools.TokenAuthtools.UnzippertwoBe~Request Module: layout Модуль для построения лэйаута страницы, часто употребляется понятие формат https://vk.com Source: layout/index.js Requires module:component module:tools Classes Layout × Search results Close Documentation generated by JSDoc 3.5.3 on 2017-08-11T15:31:47+08:00 using the DocStrap template. "},"module-layout.Layout.html":{"id":"module-layout.Layout.html","title":"Class: Layout","body":" Documentation Modules authauthPagebuttoncomponentconfigcontentBuilderdropdownFieldfieldformgridlayoutmainPagemapmenupopupsimpleFieldtabstoolstwoBe Classes button.Buttoncomponent.ComponentcontentBuilder~PagedropdownField.DropdownFieldfield.Fieldform.Formgrid.Gridgrid.GridNewlayout.Layoutmap.Mappopup.PopupsimpleField.SimpleFieldtabs.Tabstabs~Tabtools.AjaxSendertools.BrowserNotificationtools.Freezertools.TokenAuthtools.UnzippertwoBe~Request Class: Layout layout. Layout Класс для построения лэйаута страницы new Layout() Source: layout/index.js Extends module:component.Component Members box :DOM Место для компонента Type: DOM Inherited From: module:component.Component#box Source: component/index.js children :array Массив деток, нужен для каскадного обновления Type: array Inherited From: module:component.Component#children Source: component/index.js code :object Объект с именем обработчика события и кодом этого обработчика Type: object Inherited From: module:component.Component#code Source: component/index.js content :array Данные компонента Type: array Inherited From: module:component.Component#content Source: component/index.js events :object Cобытия элемента, объект с именем события и именем обработчика события Type: object Inherited From: module:component.Component#events Source: component/index.js id :string Значение для идентификации всех компнентов (опционально) Type: string Inherited From: module:component.Component#id Source: component/index.js panels :object Объект, содержащий панели Type: object Source: layout/index.js parent :object Cсылка на родительский элемент Type: object Inherited From: module:component.Component#parent Source: component/index.js path :string Путь к объекту данных Type: string Inherited From: module:component.Component#path Source: component/index.js Methods addChildren(child) Записывает объект в дети текущего объекта Parameters: Name Type Description child объект Inherited From: module:component.Component#addChildren Source: component/index.js buildPanels() Выполняет построение панелей и объектов в них Source: layout/index.js destroy() Уничтожает компонент Inherited From: module:component.Component#destroy Source: component/index.js disable() Сделать элемент недоступным для редактирования Inherited From: module:component.Component#disable Source: component/index.js enable() Сделать элемент доступным для редактирования Inherited From: module:component.Component#enable Source: component/index.js getAttributes(attributes) Из формата, пришедшего с сервера, добирает нужные поля объекта Parameters: Name Type Description attributes Inherited From: module:component.Component#getAttributes Overrides: module:component.Component#getAttributes Source: component/index.js getProperties() Функция для совместимости с мобильным приложением, возвращает сам объект Inherited From: module:component.Component#getProperties Source: component/index.js Returns: Type Component hide() Скрыть элемент со страницы Inherited From: module:component.Component#hide Source: component/index.js makeAsos(array, key) Делает ассоциативный массив Parameters: Name Type Description array массив key ключ Inherited From: module:component.Component#makeAsos Source: component/index.js Returns: - ассоциативный массив Type object makew2uilayout() Делает объект для в2уай Source: layout/index.js Returns: - формат для фреймворка в2уи https://w2ui.com Type object prepareCode(oldCode) Преобразует код из строки Parameters: Name Type Description oldCode object объект из строковых функций Inherited From: module:component.Component#prepareCode Source: component/index.js Returns: newCode - объект из функций Type object prepareData(contentArr) Выделение записей и внешних ключей из content Parameters: Name Type Description contentArr массив контента Inherited From: module:component.Component#prepareData Source: component/index.js Returns: - Объект из записей и внешних ключей к ним Type object recInChildren() Функция записывает объект в дети к родителю Inherited From: module:component.Component#recInChildren Source: component/index.js refresh() Обновить отображение объекта, нужно для в2уи в процессе скрытия/отображения Inherited From: module:component.Component#refresh Overrides: module:component.Component#refresh Source: component/index.js reload() Перезагружает компонент Inherited From: module:component.Component#reload Source: component/index.js render(place) Parameters: Name Type Description place DOM куда поместить Overrides: module:component.Component#render Source: layout/index.js saveInWindow(id) Записывает объект в глобальную переменную Parameters: Name Type Description id идентификатор, по умолчанию берется идентификатор объекта Inherited From: module:component.Component#saveInWindow Source: component/index.js show() Отобразить скрытый элемент на странице Inherited From: module:component.Component#show Source: component/index.js trigger(eventName, data) Активирует событие на элементе Parameters: Name Type Description eventName data Inherited From: module:component.Component#trigger Source: component/index.js × Search results Close Documentation generated by JSDoc 3.5.3 on 2017-08-11T15:31:47+08:00 using the DocStrap template. "},"module-mainPage.html":{"id":"module-mainPage.html","title":"Module: mainPage","body":" Documentation Modules authauthPagebuttoncomponentconfigcontentBuilderdropdownFieldfieldformgridlayoutmainPagemapmenupopupsimpleFieldtabstoolstwoBe Classes button.Buttoncomponent.ComponentcontentBuilder~PagedropdownField.DropdownFieldfield.Fieldform.Formgrid.Gridgrid.GridNewlayout.Layoutmap.Mappopup.PopupsimpleField.SimpleFieldtabs.Tabstabs~Tabtools.AjaxSendertools.BrowserNotificationtools.Freezertools.TokenAuthtools.UnzippertwoBe~Request Module: mainPage Модуль для построения главной страницы приложения Source: main.js Requires module:menu module:w2ui module:jQuery module:config module:tools module:contentBuilder × Search results Close Documentation generated by JSDoc 3.5.3 on 2017-08-11T15:31:47+08:00 using the DocStrap template. "},"module-map.html":{"id":"module-map.html","title":"Module: map","body":" Documentation Modules authauthPagebuttoncomponentconfigcontentBuilderdropdownFieldfieldformgridlayoutmainPagemapmenupopupsimpleFieldtabstoolstwoBe Classes button.Buttoncomponent.ComponentcontentBuilder~PagedropdownField.DropdownFieldfield.Fieldform.Formgrid.Gridgrid.GridNewlayout.Layoutmap.Mappopup.PopupsimpleField.SimpleFieldtabs.Tabstabs~Tabtools.AjaxSendertools.BrowserNotificationtools.Freezertools.TokenAuthtools.UnzippertwoBe~Request Module: map Модуль для построения карт Source: map/index.js Requires leaflet gzm module:component module:tools Classes Map × Search results Close Documentation generated by JSDoc 3.5.3 on 2017-08-11T15:31:47+08:00 using the DocStrap template. "},"module-map.Map.html":{"id":"module-map.Map.html","title":"Class: Map","body":" Documentation Modules authauthPagebuttoncomponentconfigcontentBuilderdropdownFieldfieldformgridlayoutmainPagemapmenupopupsimpleFieldtabstoolstwoBe Classes button.Buttoncomponent.ComponentcontentBuilder~PagedropdownField.DropdownFieldfield.Fieldform.Formgrid.Gridgrid.GridNewlayout.Layoutmap.Mappopup.PopupsimpleField.SimpleFieldtabs.Tabstabs~Tabtools.AjaxSendertools.BrowserNotificationtools.Freezertools.TokenAuthtools.UnzippertwoBe~Request Class: Map map. Map Заготовка для отображения карт - будет еще серьезно дополняться и модернизироваться new Map() Source: map/index.js Extends module:component.Component Members box :DOM Место для компонента Type: DOM Inherited From: module:component.Component#box Source: component/index.js children :array Массив деток, нужен для каскадного обновления Type: array Inherited From: module:component.Component#children Source: component/index.js code :object Объект с именем обработчика события и кодом этого обработчика Type: object Inherited From: module:component.Component#code Source: component/index.js content :array Данные компонента Type: array Inherited From: module:component.Component#content Source: component/index.js events :object Cобытия элемента, объект с именем события и именем обработчика события Type: object Inherited From: module:component.Component#events Source: component/index.js id :string Значение для идентификации всех компнентов (опционально) Type: string Inherited From: module:component.Component#id Source: component/index.js parent :object Cсылка на родительский элемент Type: object Inherited From: module:component.Component#parent Source: component/index.js path :string Путь к объекту данных Type: string Inherited From: module:component.Component#path Source: component/index.js Methods addChildren(child) Записывает объект в дети текущего объекта Parameters: Name Type Description child объект Inherited From: module:component.Component#addChildren Source: component/index.js addListeners() Добавляет слушателей карты Source: map/index.js connectToCore() Соединяем все с ядром Source: map/index.js createEditor() Создаем редактор Source: map/index.js createGzmCore() Создаем ядро редактора Source: map/index.js deployObjects() Разворчивает объекты на карте Source: map/index.js destroy() Уничтожает компонент Inherited From: module:component.Component#destroy Source: component/index.js disable() Сделать элемент недоступным для редактирования Inherited From: module:component.Component#disable Source: component/index.js enable() Сделать элемент доступным для редактирования Inherited From: module:component.Component#enable Source: component/index.js getAttributes(attributes) Из формата, пришедшего с сервера, добирает нужные поля объекта Parameters: Name Type Description attributes Inherited From: module:component.Component#getAttributes Source: component/index.js getProperties() Функция для совместимости с мобильным приложением, возвращает сам объект Inherited From: module:component.Component#getProperties Source: component/index.js Returns: Type Component hide() Скрыть элемент со страницы Inherited From: module:component.Component#hide Source: component/index.js makeAsos(array, key) Делает ассоциативный массив Parameters: Name Type Description array массив key ключ Inherited From: module:component.Component#makeAsos Source: component/index.js Returns: - ассоциативный массив Type object makeObjectsForMap() Создаем объект для размещения на карте Source: map/index.js prepareCode(oldCode) Преобразует код из строки Parameters: Name Type Description oldCode object объект из строковых функций Inherited From: module:component.Component#prepareCode Source: component/index.js Returns: newCode - объект из функций Type object prepareData(contentArr) Выделение записей и внешних ключей из content Parameters: Name Type Description contentArr массив контента Inherited From: module:component.Component#prepareData Source: component/index.js Returns: - Объект из записей и внешних ключей к ним Type object recInChildren() Функция записывает объект в дети к родителю Inherited From: module:component.Component#recInChildren Source: component/index.js refresh() Обновить отображение объекта, нужно для в2уи в процессе скрытия/отображения Inherited From: module:component.Component#refresh Source: component/index.js reload() Перезагружает компонент Inherited From: module:component.Component#reload Source: component/index.js render() Размещает карту на странице в боксе Overrides: module:component.Component#render Source: map/index.js saveInWindow(id) Записывает объект в глобальную переменную Parameters: Name Type Description id идентификатор, по умолчанию берется идентификатор объекта Inherited From: module:component.Component#saveInWindow Source: component/index.js setSelection(uuid) Выделяет объект на карте Parameters: Name Type Description uuid string идентификатор Source: map/index.js show() Отобразить скрытый элемент на странице Inherited From: module:component.Component#show Source: component/index.js trigger(eventName, data) Активирует событие на элементе Parameters: Name Type Description eventName data Inherited From: module:component.Component#trigger Source: component/index.js × Search results Close Documentation generated by JSDoc 3.5.3 on 2017-08-11T15:31:47+08:00 using the DocStrap template. "},"module-menu.html":{"id":"module-menu.html","title":"Module: menu","body":" Documentation Modules authauthPagebuttoncomponentconfigcontentBuilderdropdownFieldfieldformgridlayoutmainPagemapmenupopupsimpleFieldtabstoolstwoBe Classes button.Buttoncomponent.ComponentcontentBuilder~PagedropdownField.DropdownFieldfield.Fieldform.Formgrid.Gridgrid.GridNewlayout.Layoutmap.Mappopup.PopupsimpleField.SimpleFieldtabs.Tabstabs~Tabtools.AjaxSendertools.BrowserNotificationtools.Freezertools.TokenAuthtools.UnzippertwoBe~Request Module: menu Класс, строящий верхнее навигационное меню Модуль для построения меню new (require(&quot;menu&quot;))(options) Parameters: Name Type Description options object массив опций Properties Name Type Description place stirng идентифкатор места name string имя системы objInfo object информация о доступных маршрутах Source: menu/index.js Methods on(eventName, handler) Обработчик событий, доступный извне Parameters: Name Type Description eventName имя события handler функция-обработчик Source: menu/index.js × Search results Close Documentation generated by JSDoc 3.5.3 on 2017-08-11T15:31:47+08:00 using the DocStrap template. "},"module-popup.html":{"id":"module-popup.html","title":"Module: popup","body":" Documentation Modules authauthPagebuttoncomponentconfigcontentBuilderdropdownFieldfieldformgridlayoutmainPagemapmenupopupsimpleFieldtabstoolstwoBe Classes button.Buttoncomponent.ComponentcontentBuilder~PagedropdownField.DropdownFieldfield.Fieldform.Formgrid.Gridgrid.GridNewlayout.Layoutmap.Mappopup.PopupsimpleField.SimpleFieldtabs.Tabstabs~Tabtools.AjaxSendertools.BrowserNotificationtools.Freezertools.TokenAuthtools.UnzippertwoBe~Request Module: popup Модуль для построения всплывающих окон Source: popup/index.js Requires module:tools module:component Classes Popup × Search results Close Documentation generated by JSDoc 3.5.3 on 2017-08-11T15:31:47+08:00 using the DocStrap template. "},"module-popup.Popup.html":{"id":"module-popup.Popup.html","title":"Class: Popup","body":" Documentation Modules authauthPagebuttoncomponentconfigcontentBuilderdropdownFieldfieldformgridlayoutmainPagemapmenupopupsimpleFieldtabstoolstwoBe Classes button.Buttoncomponent.ComponentcontentBuilder~PagedropdownField.DropdownFieldfield.Fieldform.Formgrid.Gridgrid.GridNewlayout.Layoutmap.Mappopup.PopupsimpleField.SimpleFieldtabs.Tabstabs~Tabtools.AjaxSendertools.BrowserNotificationtools.Freezertools.TokenAuthtools.UnzippertwoBe~Request Class: Popup popup. Popup Класс реализующий построение всплывающего окна new Popup() Source: popup/index.js Members dimension :number Уровень вложенности Type: number Source: popup/index.js modals :array Хранит в себе окна Type: array Source: popup/index.js Methods close() Закрывает очередную модаль Source: popup/index.js getParams(data) Функция из приходящей информации получает информацию об очередной модали - заголовок, тело, кнопки, размеры, а также код Parameters: Name Type Description data object данные с сервера Source: popup/index.js Returns: Type object getPlace(properties) Получает место для построения содержимого модали, взято из старого проекта Parameters: Name Type Description properties свойства модали Source: popup/index.js Returns: Type Promise hide() Скрывает попап Source: popup/index.js lock(msg, spinner) Замораживает попап Parameters: Name Type Default Description msg string сообщение spinner boolean true показывать ли спинннер Source: popup/index.js prepareCode() Source: popup/index.js See: module:component.Component#prepareCode showNewModal(data) Функция выполняет показ нового модального окна Parameters: Name Type Description data информация приходящая с сервера в определенном формате Source: popup/index.js unhide() Показывает Source: popup/index.js unlock() Размораживает попап Source: popup/index.js × Search results Close Documentation generated by JSDoc 3.5.3 on 2017-08-11T15:31:47+08:00 using the DocStrap template. "},"module-simpleField.html":{"id":"module-simpleField.html","title":"Module: simpleField","body":" Documentation Modules authauthPagebuttoncomponentconfigcontentBuilderdropdownFieldfieldformgridlayoutmainPagemapmenupopupsimpleFieldtabstoolstwoBe Classes button.Buttoncomponent.ComponentcontentBuilder~PagedropdownField.DropdownFieldfield.Fieldform.Formgrid.Gridgrid.GridNewlayout.Layoutmap.Mappopup.PopupsimpleField.SimpleFieldtabs.Tabstabs~Tabtools.AjaxSendertools.BrowserNotificationtools.Freezertools.TokenAuthtools.UnzippertwoBe~Request Module: simpleField Модуль для построения simpleField Source: simpleField/index.js Requires module:field Classes SimpleField × Search results Close Documentation generated by JSDoc 3.5.3 on 2017-08-11T15:31:47+08:00 using the DocStrap template. "},"module-simpleField.SimpleField.html":{"id":"module-simpleField.SimpleField.html","title":"Class: SimpleField","body":" Documentation Modules authauthPagebuttoncomponentconfigcontentBuilderdropdownFieldfieldformgridlayoutmainPagemapmenupopupsimpleFieldtabstoolstwoBe Classes button.Buttoncomponent.ComponentcontentBuilder~PagedropdownField.DropdownFieldfield.Fieldform.Formgrid.Gridgrid.GridNewlayout.Layoutmap.Mappopup.PopupsimpleField.SimpleFieldtabs.Tabstabs~Tabtools.AjaxSendertools.BrowserNotificationtools.Freezertools.TokenAuthtools.UnzippertwoBe~Request Class: SimpleField simpleField. SimpleField new SimpleField() Source: simpleField/index.js Extends module:field.Field Members box :DOM Место для компонента Type: DOM Inherited From: module:component.Component#box Source: component/index.js children :array Массив деток, нужен для каскадного обновления Type: array Inherited From: module:component.Component#children Source: component/index.js code :object Объект с именем обработчика события и кодом этого обработчика Type: object Inherited From: module:component.Component#code Source: component/index.js content :array Данные компонента Type: array Inherited From: module:component.Component#content Source: component/index.js events :object Cобытия элемента, объект с именем события и именем обработчика события Type: object Inherited From: module:component.Component#events Source: component/index.js id :string Значение для идентификации всех компнентов (опционально) Type: string Inherited From: module:component.Component#id Source: component/index.js parent :object Cсылка на родительский элемент Type: object Inherited From: module:component.Component#parent Source: component/index.js path :string Путь к объекту данных Type: string Inherited From: module:component.Component#path Source: component/index.js Methods addChildren(child) Записывает объект в дети текущего объекта Parameters: Name Type Description child объект Inherited From: module:component.Component#addChildren Source: component/index.js destroy() Уничтожает компонент Inherited From: module:component.Component#destroy Source: component/index.js disable() Сделать элемент недоступным для редактирования Inherited From: module:component.Component#disable Overrides: module:field.Field#disable Source: component/index.js enable() Сделать элемент доступным для редактирования Inherited From: module:component.Component#enable Overrides: module:field.Field#enable Source: component/index.js getAttributes(attributes) Из формата, пришедшего с сервера, добирает нужные поля объекта Parameters: Name Type Description attributes Inherited From: module:component.Component#getAttributes Source: component/index.js getProperties() Функция для совместимости с мобильным приложением, возвращает сам объект Inherited From: module:component.Component#getProperties Source: component/index.js Returns: Type Component hide() Скрыть элемент со страницы Inherited From: module:component.Component#hide Source: component/index.js isRequired() Метод определяет обязательное ли это поле Inherited From: module:field.Field#isRequired Source: field/index.js Returns: Type boolean makeAsos(array, key) Делает ассоциативный массив Parameters: Name Type Description array массив key ключ Inherited From: module:component.Component#makeAsos Source: component/index.js Returns: - ассоциативный массив Type object prepareCode(oldCode) Преобразует код из строки Parameters: Name Type Description oldCode object объект из строковых функций Inherited From: module:component.Component#prepareCode Source: component/index.js Returns: newCode - объект из функций Type object prepareData(contentArr) Выделение записей и внешних ключей из content Parameters: Name Type Description contentArr массив контента Inherited From: module:component.Component#prepareData Source: component/index.js Returns: - Объект из записей и внешних ключей к ним Type object recInChildren() Функция записывает объект в дети к родителю Inherited From: module:component.Component#recInChildren Source: component/index.js refresh() Обновить отображение объекта, нужно для в2уи в процессе скрытия/отображения Inherited From: module:component.Component#refresh Source: component/index.js reload() Перезагружает компонент Inherited From: module:component.Component#reload Source: component/index.js removeNotifications() Убираем любое окрашивание Inherited From: module:field.Field#removeNotifications Source: field/index.js render() Генерирует DOM элемент с полем и возвращает его Inherited From: module:field.Field#render Source: field/index.js Returns: - DOM элемент с формой Type object saveInWindow(id) Записывает объект в глобальную переменную Parameters: Name Type Description id идентификатор, по умолчанию берется идентификатор объекта Inherited From: module:component.Component#saveInWindow Source: component/index.js show() Отобразить скрытый элемент на странице Inherited From: module:component.Component#show Source: component/index.js showError() Окрашиваем поле в красный цвет(неуспешная валидация) Inherited From: module:field.Field#showError Source: field/index.js showSuccess() Окрашиваем поле в зеленный цвет(успешная валидация) Inherited From: module:field.Field#showSuccess Source: field/index.js trigger(eventName, data) Активирует событие на элементе Parameters: Name Type Description eventName data Inherited From: module:component.Component#trigger Source: component/index.js × Search results Close Documentation generated by JSDoc 3.5.3 on 2017-08-11T15:31:47+08:00 using the DocStrap template. "},"module-tabs.html":{"id":"module-tabs.html","title":"Module: tabs","body":" Documentation Modules authauthPagebuttoncomponentconfigcontentBuilderdropdownFieldfieldformgridlayoutmainPagemapmenupopupsimpleFieldtabstoolstwoBe Classes button.Buttoncomponent.ComponentcontentBuilder~PagedropdownField.DropdownFieldfield.Fieldform.Formgrid.Gridgrid.GridNewlayout.Layoutmap.Mappopup.PopupsimpleField.SimpleFieldtabs.Tabstabs~Tabtools.AjaxSendertools.BrowserNotificationtools.Freezertools.TokenAuthtools.UnzippertwoBe~Request Module: tabs Модуль для построения таблиц Source: tabs/index.js Requires module:component module:tools Classes Tabs Tab × Search results Close Documentation generated by JSDoc 3.5.3 on 2017-08-11T15:31:47+08:00 using the DocStrap template. "},"module-tabs.Tabs.html":{"id":"module-tabs.Tabs.html","title":"Class: Tabs","body":" Documentation Modules authauthPagebuttoncomponentconfigcontentBuilderdropdownFieldfieldformgridlayoutmainPagemapmenupopupsimpleFieldtabstoolstwoBe Classes button.Buttoncomponent.ComponentcontentBuilder~PagedropdownField.DropdownFieldfield.Fieldform.Formgrid.Gridgrid.GridNewlayout.Layoutmap.Mappopup.PopupsimpleField.SimpleFieldtabs.Tabstabs~Tabtools.AjaxSendertools.BrowserNotificationtools.Freezertools.TokenAuthtools.UnzippertwoBe~Request Class: Tabs tabs. Tabs Класс для построения вкладок new Tabs() Source: tabs/index.js Extends module:component.Component Members box :DOM Место для компонента Type: DOM Inherited From: module:component.Component#box Source: component/index.js children :array Массив деток, нужен для каскадного обновления Type: array Inherited From: module:component.Component#children Source: component/index.js code :object Объект с именем обработчика события и кодом этого обработчика Type: object Inherited From: module:component.Component#code Source: component/index.js content :array Данные компонента Type: array Inherited From: module:component.Component#content Source: component/index.js events :object Cобытия элемента, объект с именем события и именем обработчика события Type: object Inherited From: module:component.Component#events Source: component/index.js id :string Значение для идентификации всех компнентов (опционально) Type: string Inherited From: module:component.Component#id Source: component/index.js parent :object Cсылка на родительский элемент Type: object Inherited From: module:component.Component#parent Source: component/index.js path :string Путь к объекту данных Type: string Inherited From: module:component.Component#path Source: component/index.js tabsContent :array Массив для данных о вкладках Type: array Source: tabs/index.js Methods addChildren(child) Записывает объект в дети текущего объекта Parameters: Name Type Description child объект Inherited From: module:component.Component#addChildren Source: component/index.js buildTabs() Функция строит вкладки Source: tabs/index.js buildTabsContent() Строим объекты-вкладки Source: tabs/index.js destroy() Уничтожает компонент Inherited From: module:component.Component#destroy Source: component/index.js disable() Сделать элемент недоступным для редактирования Inherited From: module:component.Component#disable Source: component/index.js enable() Сделать элемент доступным для редактирования Inherited From: module:component.Component#enable Source: component/index.js getAttributes(attributes) Из формата, пришедшего с сервера, добирает нужные поля объекта Parameters: Name Type Description attributes Inherited From: module:component.Component#getAttributes Overrides: module:component.Component#getAttributes Source: component/index.js getProperties() Функция для совместимости с мобильным приложением, возвращает сам объект Inherited From: module:component.Component#getProperties Source: component/index.js Returns: Type Component hide() Скрыть элемент со страницы Inherited From: module:component.Component#hide Source: component/index.js makeAsos(array, key) Делает ассоциативный массив Parameters: Name Type Description array массив key ключ Inherited From: module:component.Component#makeAsos Source: component/index.js Returns: - ассоциативный массив Type object prepareCode(oldCode) Преобразует код из строки Parameters: Name Type Description oldCode object объект из строковых функций Inherited From: module:component.Component#prepareCode Source: component/index.js Returns: newCode - объект из функций Type object prepareData(contentArr) Выделение записей и внешних ключей из content Parameters: Name Type Description contentArr массив контента Inherited From: module:component.Component#prepareData Source: component/index.js Returns: - Объект из записей и внешних ключей к ним Type object recInChildren() Функция записывает объект в дети к родителю Inherited From: module:component.Component#recInChildren Source: component/index.js refresh() Обновление Overrides: module:component.Component#refresh Source: tabs/index.js reload() Перезагружает компонент Inherited From: module:component.Component#reload Source: component/index.js render() Помещает объект в ДОМ Inherited From: module:component.Component#render Source: component/index.js saveInWindow(id) Записывает объект в глобальную переменную Parameters: Name Type Description id идентификатор, по умолчанию берется идентификатор объекта Inherited From: module:component.Component#saveInWindow Source: component/index.js show() Отобразить скрытый элемент на странице Inherited From: module:component.Component#show Source: component/index.js trigger(eventName, data) Активирует событие на элементе Parameters: Name Type Description eventName data Inherited From: module:component.Component#trigger Source: component/index.js × Search results Close Documentation generated by JSDoc 3.5.3 on 2017-08-11T15:31:47+08:00 using the DocStrap template. "},"module-tabs-Tab.html":{"id":"module-tabs-Tab.html","title":"Class: Tab","body":" Documentation Modules authauthPagebuttoncomponentconfigcontentBuilderdropdownFieldfieldformgridlayoutmainPagemapmenupopupsimpleFieldtabstoolstwoBe Classes button.Buttoncomponent.ComponentcontentBuilder~PagedropdownField.DropdownFieldfield.Fieldform.Formgrid.Gridgrid.GridNewlayout.Layoutmap.Mappopup.PopupsimpleField.SimpleFieldtabs.Tabstabs~Tabtools.AjaxSendertools.BrowserNotificationtools.Freezertools.TokenAuthtools.UnzippertwoBe~Request Class: Tab tabs~ Tab Класс сторит одну вкладку new Tab() Source: tabs/index.js Extends module:component.Component Members box :DOM Место для компонента Type: DOM Inherited From: module:component.Component#box Source: component/index.js children :array Массив деток, нужен для каскадного обновления Type: array Inherited From: module:component.Component#children Source: component/index.js code :object Объект с именем обработчика события и кодом этого обработчика Type: object Inherited From: module:component.Component#code Source: component/index.js content :array Данные компонента Type: array Inherited From: module:component.Component#content Source: component/index.js events :object Cобытия элемента, объект с именем события и именем обработчика события Type: object Inherited From: module:component.Component#events Source: component/index.js id :string Значение для идентификации всех компнентов (опционально) Type: string Inherited From: module:component.Component#id Source: component/index.js parent :object Cсылка на родительский элемент Type: object Inherited From: module:component.Component#parent Source: component/index.js path :string Путь к объекту данных Type: string Inherited From: module:component.Component#path Source: component/index.js Methods addChildren(child) Записывает объект в дети текущего объекта Parameters: Name Type Description child объект Inherited From: module:component.Component#addChildren Source: component/index.js destroy() Уничтожает компонент Inherited From: module:component.Component#destroy Source: component/index.js disable() Сделать элемент недоступным для редактирования Inherited From: module:component.Component#disable Source: component/index.js enable() Сделать элемент доступным для редактирования Inherited From: module:component.Component#enable Source: component/index.js fill(data) Заполнить вкладку Parameters: Name Type Description data Source: tabs/index.js getAttributes(attributes) Из формата, пришедшего с сервера, добирает нужные поля объекта Parameters: Name Type Description attributes Inherited From: module:component.Component#getAttributes Overrides: module:component.Component#getAttributes Source: component/index.js getProperties() Функция для совместимости с мобильным приложением, возвращает сам объект Inherited From: module:component.Component#getProperties Source: component/index.js Returns: Type Component hide() Скрыть элемент со страницы Inherited From: module:component.Component#hide Source: component/index.js lock(msg) Заморозить вкладку Parameters: Name Type Description msg сообщение Source: tabs/index.js makeAsos(array, key) Делает ассоциативный массив Parameters: Name Type Description array массив key ключ Inherited From: module:component.Component#makeAsos Source: component/index.js Returns: - ассоциативный массив Type object prepareCode(oldCode) Преобразует код из строки Parameters: Name Type Description oldCode object объект из строковых функций Inherited From: module:component.Component#prepareCode Source: component/index.js Returns: newCode - объект из функций Type object prepareData(contentArr) Выделение записей и внешних ключей из content Parameters: Name Type Description contentArr массив контента Inherited From: module:component.Component#prepareData Source: component/index.js Returns: - Объект из записей и внешних ключей к ним Type object recInChildren() Функция записывает объект в дети к родителю Inherited From: module:component.Component#recInChildren Source: component/index.js refresh() Обновление Overrides: module:component.Component#refresh Source: tabs/index.js reload() Перезагружает компонент Inherited From: module:component.Component#reload Source: component/index.js render() Создать дом объект вкладки Overrides: module:component.Component#render Source: tabs/index.js saveInWindow(id) Записывает объект в глобальную переменную Parameters: Name Type Description id идентификатор, по умолчанию берется идентификатор объекта Inherited From: module:component.Component#saveInWindow Source: component/index.js setFilled(value) Сеттер для установки заполненности вкладки Parameters: Name Type Description value значение Source: tabs/index.js show() Показать вкладку программно Overrides: module:component.Component#show Source: tabs/index.js stop() Прекратить показ текущей вкладки Source: tabs/index.js trigger(eventName, data) Активирует событие на элементе Parameters: Name Type Description eventName data Inherited From: module:component.Component#trigger Source: component/index.js unlock() Разморозить Source: tabs/index.js × Search results Close Documentation generated by JSDoc 3.5.3 on 2017-08-11T15:31:47+08:00 using the DocStrap template. "},"module-tools.html":{"id":"module-tools.html","title":"Module: tools","body":" Documentation Modules authauthPagebuttoncomponentconfigcontentBuilderdropdownFieldfieldformgridlayoutmainPagemapmenupopupsimpleFieldtabstoolstwoBe Classes button.Buttoncomponent.ComponentcontentBuilder~PagedropdownField.DropdownFieldfield.Fieldform.Formgrid.Gridgrid.GridNewlayout.Layoutmap.Mappopup.PopupsimpleField.SimpleFieldtabs.Tabstabs~Tabtools.AjaxSendertools.BrowserNotificationtools.Freezertools.TokenAuthtools.UnzippertwoBe~Request Module: tools Модуль содержащий некоторый общий функционал Source: tools/index.js Requires pako.js http://malsup.com/jquery/block/ Classes AjaxSender BrowserNotification Freezer TokenAuth Unzipper × Search results Close Documentation generated by JSDoc 3.5.3 on 2017-08-11T15:31:47+08:00 using the DocStrap template. "},"module-tools.AjaxSender.html":{"id":"module-tools.AjaxSender.html","title":"Class: AjaxSender","body":" Documentation Modules authauthPagebuttoncomponentconfigcontentBuilderdropdownFieldfieldformgridlayoutmainPagemapmenupopupsimpleFieldtabstoolstwoBe Classes button.Buttoncomponent.ComponentcontentBuilder~PagedropdownField.DropdownFieldfield.Fieldform.Formgrid.Gridgrid.GridNewlayout.Layoutmap.Mappopup.PopupsimpleField.SimpleFieldtabs.Tabstabs~Tabtools.AjaxSendertools.BrowserNotificationtools.Freezertools.TokenAuthtools.UnzippertwoBe~Request Class: AjaxSender tools. AjaxSender Класс для разжатия данных с сервера new AjaxSender(options) Parameters: Name Type Description options object параметры Properties Name Type Description url string адрес msg string тело ссобщения headerAccept string заголовок before function действие во время ожидания Source: tools/index.js Members before :function Действие во время ожидания Type: function Source: tools/index.js headerAccept :string Заголовок Type: string Source: tools/index.js msg :string Тело ссобщения Type: string Source: tools/index.js url :string Адрес Type: string Source: tools/index.js Methods sendQuery() Отслать запрос Source: tools/index.js Returns: Type Promise × Search results Close Documentation generated by JSDoc 3.5.3 on 2017-08-11T15:31:47+08:00 using the DocStrap template. "},"module-tools.BrowserNotification.html":{"id":"module-tools.BrowserNotification.html","title":"Class: BrowserNotification","body":" Documentation Modules authauthPagebuttoncomponentconfigcontentBuilderdropdownFieldfieldformgridlayoutmainPagemapmenupopupsimpleFieldtabstoolstwoBe Classes button.Buttoncomponent.ComponentcontentBuilder~PagedropdownField.DropdownFieldfield.Fieldform.Formgrid.Gridgrid.GridNewlayout.Layoutmap.Mappopup.PopupsimpleField.SimpleFieldtabs.Tabstabs~Tabtools.AjaxSendertools.BrowserNotificationtools.Freezertools.TokenAuthtools.UnzippertwoBe~Request Class: BrowserNotification tools. BrowserNotification Класс для работы с браузерными уведомлениями https://developer.mozilla.org/ru/docs/Web/API/notification new BrowserNotification(title, options) Parameters: Name Type Description title string заголовок options object опции Properties Name Type Description body string текст оповещения Source: tools/index.js × Search results Close Documentation generated by JSDoc 3.5.3 on 2017-08-11T15:31:47+08:00 using the DocStrap template. "},"module-tools.Freezer.html":{"id":"module-tools.Freezer.html","title":"Class: Freezer","body":" Documentation Modules authauthPagebuttoncomponentconfigcontentBuilderdropdownFieldfieldformgridlayoutmainPagemapmenupopupsimpleFieldtabstoolstwoBe Classes button.Buttoncomponent.ComponentcontentBuilder~PagedropdownField.DropdownFieldfield.Fieldform.Formgrid.Gridgrid.GridNewlayout.Layoutmap.Mappopup.PopupsimpleField.SimpleFieldtabs.Tabstabs~Tabtools.AjaxSendertools.BrowserNotificationtools.Freezertools.TokenAuthtools.UnzippertwoBe~Request Class: Freezer tools. Freezer Замораживатель, использует http://malsup.com/jquery/block/ new Freezer(params) Parameters: Name Type Description params object параметры Properties Name Type Description place DOM что морозить message text сообщение Source: tools/index.js Methods lock() Замораживает Source: tools/index.js unlock() Размораживает Source: tools/index.js × Search results Close Documentation generated by JSDoc 3.5.3 on 2017-08-11T15:31:47+08:00 using the DocStrap template. "},"module-tools.TokenAuth.html":{"id":"module-tools.TokenAuth.html","title":"Class: TokenAuth","body":" Documentation Modules authauthPagebuttoncomponentconfigcontentBuilderdropdownFieldfieldformgridlayoutmainPagemapmenupopupsimpleFieldtabstoolstwoBe Classes button.Buttoncomponent.ComponentcontentBuilder~PagedropdownField.DropdownFieldfield.Fieldform.Formgrid.Gridgrid.GridNewlayout.Layoutmap.Mappopup.PopupsimpleField.SimpleFieldtabs.Tabstabs~Tabtools.AjaxSendertools.BrowserNotificationtools.Freezertools.TokenAuthtools.UnzippertwoBe~Request Class: TokenAuth tools. TokenAuth Класс для работы с токеном авторизации в куках new TokenAuth(name) Parameters: Name Type Description name имя токена Source: tools/index.js Members name :string Имя токена Type: string Source: tools/index.js Methods addToken(token) Добавляет токен Parameters: Name Type Description token токен Source: tools/index.js checkToken() Проверить токен Source: tools/index.js Returns: Type string exit(page) Выполняет выход из системы Parameters: Name Type Description page куда уходить Source: tools/index.js × Search results Close Documentation generated by JSDoc 3.5.3 on 2017-08-11T15:31:47+08:00 using the DocStrap template. "},"module-tools.Unzipper.html":{"id":"module-tools.Unzipper.html","title":"Class: Unzipper","body":" Documentation Modules authauthPagebuttoncomponentconfigcontentBuilderdropdownFieldfieldformgridlayoutmainPagemapmenupopupsimpleFieldtabstoolstwoBe Classes button.Buttoncomponent.ComponentcontentBuilder~PagedropdownField.DropdownFieldfield.Fieldform.Formgrid.Gridgrid.GridNewlayout.Layoutmap.Mappopup.PopupsimpleField.SimpleFieldtabs.Tabstabs~Tabtools.AjaxSendertools.BrowserNotificationtools.Freezertools.TokenAuthtools.UnzippertwoBe~Request Class: Unzipper tools. Unzipper Класс для разжатия данных с сервера new Unzipper(zippedData) Parameters: Name Type Description zippedData сжатые данные Source: tools/index.js Members unzippedData :object Разжатые данные Type: object Source: tools/index.js zippedData :gzip Сжатые данные Type: gzip Source: tools/index.js Methods unzip() Выполняет разжатие данных Source: tools/index.js × Search results Close Documentation generated by JSDoc 3.5.3 on 2017-08-11T15:31:47+08:00 using the DocStrap template. "},"module-twoBe.html":{"id":"module-twoBe.html","title":"Module: twoBe","body":" Documentation Modules authauthPagebuttoncomponentconfigcontentBuilderdropdownFieldfieldformgridlayoutmainPagemapmenupopupsimpleFieldtabstoolstwoBe Classes button.Buttoncomponent.ComponentcontentBuilder~PagedropdownField.DropdownFieldfield.Fieldform.Formgrid.Gridgrid.GridNewlayout.Layoutmap.Mappopup.PopupsimpleField.SimpleFieldtabs.Tabstabs~Tabtools.AjaxSendertools.BrowserNotificationtools.Freezertools.TokenAuthtools.UnzippertwoBe~Request Module: twoBe Класс пользовательских функций Модуль для исполнения функций в пользовательском коде, также должен быть реализван в мобильном клиенте new (require(&quot;twoBe&quot;))() Source: twoBe/index.js Requires module:tools module:config Classes Request Methods &lt;static&gt; buildView(data, key) Строит инетрфейс по полученным данным с сервера Parameters: Name Type Description data object данные key string ключ Source: twoBe/index.js &lt;static&gt; cacheData(data, key) Parameters: Name Type Description data object данные для кэширования key string ключ Source: twoBe/index.js &lt;static&gt; createRequest() Создает запрос Source: twoBe/index.js Returns: Type Request &lt;static&gt; getById(id) Получает объект по идентификатору Parameters: Name Type Description id string идентификатор Source: twoBe/index.js Returns: - найденный объект Type object &lt;static&gt; getCache(key) Получить данные по ключу из кэша Parameters: Name Type Description key string ключ Source: twoBe/index.js Returns: объект с данными &lt;static&gt; getDefaultParams() Получает конифигурационные данные - пока в виде заглушки Source: twoBe/index.js Returns: Объект с конфигами Type Object &lt;static&gt; sendRequest(url, action, object, name, beforeSend, success, error) Отсылает запрос на сервер - не используется (вроде) Parameters: Name Type Description url action object name beforeSend success error Source: twoBe/index.js &lt;static&gt; showConfirm(msg, callback) Показать подтверждение Parameters: Name Type Description msg string сообщение callback function что делать если да Source: twoBe/index.js &lt;static&gt; showMessage(type, msg) Показать уведомление Parameters: Name Type Description type string тип msg string сообщение Source: twoBe/index.js × Search results Close Documentation generated by JSDoc 3.5.3 on 2017-08-11T15:31:47+08:00 using the DocStrap template. "},"module-twoBe-Request.html":{"id":"module-twoBe-Request.html","title":"Class: Request","body":" Documentation Modules authauthPagebuttoncomponentconfigcontentBuilderdropdownFieldfieldformgridlayoutmainPagemapmenupopupsimpleFieldtabstoolstwoBe Classes button.Buttoncomponent.ComponentcontentBuilder~PagedropdownField.DropdownFieldfield.Fieldform.Formgrid.Gridgrid.GridNewlayout.Layoutmap.Mappopup.PopupsimpleField.SimpleFieldtabs.Tabstabs~Tabtools.AjaxSendertools.BrowserNotificationtools.Freezertools.TokenAuthtools.UnzippertwoBe~Request Class: Request module:twoBe~ Request Класс запроса new Request() Source: twoBe/index.js Members before :Object Что делать во время ожидания Type: Object Source: twoBe/index.js cacheKey :string Ключ для поисков в кэшэ Type: string Source: twoBe/index.js error :Object Что делать при неудаче Type: Object Source: twoBe/index.js param :object Тело запроса Type: object Source: twoBe/index.js success :Object Что делать при успехе Type: Object Source: twoBe/index.js url :string Адрес запроса Type: string Source: twoBe/index.js Methods addBefore(func) Добавить действие до Parameters: Name Type Description func Source: twoBe/index.js Returns: Type Request addCacheKey(key) Добаляет ключ для кэша Parameters: Name Type Description key Source: twoBe/index.js Returns: Type Request addData(key, value) Сеттер для поля данные запроса Parameters: Name Type Description key string ключ value object значение Source: twoBe/index.js Returns: Type Request addError(func) Добавить действие-неудачу Parameters: Name Type Description func Source: twoBe/index.js Returns: Type Request addParam(key, value) Добавить параметр в запрос Parameters: Name Type Description key string ключ value string значение Source: twoBe/index.js Returns: Type Request addSuccess(func) Добавить действие-успех Parameters: Name Type Description func Source: twoBe/index.js Returns: Type Request addUrl(url) Сеттер для адреса Parameters: Name Type Description url string адрес Source: twoBe/index.js Returns: Type Request send() Отправить запрос Source: twoBe/index.js × Search results Close Documentation generated by JSDoc 3.5.3 on 2017-08-11T15:31:47+08:00 using the DocStrap template. "}}
    </script>

    <script type="text/javascript">
        $(document).ready(function() {
            Searcher.init();
        });

        $(window).on("message", function(msg) {
            var msgData = msg.originalEvent.data;

            if (msgData.msgid != "docstrap.quicksearch.start") {
                return;
            }

            var results = Searcher.search(msgData.searchTerms);

            window.parent.postMessage({"results": results, "msgid": "docstrap.quicksearch.done"}, "*");
        });
    </script>
</body>
</html>
